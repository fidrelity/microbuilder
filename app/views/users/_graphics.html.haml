%div{:id => 'graphicsLayer', :class => "layer"}

  .row{:class => "paginate_buttons"}
    .span9
      = will_paginate graphics, :param_name => :graphics, :container => false, :page_links => false, :show_always => false, :params => {:current => "graphics"}  

  .row
    .span9
      %ul{:class => "thumbnails"}

        - graphics.each do |graphic|

          %li{:id => "graphic#{graphic.id}", :class => "span2"}
            
            .thumbnail

              %a{:href => "#{graphic.image}", :target => "blank"}
                %div{:class => "frame_graphic graphic"}
                  %div{:class => "frame_graphic_element", "data-frames" => "#{graphic.frame_count}", :style => "background-image:url(#{graphic.image});width:#{graphic.frame_width}px;height:#{graphic.frame_height}px;"}
                
              %h6
                = limit_string(graphic.name)

              .row{:class => "graphicDetails"}
                
                .span1

                  =graphic.frame_width
                  x
                  =graphic.frame_height

                .span1{:class => "frame_display"}
                  %span{:class => "frame_number"}
                    = "#{graphic.frame_count}"
                  frames


              -if current_user == graphic.user

                %div{ :class => "settings" }

                  .row
                    .span1{:class => "wrapper"}
                    
                      =link_to(graphic_path(graphic), :method => :delete, :remote => true, :confirm => "Permanently delete this graphic?") do
                        %i{:class => "icon-trash"}
                        delete

                    .span1{:class => "public_state"}
                     
                      - if !graphic.public
                        
                        = link_to "set public", {:controller => "graphics", :action => "release", :id => graphic.id}, :method => :put, :remote => true, :class => "", :title => "set public", :confirm => "Make this graphic available for all users?"     

                      - else

                        %span.label
                          public


%div{:id => "backgroundsLayer", :class => "layer"}

  .row{:class => "paginate_buttons"}
    .span9
      = will_paginate backgrounds, :param_name => :backgrounds, :container => false, :page_links => false, :show_always => false, :params => {:current => "backgrounds"}
  .row
    .span9
      %ul{:class => "thumbnails"} 

        - backgrounds.each do |graphic|

          %li{:id => "graphic#{graphic.id}", :class => "span5", :style => "width:330px"}
          
            .thumbnail
            
              %div{ :style => "background-image:url(#{graphic.image});", :class => "backgroundImage"}
              
              %h4
                = graphic.name
            
              %span{:class => "graphicDetails"}
                =graphic.frame_width
                x
                =graphic.frame_height

              -if current_user == graphic.user

                %div{ :class => "settings" }

                  .row
                    .span1{:class => "wrapper"}
                  
                      =link_to(graphic_path(graphic), :method => :delete, :remote => true, :confirm => "Permanently delete this graphic?") do
                        %i{:class => "icon-trash"}
                        delete

                    .span1{:class => "public_state"}

                      - if !graphic.public

                        = button_to "make public", {:controller => "graphics", :action => "release", :id => graphic.id}, :method => :put, :remote => true, :class => "btn btn-mini", :title => "set public", :confirm => "Make this background available for all users?"
                      - else                        

                        %span.label.label-inverse
                          public

