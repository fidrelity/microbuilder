/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
function cancelTap(){tapValid=!1}function cancelHold(){rightClickPending&&(window.clearTimeout(holdTimeout),rightClickPending=!1,rightClickEvent=null)}function startHold(e){if(rightClickPending)return;rightClickPending=!0,rightClickEvent=e.changedTouches[0],holdTimeout=window.setTimeout("doRightClick();",800)}function doRightClick(){rightClickPending=!1;var e=rightClickEvent,t=document.createEvent("MouseEvent");t.initMouseEvent("mouseup",!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t),t=document.createEvent("MouseEvent"),t.initMouseEvent("mousedown",!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,2,null),e.target.dispatchEvent(t),t=document.createEvent("MouseEvent"),t.initMouseEvent("contextmenu",!0,!0,window,1,e.screenX+50,e.screenY+5,e.clientX+50,e.clientY+5,!1,!1,!1,!1,2,null),e.target.dispatchEvent(t),cancelMouseUp=!0,rightClickEvent=null}function iPadTouchStart(e){var t=e.changedTouches,n=t[0],r="mouseover",i=document.createEvent("MouseEvent");i.initMouseEvent(r,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(i),r="mousedown",i=document.createEvent("MouseEvent"),i.initMouseEvent(r,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(i),tapValid?(window.clearTimeout(tapTimeout),n.target==lastTap?(lastTap=null,tapValid=!1,r="click",i=document.createEvent("MouseEvent"),i.initMouseEvent(r,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(i),r="dblclick",i=document.createEvent("MouseEvent"),i.initMouseEvent(r,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(i)):(lastTap=n.target,tapValid=!0,tapTimeout=window.setTimeout("cancelTap();",600),startHold(e))):(lastTap=n.target,tapValid=!0,tapTimeout=window.setTimeout("cancelTap();",600),startHold(e))}function iPadTouchHandler(e){var t="",n=0;if(e.touches.length>1)return;switch(e.type){case"touchstart":if($(e.changedTouches[0].target).is("select"))return;return iPadTouchStart(e),e.preventDefault(),!1;case"touchmove":cancelHold(),t="mousemove",e.preventDefault();break;case"touchend":if(cancelMouseUp)return cancelMouseUp=!1,e.preventDefault(),!1;cancelHold(),t="mouseup";break;default:return}var r=e.changedTouches,i=r[0],s=document.createEvent("MouseEvent");s.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,n,null),i.target.dispatchEvent(s),t=="mouseup"&&tapValid&&i.target==lastTap&&(s=document.createEvent("MouseEvent"),s.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,n,null),i.target.dispatchEvent(s))}function editor_main(e,t){window.App=Ember.Application.create(),App.username=t,App.game=GameModel.create(),App.gameController=GameController.create(),App.libraryController=LibraryController.create(),App.gameObjectsController=GameObjectsController.create(),App.behaviourController=BehaviourController.create(),App.set("actionController",ActionController.create()),App.actionController.start(),App.mainView=MainView.create(),App.mainView.appendTo("#editor"),e||(e=JSON.parse(Storage.read("game"))),e&&(Ember.run.end(),console.log(e),App.gameController.loadGame(e)&&Notifier.add("An unfinished game was found and loaded","info").notify()),App.updateHelp=function(){App.showhelp?($(".ttip").tooltip(),$(".pop").popover({trigger:"hover"}),Storage.write("showhelp","yes")):($(".ttip").tooltip("destroy"),$(".pop").popover("destroy"),Storage.write("showhelp","no"))},App.hideHelp=function(){$(".ttip").tooltip("hide"),$(".pop").popover("hide")},App.addObserver("showhelp",function(){App.updateHelp()}),$(".helpButton").popover({trigger:"hover"});var n=Storage.read("showhelp");n=!n||n!=="no",App.set("showhelp",n),$("#player").addTouch(),$(".topbar").addTouch(),$(".bar").addTouch()}function paint_main(){window.App=Ember.Application.create(),App.paintController=PaintController.create(),App.paintView=PaintView.create(),App.paintSizeView=PaintSizeView.create(),App.pencilTool=PencilToolModel.create(),App.eraserTool=EraserToolModel.create(),App.drawTool=DrawToolModel.create(),App.selectTool=SelectToolModel.create(),App.fillTool=FillToolModel.create(),App.pipetteTool=PipetteToolModel.create(),App.spritePlayer=SpritePlayerController.create(),App.pixelDrawer=new PixelDrawer,App.paintSizeView.appendTo("#content")}function player_main(e,t){function n(e){$.ajax({url:"/games/"+t+"/played",data:{win:e},type:"PUT",success:function(){}})}t=t||0,window.player=new Player,console.log(JSON.stringify(e)),$("#player")&&(player.init($("#player")),player.startRunloop(),e&&player.parse(e),t&&(player.onWin=function(){n(!0)},player.onLose=function(){n(!1)}))}function getURLParameter(e){return decodeURI((RegExp(e+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])}function pusher_main(){var e=new Pusher("a4bc39aab42024a54d27"),t=e.subscribe("game_channel");t.bind("newgame",function(e){var t=$("#gamesList").find("li").first().clone().removeAttr("id").hide(),n=t.find(".thumbnail");n.prepend('<a href="/users/'+e.author_id+'">by '+e.author+"</a>"),n.prepend("<h4>"+e.name+' <span class="badge badge-important">New</span></h4>'),n.prepend('<a href="/play/'+e.game_id+'"><img src="/assets/game.png" alt="Game"></a>'),$(".thumbnails").prepend(t),t.fadeIn(1e3),$(".thumbnails").find(".span2").last().remove()});var t=e.subscribe("game_public_stream");t.bind("new_activity",function(e){var t=$(".activity-list"),n=t.find("li").first().clone,r=e.user_image,i=e.user_id,s=e.user_image,o=e.verb,u=e.game_author_name,a=e.game_author_id,f=e.game_id,l=n.find(".avatar_stream");l.find("a").attr("href","/users/"+i),l.find(".stream-image").attr("src",r),t.prepend(n)})}function bind(e,t){if(t)return function(){t.apply(e,arguments)}}function extend(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function log(){console.log.apply(console,arguments)}function clamp(e,t,n){return e?e<t?t:e>n?n:e:t}function map(e,t,n,r,i){return(e-t)*(i-r)/(n-t)+r}function checkAngle(e){return e>Math.PI?e-=2*Math.PI:e<=-Math.PI&&(e+=2*Math.PI),e}function rand(e,t){return e=e||0,t=t||1,Math.random()*(t-e)+e}function randInt(e,t){return Math.floor(rand(e,t))}function randSign(){return Math.random()>.5?1:-1}function randBool(){return Math.random()>.5}function incrementString(e){var t,n=null,r=0;if(!e||!e.length)return"2";do{t=parseInt(e.charAt(e.length-1));if(isNaN(t))break;e=e.slice(0,-1),n+=t*Math.pow(10,r++)}while(t===9);return n!==null?e+(n+1):e+"2"}function timeString(e){var t=Math.floor(e/60);return e-=t*60,(t<10?"0":"")+t+":"+(e<10?"0":"")+e}function rgbToHex(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1).toUpperCase()}function bresenham(e,t,n,r,i){var s=Math.abs(t-r),o=-Math.abs(n-i),u=t<r?1:-1,a=n<i?1:-1,f=s+o,l;for(;;){e(t,n);if(t===r&&n===i)break;l=2*f,l>=o&&(f+=o,t+=u),l<=s&&(f+=s,n+=a)}}function ellipse(e,t,n,r,i){var s=Math.abs(t-r),o=Math.abs(n-i),u=o&1,a=4*(1-s)*o*o,f=4*(u+1)*s*s,l=a+f+u*s*s,c;t>r&&(t=r,r+=s),n>i&&(n=i),n+=(o+1)/2,i=n-u,s*=8*s,u=8*o*o;do{e(r,n,t,n),e(t,i,r,i),c=2*l,c<=f&&(n++,i--,l+=f+=s);if(c>=a||2*l>f)t++,r--,l+=a+=u}while(t<=r);while(n-i<o)e(t-1,n,r+1,n++),e(t-1,i,r+1,i--)}function highlight_current_order(){$(".btn-group .order button").removeClass("active");var e=getURLParameter("order");e=="null"&&(e="desc"),$(".btn-group.order button[value="+e+"]").addClass("active")}(function(e,t){function u(e){var t=o[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}function c(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(l,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:s.isNumeric(r)?+r:f.test(r)?s.parseJSON(r):r}catch(o){}s.data(e,n,r)}else r=t}return r}function h(e){for(var t in e){if(t==="data"&&s.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function p(e,t,n){var r=t+"defer",i=t+"queue",o=t+"mark",u=s._data(e,r);u&&(n==="queue"||!s._data(e,i))&&(n==="mark"||!s._data(e,o))&&setTimeout(function(){!s._data(e,i)&&!s._data(e,o)&&(s.removeData(e,r,!0),u.fire())},0)}function H(){return!1}function B(){return!0}function W(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function X(e,t,n){t=t||0;if(s.isFunction(t))return s.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return s.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=s.grep(e,function(e){return e.nodeType===1});if(q.test(t))return s.filter(t,r,!n);t=s.filter(t,r)}return s.grep(e,function(e,r){return s.inArray(e,t)>=0===n})}function V(e){var t=$.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function at(e,t){return s.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ft(e,t){if(t.nodeType!==1||!s.hasData(e))return;var n,r,i,o=s._data(e),u=s._data(t,o),a=o.events;if(a){delete u.handle,u.events={};for(n in a)for(r=0,i=a[n].length;r<i;r++)s.event.add(t,n,a[n][r])}u.data&&(u.data=s.extend({},u.data))}function lt(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?t.outerHTML=e.outerHTML:n!=="input"||e.type!=="checkbox"&&e.type!=="radio"?n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(s.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached")}function ct(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function ht(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function pt(e){var t=(e.nodeName||"").toLowerCase();t==="input"?ht(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&s.grep(e.getElementsByTagName("input"),ht)}function dt(e){var t=n.createElement("div");return ut.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function kt(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?1:0,o=4;if(r>0){if(n!=="border")for(;i<o;i+=2)n||(r-=parseFloat(s.css(e,"padding"+xt[i]))||0),n==="margin"?r+=parseFloat(s.css(e,n+xt[i]))||0:r-=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0;return r+"px"}r=Tt(e,t);if(r<0||r==null)r=e.style[t];if(bt.test(r))return r;r=parseFloat(r)||0;if(n)for(;i<o;i+=2)r+=parseFloat(s.css(e,"padding"+xt[i]))||0,n!=="padding"&&(r+=parseFloat(s.css(e,"border"+xt[i]+"Width"))||0),n==="margin"&&(r+=parseFloat(s.css(e,n+xt[i]))||0);return r+"px"}function Qt(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(s.isFunction(n)){var r=t.toLowerCase().split(qt),i=0,o=r.length,u,a,f;for(;i<o;i++)u=r[i],f=/^\+/.test(u),f&&(u=u.substr(1)||"*"),a=e[u]=e[u]||[],a[f?"unshift":"push"](n)}}}function Gt(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===Wt,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=Gt(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=Gt(e,n,r,i,"*",o)),c}function Yt(e,n){var r,i,o=s.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((o[r]?e:i||(i={}))[r]=n[r]);i&&s.extend(!0,e,i)}function Zt(e,t,n,r){if(s.isArray(t))s.each(t,function(t,i){n||At.test(e)?r(e,i):Zt(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&s.type(t)==="object")for(var i in t)Zt(e+"["+i+"]",t[i],n,r);else r(e,t)}function en(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function tn(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},o,u,a=r.length,f,l=r[0],c,h,p,d,v;for(o=1;o<a;o++){if(o===1)for(u in e.converters)typeof u=="string"&&(i[u.toLowerCase()]=e.converters[u]);c=l,l=r[o];if(l==="*")l=c;else if(c!=="*"&&c!==l){h=c+" "+l,p=i[h]||i["* "+l];if(!p){v=t;for(d in i){f=d.split(" ");if(f[0]===c||f[0]==="*"){v=i[f[1]+" "+l];if(v){d=i[d],d===!0?p=v:v===!0&&(p=d);break}}}}!p&&!v&&s.error("No conversion from "+h.replace(" "," to ")),p!==!0&&(n=p?p(n):v(d(n)))}}return n}function an(){try{return new e.XMLHttpRequest}catch(t){}}function fn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function yn(){return setTimeout(bn,0),gn=s.now()}function bn(){gn=t}function wn(e,t){var n={};return s.each(mn.concat.apply([],mn.slice(0,t)),function(){n[this]=e}),n}function En(e){if(!ln[e]){var t=n.body,r=s("<"+e+">").appendTo(t),i=r.css("display");r.remove();if(i==="none"||i===""){cn||(cn=n.createElement("iframe"),cn.frameBorder=cn.width=cn.height=0),t.appendChild(cn);if(!hn||!cn.createElement)hn=(cn.contentWindow||cn.contentDocument).document,hn.write((s.support.boxModel?"<!doctype html>":"")+"<html><body>"),hn.close();r=hn.createElement(e),hn.body.appendChild(r),i=s.css(r,"display"),t.removeChild(cn)}ln[e]=i}return ln[e]}function Nn(e){return s.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=e.document,r=e.navigator,i=e.location,s=function(){function H(){if(i.isReady)return;try{n.documentElement.doScroll("left")}catch(e){setTimeout(H,1);return}i.ready()}var i=function(e,t){return new i.fn.init(e,t,u)},s=e.jQuery,o=e.$,u,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=/\S/,l=/^\s+/,c=/\s+$/,h=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,p=/^[\],:{}\s]*$/,d=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,m=/(?:^|:|,)(?:\s*\[)+/g,g=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,E=/-([a-z]|[0-9])/ig,S=/^-ms-/,x=function(e,t){return(t+"").toUpperCase()},T=r.userAgent,N,C,k,L=Object.prototype.toString,A=Object.prototype.hasOwnProperty,O=Array.prototype.push,M=Array.prototype.slice,_=String.prototype.trim,D=Array.prototype.indexOf,P={};return i.fn=i.prototype={constructor:i,init:function(e,r,s){var o,u,f,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!r&&n.body)return this.context=n,this[0]=n.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?o=[null,e,null]:o=a.exec(e);if(o&&(o[1]||!r)){if(o[1])return r=r instanceof i?r[0]:r,l=r?r.ownerDocument||r:n,f=h.exec(e),f?i.isPlainObject(r)?(e=[n.createElement(f[1])],i.fn.attr.call(e,r,!0)):e=[l.createElement(f[1])]:(f=i.buildFragment([o[1]],[l]),e=(f.cacheable?i.clone(f.fragment):f.fragment).childNodes),i.merge(this,e);u=n.getElementById(o[2]);if(u&&u.parentNode){if(u.id!==o[2])return s.find(e);this.length=1,this[0]=u}return this.context=n,this.selector=e,this}return!r||r.jquery?(r||s).find(e):this.constructor(r).find(e)}return i.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),i.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return M.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=this.constructor();return i.isArray(e)?O.apply(r,e):i.merge(r,e),r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return i.each(this,e,t)},ready:function(e){return i.bindReady(),C.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(M.apply(this,arguments),"slice",M.call(arguments).join(","))},map:function(e){return this.pushStack(i.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},i.fn.init.prototype=i.fn,i.extend=i.fn.extend=function(){var e,n,r,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!i.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){r=a[n],s=e[n];if(a===s)continue;c&&s&&(i.isPlainObject(s)||(o=i.isArray(s)))?(o?(o=!1,u=r&&i.isArray(r)?r:[]):u=r&&i.isPlainObject(r)?r:{},a[n]=i.extend(c,u,s)):s!==t&&(a[n]=s)}return a},i.extend({noConflict:function(t){return e.$===i&&(e.$=o),t&&e.jQuery===i&&(e.jQuery=s),i},isReady:!1,readyWait:1,holdReady:function(e){e?i.readyWait++:i.ready(!0)},ready:function(e){if(e===!0&&!--i.readyWait||e!==!0&&!i.isReady){if(!n.body)return setTimeout(i.ready,1);i.isReady=!0;if(e!==!0&&--i.readyWait>0)return;C.fireWith(n,[i]),i.fn.trigger&&i(n).trigger("ready").off("ready")}},bindReady:function(){if(C)return;C=i.Callbacks("once memory");if(n.readyState==="complete")return setTimeout(i.ready,1);if(n.addEventListener)n.addEventListener("DOMContentLoaded",k,!1),e.addEventListener("load",i.ready,!1);else if(n.attachEvent){n.attachEvent("onreadystatechange",k),e.attachEvent("onload",i.ready);var t=!1;try{t=e.frameElement==null}catch(r){}n.documentElement.doScroll&&t&&H()}},isFunction:function(e){return i.type(e)==="function"},isArray:Array.isArray||function(e){return i.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):P[L.call(e)]||"object"},isPlainObject:function(e){if(!e||i.type(e)!=="object"||e.nodeType||i.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||A.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=i.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(p.test(t.replace(d,"@").replace(v,"]").replace(m,"")))return(new Function("return "+t))();i.error("Invalid JSON: "+t)},parseXML:function(n){if(typeof n!="string"||!n)return null;var r,s;try{e.DOMParser?(s=new DOMParser,r=s.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&f.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(S,"ms-").replace(E,x)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,r){var s,o=0,u=e.length,a=u===t||i.isFunction(e);if(r){if(a){for(s in e)if(n.apply(e[s],r)===!1)break}else for(;o<u;)if(n.apply(e[o++],r)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:_?function(e){return e==null?"":_.call(e)}:function(e){return e==null?"":e.toString().replace(l,"").replace(c,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var r=i.type(e);e.length==null||r==="string"||r==="function"||r==="regexp"||i.isWindow(e)?O.call(n,e):i.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(D)return D.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,r){var s,o,u=[],a=0,f=e.length,l=e instanceof i||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||i.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,r),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,r),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var r=e[n];n=e,e=r}if(!i.isFunction(e))return t;var s=M.call(arguments,2),o=function(){return e.apply(n,s.concat(M.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||i.guid++,o},access:function(e,n,r,s,o,u,a){var f,l=r==null,c=0,h=e.length;if(r&&typeof r=="object"){for(c in r)i.access(e,n,c,r[c],1,u,s);o=1}else if(s!==t){f=a===t&&i.isFunction(s),l&&(f?(f=n,n=function(e,t,n){return f.call(i(e),n)}):(n.call(e,s),n=null));if(n)for(;c<h;c++)n(e[c],r,f?s.call(e[c],c,n(e[c],r)):s,a);o=1}return o?e:l?n.call(e):h?n(e[0],r):u},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=g.exec(e)||y.exec(e)||b.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}i.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,s){return s&&s instanceof i&&!(s instanceof e)&&(s=e(s)),i.fn.init.call(this,r,s,t)},e.fn.init.prototype=e.fn;var t=e(n);return e},browser:{}}),i.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){P["[object "+t+"]"]=t.toLowerCase()}),N=i.uaMatch(T),N.browser&&(i.browser[N.browser]=!0,i.browser.version=N.version),i.browser.webkit&&(i.browser.safari=!0),f.test("Â ")&&(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),u=i(n),n.addEventListener?k=function(){n.removeEventListener("DOMContentLoaded",k,!1),i.ready()}:n.attachEvent&&(k=function(){n.readyState==="complete"&&(n.detachEvent("onreadystatechange",k),i.ready())}),i}(),o={};s.Callbacks=function(e){e=e?o[e]||u(e):{};var n=[],r=[],i,a,f,l,c,h,p=function(t){var r,i,o,u,a;for(r=0,i=t.length;r<i;r++)o=t[r],u=s.type(o),u==="array"?p(o):u==="function"&&(!e.unique||!v.has(o))&&n.push(o)},d=function(t,s){s=s||[],i=!e.memory||[t,s],a=!0,f=!0,h=l||0,l=0,c=n.length;for(;n&&h<c;h++)if(n[h].apply(t,s)===!1&&e.stopOnFalse){i=!0;break}f=!1,n&&(e.once?i===!0?v.disable():n=[]:r&&r.length&&(i=r.shift(),v.fireWith(i[0],i[1])))},v={add:function(){if(n){var e=n.length;p(arguments),f?c=n.length:i&&i!==!0&&(l=e,d(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var s=0;s<n.length;s++)if(t[r]===n[s]){f&&s<=c&&(c--,s<=h&&h--),n.splice(s--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&v.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(f?e.once||r.push([t,n]):(!e.once||!i)&&d(t,n)),this},fire:function(){return v.fireWith(this,arguments),this},fired:function(){return!!a}};return v};var a=[].slice;s.extend({Deferred:function(e){var t=s.Callbacks("once memory"),n=s.Callbacks("once memory"),r=s.Callbacks("memory"),i="pending",o={resolve:t,reject:n,notify:r},u={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return a.done(e).fail(t).progress(n),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(e,t,n){return s.Deferred(function(r){s.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],o;s.isFunction(n)?a[e](function(){o=n.apply(this,arguments),o&&s.isFunction(o.promise)?o.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===a?r:this,[o])}):a[e](r[i])})}).promise()},promise:function(e){if(e==null)e=u;else for(var t in u)e[t]=u[t];return e}},a=u.promise({}),f;for(f in o)a[f]=o[f].fire,a[f+"With"]=o[f].fireWith;return a.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(a,a),a},when:function(e){function c(e){return function(n){t[e]=arguments.length>1?a.call(arguments,0):n,--o||f.resolveWith(f,t)}}function h(e){return function(t){i[e]=arguments.length>1?a.call(arguments,0):t,f.notifyWith(l,i)}}var t=a.call(arguments,0),n=0,r=t.length,i=new Array(r),o=r,u=r,f=r<=1&&e&&s.isFunction(e.promise)?e:s.Deferred(),l=f.promise();if(r>1){for(;n<r;n++)t[n]&&t[n].promise&&s.isFunction(t[n].promise)?t[n].promise().then(c(n),f.reject,h(n)):--o;o||f.resolveWith(f,t)}else f!==e&&f.resolveWith(f,r?[e]:[]);return l}}),s.support=function(){var t,r,i,o,u,a,f,l,c,h,p,d,v=n.createElement("div"),m=n.documentElement;v.setAttribute("className","t"),v.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",r=v.getElementsByTagName("*"),i=v.getElementsByTagName("a")[0];if(!r||!r.length||!i)return{};o=n.createElement("select"),u=o.appendChild(n.createElement("option")),a=v.getElementsByTagName("input")[0],t={leadingWhitespace:v.firstChild.nodeType===3,tbody:!v.getElementsByTagName("tbody").length,htmlSerialize:!!v.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:u.selected,getSetAttribute:v.className!=="t",enctype:!!n.createElement("form").enctype,html5Clone:n.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},s.boxModel=t.boxModel=n.compatMode==="CSS1Compat",a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!u.disabled;try{delete v.test}catch(g){t.deleteExpando=!1}!v.addEventListener&&v.attachEvent&&v.fireEvent&&(v.attachEvent("onclick",function(){t.noCloneEvent=!1}),v.cloneNode(!0).fireEvent("onclick")),a=n.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue=a.value==="t",a.setAttribute("checked","checked"),a.setAttribute("name","t"),v.appendChild(a),f=n.createDocumentFragment(),f.appendChild(v.lastChild),t.checkClone=f.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,f.removeChild(a),f.appendChild(v);if(v.attachEvent)for(p in{submit:1,change:1,focusin:1})h="on"+p,d=h in v,d||(v.setAttribute(h,"return;"),d=typeof v[h]=="function"),t[p+"Bubbles"]=d;return f.removeChild(v),f=o=u=v=a=null,s(function(){var r,i,o,u,a,f,c,h,p,m,g,y,b,w=n.getElementsByTagName("body")[0];if(!w)return;h=1,b="padding:0;margin:0;border:",g="position:absolute;top:0;left:0;width:1px;height:1px;",y=b+"0;visibility:hidden;",p="style='"+g+b+"5px solid #000;",m="<div "+p+"display:block;'><div style='"+b+"0;display:block;overflow:hidden;'></div></div>"+"<table "+p+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",r=n.createElement("div"),r.style.cssText=y+"width:0;height:0;position:static;top:0;margin-top:"+h+"px",w.insertBefore(r,w.firstChild),v=n.createElement("div"),r.appendChild(v),v.innerHTML="<table><tr><td style='"+b+"0;display:none'></td><td>t</td></tr></table>",l=v.getElementsByTagName("td"),d=l[0].offsetHeight===0,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=d&&l[0].offsetHeight===0,e.getComputedStyle&&(v.innerHTML="",c=n.createElement("div"),c.style.width="0",c.style.marginRight="0",v.style.width="2px",v.appendChild(c),t.reliableMarginRight=(parseInt((e.getComputedStyle(c,null)||{marginRight:0}).marginRight,10)||0)===0),typeof v.style.zoom!="undefined"&&(v.innerHTML="",v.style.width=v.style.padding="1px",v.style.border=0,v.style.overflow="hidden",v.style.display="inline",v.style.zoom=1,t.inlineBlockNeedsLayout=v.offsetWidth===3,v.style.display="block",v.style.overflow="visible",v.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=v.offsetWidth!==3),v.style.cssText=g+y,v.innerHTML=m,i=v.firstChild,o=i.firstChild,a=i.nextSibling.firstChild.firstChild,f={doesNotAddBorder:o.offsetTop!==5,doesAddBorderForTableAndCells:a.offsetTop===5},o.style.position="fixed",o.style.top="20px",f.fixedPosition=o.offsetTop===20||o.offsetTop===15,o.style.position=o.style.top="",i.style.overflow="hidden",i.style.position="relative",f.subtractsBorderForOverflowNotVisible=o.offsetTop===-5,f.doesNotIncludeMarginInBodyOffset=w.offsetTop!==h,e.getComputedStyle&&(v.style.marginTop="1%",t.pixelMargin=(e.getComputedStyle(v,null)||{marginTop:0}).marginTop!=="1%"),typeof r.style.zoom!="undefined"&&(r.style.zoom=1),w.removeChild(r),c=v=r=null,s.extend(t,f)}),t}();var f=/^(?:\{.*\}|\[.*\])$/,l=/([A-Z])/g;s.extend({cache:{},uuid:0,expando:"jQuery"+(s.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?s.cache[e[s.expando]]:e[s.expando],!!e&&!h(e)},data:function(e,n,r,i){if(!s.acceptData(e))return;var o,u,a,f=s.expando,l=typeof n=="string",c=e.nodeType,h=c?s.cache:e,p=c?e[f]:e[f]&&f,d=n==="events";if((!p||!h[p]||!d&&!i&&!h[p].data)&&l&&r===t)return;p||(c?e[f]=p=++s.uuid:p=f),h[p]||(h[p]={},c||(h[p].toJSON=s.noop));if(typeof n=="object"||typeof n=="function")i?h[p]=s.extend(h[p],n):h[p].data=s.extend(h[p].data,n);return o=u=h[p],i||(u.data||(u.data={}),u=u.data),r!==t&&(u[s.camelCase(n)]=r),d&&!u[n]?o.events:(l?(a=u[n],a==null&&(a=u[s.camelCase(n)])):a=u,a)},removeData:function(e,t,n){if(!s.acceptData(e))return;var r,i,o,u=s.expando,a=e.nodeType,f=a?s.cache:e,l=a?e[u]:u;if(!f[l])return;if(t){r=n?f[l]:f[l].data;if(r){s.isArray(t)||(t in r?t=[t]:(t=s.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?h:s.isEmptyObject)(r))return}}if(!n){delete f[l].data;if(!h(f[l]))return}s.support.deleteExpando||!f.setInterval?delete f[l]:f[l]=null,a&&(s.support.deleteExpando?delete e[u]:e.removeAttribute?e.removeAttribute(u):e[u]=null)},_data:function(e,t,n){return s.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=s.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),s.fn.extend({data:function(e,n){var r,i,o,u,a,f=this[0],l=0,h=null;if(e===t){if(this.length){h=s.data(f);if(f.nodeType===1&&!s._data(f,"parsedAttrs")){o=f.attributes;for(a=o.length;l<a;l++)u=o[l].name,u.indexOf("data-")===0&&(u=s.camelCase(u.substring(5)),c(f,u,h[u]));s._data(f,"parsedAttrs",!0)}}return h}return typeof e=="object"?this.each(function(){s.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",s.access(this,function(n){if(n===t)return h=this.triggerHandler("getData"+i,[r[0]]),h===t&&f&&(h=s.data(f,e),h=c(f,e,h)),h===t&&r[1]?this.data(r[0]):h;r[1]=n,this.each(function(){var t=s(this);t.triggerHandler("setData"+i,r),s.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){s.removeData(this,e)})}}),s.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",s._data(e,t,(s._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(s._data(t,r)||1)-1;i?s._data(t,r,i):(s.removeData(t,r,!0),p(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=s._data(e,t),n&&(!r||s.isArray(n)?r=s._data(e,t,s.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=s.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),s._data(e,t+".run",i),r.call(e,function(){s.dequeue(e,t)},i)),n.length||(s.removeData(e,t+"queue "+t+".run",!0),p(e,t,"queue"))}}),s.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?s.queue(this[0],e):n===t?this:this.each(function(){var t=s.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&s.dequeue(this,e)})},dequeue:function(e){return this.each(function(){s.dequeue(this,e)})},delay:function(e,t){return e=s.fx?s.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function h(){--u||r.resolveWith(i,[i])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var r=s.Deferred(),i=this,o=i.length,u=1,a=e+"defer"
,f=e+"queue",l=e+"mark",c;while(o--)if(c=s.data(i[o],a,t,!0)||(s.data(i[o],f,t,!0)||s.data(i[o],l,t,!0))&&s.data(i[o],a,s.Callbacks("once memory"),!0))u++,c.add(h);return h(),r.promise(n)}});var d=/[\n\t\r]/g,v=/\s+/,m=/\r/g,g=/^(?:button|input)$/i,y=/^(?:button|input|object|select|textarea)$/i,b=/^a(?:rea)?$/i,w=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,E=s.support.getSetAttribute,S,x,T;s.fn.extend({attr:function(e,t){return s.access(this,s.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){s.removeAttr(this,e)})},prop:function(e,t){return s.access(this,s.prop,e,t,arguments.length>1)},removeProp:function(e){return e=s.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,u,a;if(s.isFunction(e))return this.each(function(t){s(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(v);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{o=" "+i.className+" ";for(u=0,a=t.length;u<a;u++)~o.indexOf(" "+t[u]+" ")||(o+=t[u]+" ");i.className=s.trim(o)}}}return this},removeClass:function(e){var n,r,i,o,u,a,f;if(s.isFunction(e))return this.each(function(t){s(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(v);for(r=0,i=this.length;r<i;r++){o=this[r];if(o.nodeType===1&&o.className)if(e){u=(" "+o.className+" ").replace(d," ");for(a=0,f=n.length;a<f;a++)u=u.replace(" "+n[a]+" "," ");o.className=s.trim(u)}else o.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return s.isFunction(e)?this.each(function(n){s(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,o=0,u=s(this),a=t,f=e.split(v);while(i=f[o++])a=r?a:!u.hasClass(i),u[a?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&s._data(this,"__className__",this.className),this.className=this.className||e===!1?"":s._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(d," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,o=this[0];if(!arguments.length){if(o)return n=s.valHooks[o.type]||s.valHooks[o.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(o,"value"))!==t?r:(r=o.value,typeof r=="string"?r.replace(m,""):r==null?"":r);return}return i=s.isFunction(e),this.each(function(r){var o=s(this),u;if(this.nodeType!==1)return;i?u=e.call(this,r,o.val()):u=e,u==null?u="":typeof u=="number"?u+="":s.isArray(u)&&(u=s.map(u,function(e){return e==null?"":e+""})),n=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,u,"value")===t)this.value=u})}}),s.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,u=[],a=e.options,f=e.type==="select-one";if(o<0)return null;n=f?o:0,r=f?o+1:a.length;for(;n<r;n++){i=a[n];if(i.selected&&(s.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!s.nodeName(i.parentNode,"optgroup"))){t=s(i).val();if(f)return t;u.push(t)}}return f&&!u.length&&a.length?s(a[o]).val():u},set:function(e,t){var n=s.makeArray(t);return s(e).find("option").each(function(){this.selected=s.inArray(s(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var o,u,a,f=e.nodeType;if(!e||f===3||f===8||f===2)return;if(i&&n in s.attrFn)return s(e)[n](r);if(typeof e.getAttribute=="undefined")return s.prop(e,n,r);a=f!==1||!s.isXMLDoc(e),a&&(n=n.toLowerCase(),u=s.attrHooks[n]||(w.test(n)?x:S));if(r!==t){if(r===null){s.removeAttr(e,n);return}return u&&"set"in u&&a&&(o=u.set(e,r,n))!==t?o:(e.setAttribute(n,""+r),r)}return u&&"get"in u&&a&&(o=u.get(e,n))!==null?o:(o=e.getAttribute(n),o===null?t:o)},removeAttr:function(e,t){var n,r,i,o,u,a=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(v),o=r.length;for(;a<o;a++)i=r[a],i&&(n=s.propFix[i]||i,u=w.test(i),u||s.attr(e,i,""),e.removeAttribute(E?i:n),u&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(g.test(e.nodeName)&&e.parentNode)s.error("type property can't be changed");else if(!s.support.radioValue&&t==="radio"&&s.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return S&&s.nodeName(e,"button")?S.get(e,t):t in e?e.value:null},set:function(e,t,n){if(S&&s.nodeName(e,"button"))return S.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;return u=a!==1||!s.isXMLDoc(e),u&&(n=s.propFix[n]||n,o=s.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&(i=o.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):y.test(e.nodeName)||b.test(e.nodeName)&&e.href?0:t}}}}),s.attrHooks.tabindex=s.propHooks.tabIndex,x={get:function(e,n){var r,i=s.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?s.removeAttr(e,n):(r=s.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},E||(T={name:!0,id:!0,coords:!0},S=s.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(T[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,r){var i=e.getAttributeNode(r);return i||(i=n.createAttribute(r),e.setAttributeNode(i)),i.nodeValue=t+""}},s.attrHooks.tabindex.set=S.set,s.each(["width","height"],function(e,t){s.attrHooks[t]=s.extend(s.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),s.attrHooks.contenteditable={get:S.get,set:function(e,t,n){t===""&&(t="false"),S.set(e,t,n)}}),s.support.hrefNormalized||s.each(["href","src","width","height"],function(e,n){s.attrHooks[n]=s.extend(s.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),s.support.style||(s.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),s.support.optSelected||(s.propHooks.selected=s.extend(s.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),s.support.enctype||(s.propFix.enctype="encoding"),s.support.checkOn||s.each(["radio","checkbox"],function(){s.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]=s.extend(s.valHooks[this],{set:function(e,t){if(s.isArray(t))return e.checked=s.inArray(s(e).val(),t)>=0}})});var N=/^(?:textarea|input|select)$/i,C=/^([^\.]*)?(?:\.(.+))?$/,k=/(?:^|\s)hover(\.\S+)?\b/,L=/^key/,A=/^(?:mouse|contextmenu)|click/,O=/^(?:focusinfocus|focusoutblur)$/,M=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,_=function(e){var t=M.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},D=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},P=function(e){return s.event.special.hover?e:e.replace(k,"mouseenter$1 mouseleave$1")};s.event={add:function(e,n,r,i,o){var u,a,f,l,c,h,p,d,v,m,g,y;if(e.nodeType===3||e.nodeType===8||!n||!r||!(u=s._data(e)))return;r.handler&&(v=r,r=v.handler,o=v.selector),r.guid||(r.guid=s.guid++),f=u.events,f||(u.events=f={}),a=u.handle,a||(u.handle=a=function(e){return typeof s=="undefined"||!!e&&s.event.triggered===e.type?t:s.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=s.trim(P(n)).split(" ");for(l=0;l<n.length;l++){c=C.exec(n[l])||[],h=c[1],p=(c[2]||"").split(".").sort(),y=s.event.special[h]||{},h=(o?y.delegateType:y.bindType)||h,y=s.event.special[h]||{},d=s.extend({type:h,origType:c[1],data:i,handler:r,guid:r.guid,selector:o,quick:o&&_(o),namespace:p.join(".")},v),g=f[h];if(!g){g=f[h]=[],g.delegateCount=0;if(!y.setup||y.setup.call(e,i,p,a)===!1)e.addEventListener?e.addEventListener(h,a,!1):e.attachEvent&&e.attachEvent("on"+h,a)}y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),o?g.splice(g.delegateCount++,0,d):g.push(d),s.event.global[h]=!0}e=null},global:{},remove:function(e,t,n,r,i){var o=s.hasData(e)&&s._data(e),u,a,f,l,c,h,p,d,v,m,g,y;if(!o||!(d=o.events))return;t=s.trim(P(t||"")).split(" ");for(u=0;u<t.length;u++){a=C.exec(t[u])||[],f=l=a[1],c=a[2];if(!f){for(f in d)s.event.remove(e,f+t[u],n,r,!0);continue}v=s.event.special[f]||{},f=(r?v.delegateType:v.bindType)||f,g=d[f]||[],h=g.length,c=c?new RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(p=0;p<g.length;p++)y=g[p],(i||l===y.origType)&&(!n||n.guid===y.guid)&&(!c||c.test(y.namespace))&&(!r||r===y.selector||r==="**"&&y.selector)&&(g.splice(p--,1),y.selector&&g.delegateCount--,v.remove&&v.remove.call(e,y));g.length===0&&h!==g.length&&((!v.teardown||v.teardown.call(e,c)===!1)&&s.removeEvent(e,f,o.handle),delete d[f])}s.isEmptyObject(d)&&(m=o.handle,m&&(m.elem=null),s.removeData(e,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,o){if(!i||i.nodeType!==3&&i.nodeType!==8){var u=n.type||n,a=[],f,l,c,h,p,d,v,m,g,y;if(O.test(u+s.event.triggered))return;u.indexOf("!")>=0&&(u=u.slice(0,-1),l=!0),u.indexOf(".")>=0&&(a=u.split("."),u=a.shift(),a.sort());if((!i||s.event.customEvent[u])&&!s.event.global[u])return;n=typeof n=="object"?n[s.expando]?n:new s.Event(u,n):new s.Event(u),n.type=u,n.isTrigger=!0,n.exclusive=l,n.namespace=a.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,d=u.indexOf(":")<0?"on"+u:"";if(!i){f=s.cache;for(c in f)f[c].events&&f[c].events[u]&&s.event.trigger(n,r,f[c].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?s.makeArray(r):[],r.unshift(n),v=s.event.special[u]||{};if(v.trigger&&v.trigger.apply(i,r)===!1)return;g=[[i,v.bindType||u]];if(!o&&!v.noBubble&&!s.isWindow(i)){y=v.delegateType||u,h=O.test(y+u)?i:i.parentNode,p=null;for(;h;h=h.parentNode)g.push([h,y]),p=h;p&&p===i.ownerDocument&&g.push([p.defaultView||p.parentWindow||e,y])}for(c=0;c<g.length&&!n.isPropagationStopped();c++)h=g[c][0],n.type=g[c][1],m=(s._data(h,"events")||{})[n.type]&&s._data(h,"handle"),m&&m.apply(h,r),m=d&&h[d],m&&s.acceptData(h)&&m.apply(h,r)===!1&&n.preventDefault();return n.type=u,!o&&!n.isDefaultPrevented()&&(!v._default||v._default.apply(i.ownerDocument,r)===!1)&&(u!=="click"||!s.nodeName(i,"a"))&&s.acceptData(i)&&d&&i[u]&&(u!=="focus"&&u!=="blur"||n.target.offsetWidth!==0)&&!s.isWindow(i)&&(p=i[d],p&&(i[d]=null),s.event.triggered=u,i[u](),s.event.triggered=t,p&&(i[d]=p)),n.result}return},dispatch:function(n){n=s.event.fix(n||e.event);var r=(s._data(this,"events")||{})[n.type]||[],i=r.delegateCount,o=[].slice.call(arguments,0),u=!n.exclusive&&!n.namespace,a=s.event.special[n.type]||{},f=[],l,c,h,p,d,v,m,g,y,b,w;o[0]=n,n.delegateTarget=this;if(a.preDispatch&&a.preDispatch.call(this,n)===!1)return;if(i&&(!n.button||n.type!=="click")){p=s(this),p.context=this.ownerDocument||this;for(h=n.target;h!=this;h=h.parentNode||this)if(h.disabled!==!0){v={},g=[],p[0]=h;for(l=0;l<i;l++)y=r[l],b=y.selector,v[b]===t&&(v[b]=y.quick?D(h,y.quick):p.is(b)),v[b]&&g.push(y);g.length&&f.push({elem:h,matches:g})}}r.length>i&&f.push({elem:this,matches:r.slice(i)});for(l=0;l<f.length&&!n.isPropagationStopped();l++){m=f[l],n.currentTarget=m.elem;for(c=0;c<m.matches.length&&!n.isImmediatePropagationStopped();c++){y=m.matches[c];if(u||!n.namespace&&!y.namespace||n.namespace_re&&n.namespace_re.test(y.namespace))n.data=y.data,n.handleObj=y,d=((s.event.special[y.origType]||{}).handle||y.handler).apply(m.elem,o),d!==t&&(n.result=d,d===!1&&(n.preventDefault(),n.stopPropagation()))}}return a.postDispatch&&a.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,r){var i,s,o,u=r.button,a=r.fromElement;return e.pageX==null&&r.clientX!=null&&(i=e.target.ownerDocument||n,s=i.documentElement,o=i.body,e.pageX=r.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=r.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?r.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[s.expando])return e;var r,i,o=e,u=s.event.fixHooks[e.type]||{},a=u.props?this.props.concat(u.props):this.props;e=s.Event(o);for(r=a.length;r;)i=a[--r],e[i]=o[i];return e.target||(e.target=o.srcElement||n),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),u.filter?u.filter(e,o):e},special:{ready:{setup:s.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){s.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=s.extend(new s.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?s.event.trigger(i,null,t):s.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},s.event.handle=s.event.dispatch,s.removeEvent=n.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},s.Event=function(e,t){if(!(this instanceof s.Event))return new s.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?B:H):this.type=e,t&&s.extend(this,t),this.timeStamp=e&&e.timeStamp||s.now(),this[s.expando]=!0},s.Event.prototype={preventDefault:function(){this.isDefaultPrevented=B;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=B;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=B,this.stopPropagation()},isDefaultPrevented:H,isPropagationStopped:H,isImmediatePropagationStopped:H},s.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){s.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,o=i.selector,u;if(!r||r!==n&&!s.contains(n,r))e.type=i.origType,u=i.handler.apply(this,arguments),e.type=t;return u}}}),s.support.submitBubbles||(s.event.special.submit={setup:function(){if(s.nodeName(this,"form"))return!1;s.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=s.nodeName(n,"input")||s.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(s.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&s.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(s.nodeName(this,"form"))return!1;s.event.remove(this,"._submit")}}),s.support.changeBubbles||(s.event.special.change={setup:function(){if(N.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")s.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),s.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,s.event.simulate("change",this,e,!0))});return!1}s.event.add(this,"beforeactivate._change",function(e){var t=e.target;N.test(t.nodeName)&&!t._change_attached&&(s.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&s.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return s.event.remove(this,"._change"),N.test(this.nodeName)}}),s.support.focusinBubbles||s.each({focus:"focusin",blur:"focusout"},function(e,t){var r=0,i=function(e){s.event.simulate(t,e.target,s.event.fix(e),!0)};s.event.special[t]={setup:function(){r++===0&&n.addEventListener(e,i,!0)},teardown:function(){--r===0&&n.removeEventListener(e,i,!0)}}}),s.fn.extend({on:function(e,n,r,i,o){var u,a;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=H;else if(!i)return this;return o===1&&(u=i,i=function(e){return s().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=s.guid++)),this.each(function(){s.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return s(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this}if(typeof e=="object"){for(var o in e)this.off(o,n,e[o]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=H),this.each(function(){s.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return s(this.context).on(e,this.selector,t,n),this},die:function(e,t){return s(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){s.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return s.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||s.guid++,r=0,i=function(n){var i=(s._data(this,"lastToggle"+e.guid)||0)%r;return s._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),s.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){s.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},s.attrFn&&(s.attrFn[t]=!0),L.test(t)&&(s.event.fixHooks[t]=s.event.keyHooks),A.test(t)&&(s.event.fixHooks[t]=s.event.mouseHooks)}),function(){function S(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}f.nodeType===1&&!o&&(f[r]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}i[u]=l}}}function x(e,t,n,i,s,o){for(var u=0,a=i.length;u<a;u++){var f=i[u];if(f){var l=!1;f=f[e];while(f){if(f[r]===n){l=i[f.sizset];break}if(f.nodeType===1){o||(f[r]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}i[u]=l}}}var e=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r="sizcache"+(Math.random()+"").replace(".",""),i=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(t,r,i,s){i=i||[],r=r||n;var u=r;if(r.nodeType!==1&&r.nodeType!==9)return[];if(!t||typeof t!="string")return i;var a,f,l,c,p,m,g,b,w=!0,E=h.isXML(r),S=[],x=t;do{e.exec(""),a=e.exec(x);if(a){x=a[3],S.push(a[1]);if(a[2]){c=a[3];break}}}while(a);if(S.length>1&&v.exec(t))if(S.length===2&&d.relative[S[0]])f=T(S[0]+S[1],r,s);else{f=d.relative[S[0]]?[r]:h(S.shift(),r);while(S.length)t=S.shift(),d.relative[t]&&(t+=S.shift()),f=T(t,f,s)}else{!s&&S.length>1&&r.nodeType===9&&!E&&d.match.ID.test(S[0])&&!d.match.ID.test(S[S.length-1])&&(p=h.find(S.shift(),r,E),r=p.expr?h.filter(p.expr,p.set)[0]:p.set[0]);if(r){p=s?{expr:S.pop(),set:y(s)}:h.find(S.pop(),S.length!==1||S[0]!=="~"&&S[0]!=="+"||!r.parentNode?r:r.parentNode,E),f=p.expr?h.filter(p.expr,p.set):p.set,S.length>0?l=y(f):w=!1;while(S.length)m=S.pop(),g=m,d.relative[m]?g=S.pop():m="",g==null&&(g=r),d.relative[m](l,g,E)}else l=S=[]}l||(l=f),l||h.error(m||t);if(o.call(l)==="[object Array]")if(!w)i.push.apply(i,l);else if(r&&r.nodeType===1)for(b=0;l[b]!=null;b++)l[b]&&(l[b]===!0||l[b].nodeType===1&&h.contains(r,l[b]))&&i.push(f[b]);else for(b=0;l[b]!=null;b++)l[b]&&l[b].nodeType===1&&i.push(f[b]);else y(l,i);return c&&(h(c,u,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9||r===11){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("parentNode",t,s,e,r,n)},"~":function(e,t,n){var r,s=i++,o=x;typeof t=="string"&&!c.test(t)&&(t=t.toLowerCase(),r=t,o=S),o("previousSibling",t,s,e,r,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=i++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(t,n,r,i,s){if(t[1]==="not"){if(!((e.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=h.filter(t[3],n,r,!0^s);return r||i.push.apply(i,o),!1}t[3]=h(t[3],null,null,n)}else if(d.match.POS.test(t[0])||d.match.CHILD.test(t[0]))return!0;return t},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,i,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],i=t[3];if(n===1&&i===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[r]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[r]=s}return f=e.nodeIndex-i,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));d.match.globalPOS=v;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(n.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;n.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=n.createElement("div"),r="script"+(new Date).getTime(),i=n.documentElement;e.innerHTML="<a name='"+r+"'/>",i.insertBefore(e,i.firstChild),n.getElementById(r)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=n.createElement("div");e.appendChild(n.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),n.querySelectorAll&&function(){var e=h,t=n.createElement("div"),r="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;h=function(t,i,s,o){i=i||n;if(!o&&!h.isXML(i)){var u=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(u&&(i.nodeType===1||i.nodeType===9)){if(u[1])return y(i.getElementsByTagName(t),s);if(u[2]&&d.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(u[2]),s)}if(i.nodeType===9){if(t==="body"&&i.body)return y([i.body],s);if(u&&u[3]){var a=i.getElementById(u[3]);if(!a||!a.parentNode)return y([],s);if(a.id===u[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(f){}}else if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){var l=i,c=i.getAttribute("id"),p=c||r,v=i.parentNode,m=/^\s*[+~]/.test(t);c?p=p.replace(/'/g,"\\$&"):i.setAttribute("id",p),m&&v&&(i=i.parentNode);try{if(!m||v)return y(i.querySelectorAll("[id='"+p+"'] "+t),s)}catch(g){}finally{c||l.removeAttribute
("id")}}}return e(t,i,s,o)};for(var i in e)h[i]=e[i];t=null}(),function(){var e=n.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var r=!t.call(n.createElement("div"),"div"),i=!1;try{t.call(n.documentElement,"[test!='']:sizzle")}catch(s){i=!0}h.matchesSelector=function(e,n){n=n.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(i||!d.match.PSEUDO.test(n)&&!/!=/.test(n)){var s=t.call(e,n);if(s||!r||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(n,null,null,[e]).length>0}}}(),function(){var e=n.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),n.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:n.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var T=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=s.attr,h.selectors.attrMap={},s.find=h,s.expr=h.selectors,s.expr[":"]=s.expr.filters,s.unique=h.uniqueSort,s.text=h.getText,s.isXMLDoc=h.isXML,s.contains=h.contains}();var j=/Until$/,F=/^(?:parents|prevUntil|prevAll)/,I=/,/,q=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,U=s.expr.match.globalPOS,z={children:!0,contents:!0,next:!0,prev:!0};s.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return s(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(s.contains(t[n],this))return!0});var i=this.pushStack("","find",e),o,u,a;for(n=0,r=this.length;n<r;n++){o=i.length,s.find(e,this[n],i);if(n>0)for(u=o;u<i.length;u++)for(a=0;a<o;a++)if(i[a]===i[u]){i.splice(u--,1);break}}return i},has:function(e){var t=s(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(s.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(X(this,e,!1),"not",e)},filter:function(e){return this.pushStack(X(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?U.test(e)?s(e,this.context).index(this[0])>=0:s.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,o=this[0];if(s.isArray(e)){var u=1;while(o&&o.ownerDocument&&o!==t){for(r=0;r<e.length;r++)s(o).is(e[r])&&n.push({selector:e[r],elem:o,level:u});o=o.parentNode,u++}return n}var a=U.test(e)||typeof e!="string"?s(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){o=this[r];while(o){if(a?a.index(o)>-1:s.find.matchesSelector(o,e)){n.push(o);break}o=o.parentNode;if(!o||!o.ownerDocument||o===t||o.nodeType===11)break}}return n=n.length>1?s.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?s.inArray(this[0],s(e)):s.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?s(e,t):s.makeArray(e&&e.nodeType?[e]:e),r=s.merge(this.get(),n);return this.pushStack(W(n[0])||W(r[0])?r:s.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),s.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return s.dir(e,"parentNode")},parentsUntil:function(e,t,n){return s.dir(e,"parentNode",n)},next:function(e){return s.nth(e,2,"nextSibling")},prev:function(e){return s.nth(e,2,"previousSibling")},nextAll:function(e){return s.dir(e,"nextSibling")},prevAll:function(e){return s.dir(e,"previousSibling")},nextUntil:function(e,t,n){return s.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return s.dir(e,"previousSibling",n)},siblings:function(e){return s.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return s.sibling(e.firstChild)},contents:function(e){return s.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:s.makeArray(e.childNodes)}},function(e,t){s.fn[e]=function(n,r){var i=s.map(this,t,n);return j.test(e)||(r=n),r&&typeof r=="string"&&(i=s.filter(r,i)),i=this.length>1&&!z[e]?s.unique(i):i,(this.length>1||I.test(r))&&F.test(e)&&(i=i.reverse()),this.pushStack(i,e,R.call(arguments).join(","))}}),s.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?s.find.matchesSelector(t[0],e)?[t[0]]:[]:s.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&&o.nodeType!==9&&(r===t||o.nodeType!==1||!s(o).is(r)))o.nodeType===1&&i.push(o),o=o[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var $="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",J=/ jQuery\d+="(?:\d+|null)"/g,K=/^\s+/,Q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,G=/<([\w:]+)/,Y=/<tbody/i,Z=/<|&#?\w+;/,et=/<(?:script|style)/i,tt=/<(?:script|object|embed|option|style)/i,nt=new RegExp("<(?:"+$+")[\\s/>]","i"),rt=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/\/(java|ecma)script/i,st=/^\s*<!(?:\[CDATA\[|\-\-)/,ot={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ut=V(n);ot.optgroup=ot.option,ot.tbody=ot.tfoot=ot.colgroup=ot.caption=ot.thead,ot.th=ot.td,s.support.htmlSerialize||(ot._default=[1,"div<div>","</div>"]),s.fn.extend({text:function(e){return s.access(this,function(e){return e===t?s.text(this):this.empty().append((this[0]&&this[0].ownerDocument||n).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(s.isFunction(e))return this.each(function(t){s(this).wrapAll(e.call(this,t))});if(this[0]){var t=s(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return s.isFunction(e)?this.each(function(t){s(this).wrapInner(e.call(this,t))}):this.each(function(){var t=s(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=s.isFunction(e);return this.each(function(n){s(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){s.nodeName(this,"body")||s(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=s.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,s.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||s.filter(e,[r]).length)!t&&r.nodeType===1&&(s.cleanData(r.getElementsByTagName("*")),s.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&s.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return s.clone(this,e,t)})},html:function(e){return s.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(J,""):null;if(typeof e=="string"&&!et.test(e)&&(s.support.leadingWhitespace||!K.test(e))&&!ot[(G.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Q,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(s.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?s.isFunction(e)?this.each(function(t){var n=s(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=s(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;s(this).remove(),t?s(t).before(e):s(n).append(e)})):this.length?this.pushStack(s(s.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,o,u,a,f=e[0],l=[];if(!s.support.checkClone&&arguments.length===3&&typeof f=="string"&&rt.test(f))return this.each(function(){s(this).domManip(e,n,r,!0)});if(s.isFunction(f))return this.each(function(i){var o=s(this);e[0]=f.call(this,i,n?o.html():t),o.domManip(e,n,r)});if(this[0]){a=f&&f.parentNode,s.support.parentNode&&a&&a.nodeType===11&&a.childNodes.length===this.length?i={fragment:a}:i=s.buildFragment(e,this,l),u=i.fragment,u.childNodes.length===1?o=u=u.firstChild:o=u.firstChild;if(o){n=n&&s.nodeName(o,"tr");for(var c=0,h=this.length,p=h-1;c<h;c++)r.call(n?at(this[c],o):this[c],i.cacheable||h>1&&c<p?s.clone(u,!0,!0):u)}l.length&&s.each(l,function(e,t){t.src?s.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):s.globalEval((t.text||t.textContent||t.innerHTML||"").replace(st,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),s.buildFragment=function(e,t,r){var i,o,u,a,f=e[0];return t&&t[0]&&(a=t[0].ownerDocument||t[0]),a.createDocumentFragment||(a=n),e.length===1&&typeof f=="string"&&f.length<512&&a===n&&f.charAt(0)==="<"&&!tt.test(f)&&(s.support.checkClone||!rt.test(f))&&(s.support.html5Clone||!nt.test(f))&&(o=!0,u=s.fragments[f],u&&u!==1&&(i=u)),i||(i=a.createDocumentFragment(),s.clean(e,a,i,r)),o&&(s.fragments[f]=u?i:1),{fragment:i,cacheable:o}},s.fragments={},s.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){s.fn[e]=function(n){var r=[],i=s(n),o=this.length===1&&this[0].parentNode;if(o&&o.nodeType===11&&o.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var u=0,a=i.length;u<a;u++){var f=(u>0?this.clone(!0):this).get();s(i[u])[t](f),r=r.concat(f)}return this.pushStack(r,e,i.selector)}}),s.extend({clone:function(e,t,n){var r,i,o,u=s.support.html5Clone||s.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?e.cloneNode(!0):dt(e);if((!s.support.noCloneEvent||!s.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!s.isXMLDoc(e)){lt(e,u),r=ct(e),i=ct(u);for(o=0;r[o];++o)i[o]&&lt(r[o],i[o])}if(t){ft(e,u);if(n){r=ct(e),i=ct(u);for(o=0;r[o];++o)ft(r[o],i[o])}}return r=i=null,u},clean:function(e,t,r,i){var o,u,a,f=[];t=t||n,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||n);for(var l=0,c;(c=e[l])!=null;l++){typeof c=="number"&&(c+="");if(!c)continue;if(typeof c=="string")if(!Z.test(c))c=t.createTextNode(c);else{c=c.replace(Q,"<$1></$2>");var h=(G.exec(c)||["",""])[1].toLowerCase(),p=ot[h]||ot._default,d=p[0],v=t.createElement("div"),m=ut.childNodes,g;t===n?ut.appendChild(v):V(t).appendChild(v),v.innerHTML=p[1]+c+p[2];while(d--)v=v.lastChild;if(!s.support.tbody){var y=Y.test(c),b=h==="table"&&!y?v.firstChild&&v.firstChild.childNodes:p[1]==="<table>"&&!y?v.childNodes:[];for(a=b.length-1;a>=0;--a)s.nodeName(b[a],"tbody")&&!b[a].childNodes.length&&b[a].parentNode.removeChild(b[a])}!s.support.leadingWhitespace&&K.test(c)&&v.insertBefore(t.createTextNode(K.exec(c)[0]),v.firstChild),c=v.childNodes,v&&(v.parentNode.removeChild(v),m.length>0&&(g=m[m.length-1],g&&g.parentNode&&g.parentNode.removeChild(g)))}var w;if(!s.support.appendChecked)if(c[0]&&typeof (w=c.length)=="number")for(a=0;a<w;a++)pt(c[a]);else pt(c);c.nodeType?f.push(c):f=s.merge(f,c)}if(r){o=function(e){return!e.type||it.test(e.type)};for(l=0;f[l];l++){u=f[l];if(i&&s.nodeName(u,"script")&&(!u.type||it.test(u.type)))i.push(u.parentNode?u.parentNode.removeChild(u):u);else{if(u.nodeType===1){var E=s.grep(u.getElementsByTagName("script"),o);f.splice.apply(f,[l+1,0].concat(E))}r.appendChild(u)}}}return f},cleanData:function(e){var t,n,r=s.cache,i=s.event.special,o=s.support.deleteExpando;for(var u=0,a;(a=e[u])!=null;u++){if(a.nodeName&&s.noData[a.nodeName.toLowerCase()])continue;n=a[s.expando];if(n){t=r[n];if(t&&t.events){for(var f in t.events)i[f]?s.event.remove(a,f):s.removeEvent(a,f,t.handle);t.handle&&(t.handle.elem=null)}o?delete a[s.expando]:a.removeAttribute&&a.removeAttribute(s.expando),delete r[n]}}}});var vt=/alpha\([^)]*\)/i,mt=/opacity=([^)]*)/,gt=/([A-Z]|^ms)/g,yt=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,wt=/^([\-+])=([\-+.\de]+)/,Et=/^margin/,St={position:"absolute",visibility:"hidden",display:"block"},xt=["Top","Right","Bottom","Left"],Tt,Nt,Ct;s.fn.css=function(e,n){return s.access(this,function(e,n,r){return r!==t?s.style(e,n,r):s.css(e,n)},e,n,arguments.length>1)},s.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Tt(e,"opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":s.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var o,u,a=s.camelCase(n),f=e.style,l=s.cssHooks[a];n=s.cssProps[a]||a;if(r===t)return l&&"get"in l&&(o=l.get(e,!1,i))!==t?o:f[n];u=typeof r,u==="string"&&(o=wt.exec(r))&&(r=+(o[1]+1)*+o[2]+parseFloat(s.css(e,n)),u="number");if(r==null||u==="number"&&isNaN(r))return;u==="number"&&!s.cssNumber[a]&&(r+="px");if(!l||!("set"in l)||(r=l.set(e,r))!==t)try{f[n]=r}catch(c){}},css:function(e,n,r){var i,o;n=s.camelCase(n),o=s.cssHooks[n],n=s.cssProps[n]||n,n==="cssFloat"&&(n="float");if(o&&"get"in o&&(i=o.get(e,!0,r))!==t)return i;if(Tt)return Tt(e,n)},swap:function(e,t,n){var r={},i,s;for(s in t)r[s]=e.style[s],e.style[s]=t[s];i=n.call(e);for(s in t)e.style[s]=r[s];return i}}),s.curCSS=s.css,n.defaultView&&n.defaultView.getComputedStyle&&(Nt=function(e,t){var n,r,i,o,u=e.style;return t=t.replace(gt,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!s.contains(e.ownerDocument.documentElement,e)&&(n=s.style(e,t))),!s.support.pixelMargin&&i&&Et.test(t)&&bt.test(n)&&(o=u.width,u.width=n,n=i.width,u.width=o),n}),n.documentElement.currentStyle&&(Ct=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s==null&&o&&(i=o[t])&&(s=i),bt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),Tt=Nt||Ct,s.each(["height","width"],function(e,t){s.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth!==0?kt(e,t,r):s.swap(e,St,function(){return kt(e,t,r)})},set:function(e,t){return yt.test(t)?t+"px":t}}}),s.support.opacity||(s.cssHooks.opacity={get:function(e,t){return mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=s.isNumeric(t)?"alpha(opacity="+t*100+")":"",o=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&s.trim(o.replace(vt,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=vt.test(o)?o.replace(vt,i):o+" "+i}}),s(function(){s.support.reliableMarginRight||(s.cssHooks.marginRight={get:function(e,t){return s.swap(e,{display:"inline-block"},function(){return t?Tt(e,"margin-right"):e.style.marginRight})}})}),s.expr&&s.expr.filters&&(s.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!s.support.reliableHiddenOffsets&&(e.style&&e.style.display||s.css(e,"display"))==="none"},s.expr.filters.visible=function(e){return!s.expr.filters.hidden(e)}),s.each({margin:"",padding:"",border:"Width"},function(e,t){s.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+xt[r]+t]=i[r]||i[r-2]||i[0];return s}}});var Lt=/%20/g,At=/\[\]$/,Ot=/\r?\n/g,Mt=/#.*$/,_t=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Dt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Pt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Bt=/^\/\//,jt=/\?/,Ft=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,It=/^(?:select|textarea)/i,qt=/\s+/,Rt=/([?&])_=[^&]*/,Ut=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,zt=s.fn.load,Wt={},Xt={},Vt,$t,Jt=["*/"]+["*"];try{Vt=i.href}catch(Kt){Vt=n.createElement("a"),Vt.href="",Vt=Vt.href}$t=Ut.exec(Vt.toLowerCase())||[],s.fn.extend({load:function(e,n,r){if(typeof e!="string"&&zt)return zt.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var o=e.slice(i,e.length);e=e.slice(0,i)}var u="GET";n&&(s.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=s.param(n,s.ajaxSettings.traditional),u="POST"));var a=this;return s.ajax({url:e,type:u,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(o?s("<div>").append(n.replace(Ft,"")).find(o):n)),r&&a.each(r,[n,t,e])}}),this},serialize:function(){return s.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?s.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||It.test(this.nodeName)||Dt.test(this.type))}).map(function(e,t){var n=s(this).val();return n==null?null:s.isArray(n)?s.map(n,function(e,n){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:n.replace(Ot,"\r\n")}}).get()}}),s.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){s.fn[t]=function(e){return this.on(t,e)}}),s.each(["get","post"],function(e,n){s[n]=function(e,r,i,o){return s.isFunction(r)&&(o=o||i,i=r,r=t),s.ajax({type:n,url:e,data:r,success:i,dataType:o})}}),s.extend({getScript:function(e,n){return s.get(e,t,n,"script")},getJSON:function(e,t,n){return s.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Yt(e,s.ajaxSettings):(t=e,e=s.ajaxSettings),Yt(e,t),e},ajaxSettings:{url:Vt,isLocal:Pt.test($t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Jt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":s.parseJSON,"text xml":s.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Qt(Wt),ajaxTransport:Qt(Xt),ajax:function(e,n){function S(e,n,c,h){if(y===2)return;y=2,m&&clearTimeout(m),v=t,p=h||"",E.readyState=e>0?4:0;var d,g,w,S=n,x=c?en(r,E,c):t,T,N;if(e>=200&&e<300||e===304){if(r.ifModified){if(T=E.getResponseHeader("Last-Modified"))s.lastModified[l]=T;if(N=E.getResponseHeader("Etag"))s.etag[l]=N}if(e===304)S="notmodified",d=!0;else try{g=tn(r,x),S="success",d=!0}catch(C){S="parsererror",w=C}}else{w=S;if(!S||e)S="error",e<0&&(e=0)}E.status=e,E.statusText=""+(n||S),d?u.resolveWith(i,[g,S,E]):u.rejectWith(i,[E,S,w]),E.statusCode(f),f=t,b&&o.trigger("ajax"+(d?"Success":"Error"),[E,r,d?g:w]),a.fireWith(i,[E,S]),b&&(o.trigger("ajaxComplete",[E,r]),--s.active||s.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r=s.ajaxSetup({},n),i=r.context||r,o=i!==r&&(i.nodeType||i instanceof s)?s(i):s.event,u=s.Deferred(),a=s.Callbacks("once memory"),f=r.statusCode||{},l,c={},h={},p,d,v,m,g,y=0,b,w,E={readyState:0,setRequestHeader:function(e,t){if(!y){var n=e.toLowerCase();e=h[n]=h[n]||e,c[e]=t}return this},getAllResponseHeaders:function(){return y===2?p:null},getResponseHeader:function(e){var n;if(y===2){if(!d){d={};while(n=_t.exec(p))d[n[1].toLowerCase()]=n[2]}n=d[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return y||(r.mimeType=e),this},abort:function(e){return e=e||"abort",v&&v.abort(e),S(0,e),this}};u.promise(E),E.success=E.done,E.error=E.fail,E.complete=a.add,E.statusCode=function(e){if(e){var t;if(y<2)for(t in e)f[t]=[f[t],e[t]];else t=e[E.status],E.then(t,t)}return this},r.url=((e||r.url)+"").replace(Mt,"").replace(Bt,$t[1]+"//"),r.dataTypes=s.trim(r.dataType||"*").toLowerCase().split(qt),r.crossDomain==null&&(g=Ut.exec(r.url.toLowerCase()),r.crossDomain=!(!g||g[1]==$t[1]&&g[2]==$t[2]&&(g[3]||(g[1]==="http:"?80:443))==($t[3]||($t[1]==="http:"?80:443)))),r.data&&r.processData&&typeof r.data!="string"&&(r.data=s.param(r.data,r.traditional)),Gt(Wt,r,n,E);if(y===2)return!1;b=r.global,r.type=r.type.toUpperCase(),r.hasContent=!Ht.test(r.type),b&&s.active++===0&&s.event.trigger("ajaxStart");if(!r.hasContent){r.data&&(r.url+=(jt.test(r.url)?"&":"?")+r.data,delete r.data),l=r.url;if(r.cache===!1){var x=s.now(),T=r.url.replace(Rt,"$1_="+x);r.url=T+(T===r.url?(jt.test(r.url)?"&":"?")+"_="+x:"")}}(r.data&&r.hasContent&&r.contentType!==!1||n.contentType)&&E.setRequestHeader("Content-Type",r.contentType),r.ifModified&&(l=l||r.url,s.lastModified[l]&&E.setRequestHeader("If-Modified-Since",s.lastModified[l]),s.etag[l]&&E.setRequestHeader("If-None-Match",s.etag[l])),E.setRequestHeader("Accept",r.dataTypes[0]&&r.accepts[r.dataTypes[0]]?r.accepts[r.dataTypes[0]]+(r.dataTypes[0]!=="*"?", "+Jt+"; q=0.01":""):r.accepts["*"]);for(w in r.headers)E.setRequestHeader(w,r.headers[w]);if(!r.beforeSend||r.beforeSend.call(i,E,r)!==!1&&y!==2){for(w in{success:1,error:1,complete:1})E[w](r[w]);v=Gt(Xt,r,n,E);if(!v)S(-1,"No Transport");else{E.readyState=1,b&&o.trigger("ajaxSend",[E,r]),r.async&&r.timeout>0&&(m=setTimeout(function(){E.abort("timeout")},r.timeout));try{y=1,v.send(c,S)}catch(N){if(!(y<2))throw N;S(-1,N)}}return E}return E.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=s.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=s.ajaxSettings.traditional);if(s.isArray(e)||e.jquery&&!s.isPlainObject(e))s.each(e,function(){i(this.name,this.value)});else for(var o in e)Zt(o,e[o],n,i);return r.join("&").replace(Lt,"+")}}),s.extend({active:0,lastModified:{},etag:{}});var nn=s.now(),rn=/(\=)\?(&|$)|\?\?/i;s.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return s.expando+"_"+nn++}}),s.ajaxPrefilter("json jsonp",function(t,n,r){var i=typeof t.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(rn.test(t.url)||i&&rn.test(t.data))){var o,u=t.jsonpCallback=s.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[u],f=t.url,l=t.data,c="$1"+u+"$2";return t.jsonp!==!1&&(f=f.replace(rn,c),t.url===f&&(i&&(l=l.replace(rn,c)),t.data===l&&(f+=(/\?/.test(f)?"&":"?")+t.jsonp+"="+u))),t.url=f,t.data=l,e[u]=function(e){o=[e]},r.always(function(){e[u]=a,o&&s.isFunction(a)&&e[u](o[0])}),t.converters["script json"]=function(){return o||s.error(u+" was not called"),o[0]},t.dataTypes[0]="json","script"}}),s.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return s.globalEval(e),e}}}),s.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),s.ajaxTransport("script",function(e){if(e.crossDomain){var r,i=n.head||n.getElementsByTagName("head")[0]||n.documentElement;return{send:function(s,o){r=n.createElement("script"),r.async="async",e.scriptCharset&&(r.charset=e.scriptCharset),r.src=e.url,r.onload=r.onreadystatechange=function(e,n){if(n||!r.readyState||/loaded|complete/.test(r.readyState))r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=t,n||o(200,"success")},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var sn=e.ActiveXObject?function(){for(var e in un)un[e](0,1)}:!1,on=0,un;s.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&an()||fn()}:an,function(e){s.extend(s.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(s.ajaxSettings.xhr()),s.support.ajax&&s.ajaxTransport(function(n){if(!n.crossDomain||s.support.cors){var r;return{send:function(i,o){var u=n.xhr(),a,f;n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async);if(n.xhrFields)for(f in n.xhrFields)u[f]=n.xhrFields[f];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(f in i)u.setRequestHeader(f,i[f])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var f,l,c,h,p;try{if(r&&(i||u.readyState===4)){r=t,a&&(u.onreadystatechange=s.noop,sn&&delete un[a]);if(i)u.readyState!==4&&u.abort();else{f=u.status,c=u.getAllResponseHeaders(),h={},p=u.responseXML,p&&p.documentElement&&(h.xml=p);try{h.text=u.responseText}catch(e){}try{l=u.statusText}catch(d){l=""}!f&&n.isLocal&&!n.crossDomain?f=h.text?200:404:f===1223&&(f=204)}}}catch(v){i||o(-1,v)}h&&o(f,l,h,c)},!n.async||u.readyState===4?r():(a=++on,sn&&(un||(un={},s(e).unload(sn)),un[a]=r),u.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var ln={},cn,hn,pn=/^(?:toggle|show|hide)$/,dn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,vn,mn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],gn;s.fn.extend({show:function(e,t,n){var r,i;if(e||e===0)return this.animate(wn("show",3),e,t,n);for(var o=0,u=this.length;o<u;o++)r=this[o],r.style&&(i=r.style.display,!s._data(r,"olddisplay")&&i==="none"&&(i=r.style.display=""),(i===""&&s.css(r,"display")==="none"||!s.contains(r.ownerDocument.documentElement,r))&&s._data(r,"olddisplay",En(r.nodeName)));for(o=0;o<u;o++){r=this[o];if(r.style){i=r.style.display;if(i===""||i==="none")r.style.display=s._data(r,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(wn("hide",3),e,t,n);var r,i,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(i=s.css(r,"display"),i!=="none"&&!s._data(r,"olddisplay")&&s._data(r,"olddisplay",i));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:s.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return s.isFunction(e)&&s.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:s(this).is(":hidden");s(this)[t?"show":"hide"]()}):this.animate(wn("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){function o(){i.queue===!1&&s._mark(this);var t=s.extend({},i),n=this.nodeType===1,r=n&&s(this).is(":hidden"),o,u,a,f,l,c,h,p,d,v,m;t.animatedProperties={};for(a in e){o=s.camelCase(a),a!==o&&(e[o]=e[a],delete e[a]);if((l=s.cssHooks[o])&&"expand"in l){c=l.expand(e[o]),delete e[o];for(a in c)a in e||(e[a]=c[a])}}for(o in e){u=e[o],s.isArray(u)?(t.animatedProperties[o]=u[1],u=e[o]=u[0]):t.animatedProperties[o]=t.specialEasing&&t.specialEasing[o]||t.easing||"swing";if(u==="hide"&&r||u==="show"&&!r)return t.complete.call(this);n&&(o==="height"||o==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],s.css(this,"display")==="inline"&&s.css(this,"float")==="none"&&(!s.support.inlineBlockNeedsLayout||En(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new s.fx(this,t,a),u=e[a],pn.test(u)?(m=s._data(this,"toggle"+a)||(u==="toggle"?r?"show":"hide":0),m?(s._data(this,"toggle"+a,m==="show"?"hide":"show"),f[m]()):f[u]()):(h=dn.exec(u),p=f.cur(),h?(d=parseFloat(h[2]),v=h[3]||(s.cssNumber[a]?"":"px"),v!=="px"&&(s.style(this,a,(d||1)+v),p=(d||1)/f.cur()*p,s.style(this,a,p+v)),h[1]&&(d=(h[1]==="-="?-1:1)*d+p),f.custom(p,d,v)):f.custom(p,u,""));return!0}var i=s.speed(t,n,r);return s.isEmptyObject(e)?this.each(i.complete,[!1]):(e=s.extend({},e),i.queue===!1?this.each(o):this.queue(i.queue,o))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function u(e,t,n){var i=t[n];s.removeData(e,n,!0),i.stop(r)}var t,n=!1,i=s.timers,o=s._data(this);r||s._unmark(!0,this);if(e==null)for(t in o)o[t]&&o[t].stop&&t.indexOf(".run")===t.length-4&&u(this,o,t);else o[t=e+".run"]&&o[t].stop&&u(this,o,t);for(t=i.length;t--;)i[t].elem===this&&(e==null||i[t].queue===e)&&(r?i[t](!0):i[t].saveState(),n=!0,i.splice(t,1));(!r||!n)&&s.dequeue(this,e)})}}),s.each({slideDown:wn("show",1),slideUp:wn("hide",1),slideToggle:wn("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){s.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),s.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?s.extend({},e):{complete:n||!n&&t||s.isFunction(e)&&e,duration:e,easing:n&&t||t&&!s.isFunction(t)&&t};r.duration=s.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in s.fx.speeds?s.fx.speeds[r.duration]:s.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){s.isFunction(r.old)&&r.old.call(this),r.queue?s.dequeue(this,r.queue):e!==!1&&s._unmark(this)},r},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),s.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(s.fx.step[this.prop]||s.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=s.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function u(e){return i.step(e)}var i=this,o=s.fx;this.startTime=gn||yn(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(s.cssNumber[this.prop]?"":"px"),u.queue=this.options.queue,u.elem=this.elem,u.saveState=function(){s._data(i.elem,"fxshow"+i.prop)===t&&(i.options.hide?s._data(i.elem,"fxshow"+i.prop,i.start):i.options.show&&s._data(i.elem,"fxshow"+i.prop,i.end))},u()&&s.timers.push(u)&&!vn&&(vn=setInterval(o.tick,o.interval))},show:function(){var e=s._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||s.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),s(this.elem).show()},hide:function(){this.options.orig[this.prop]=s._data(this.elem,"fxshow"+this.prop)||s.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=gn||yn(),o=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(o=!1);if(o){a.overflow!=null&&!s.support.shrinkWrapBlocks&&s.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&s(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)s.style(u,t,a.orig[t]),s.removeData(u,"fxshow"+t,!0),s.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=s.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},s.extend(s.fx,{tick:function(){var e,t=s.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||s.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){s.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),s.each(mn.concat.apply([],mn),function(e,t){t.indexOf("margin")&&(s.fx.step[t]=function(e){s.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),s.expr&&s.expr.filters&&
(s.expr.filters.animated=function(e){return s.grep(s.timers,function(t){return e===t.elem}).length});var Sn,xn=/^t(?:able|d|h)$/i,Tn=/^(?:body|html)$/i;"getBoundingClientRect"in n.documentElement?Sn=function(e,t,n,r){try{r=e.getBoundingClientRect()}catch(i){}if(!r||!s.contains(n,e))return r?{top:r.top,left:r.left}:{top:0,left:0};var o=t.body,u=Nn(t),a=n.clientTop||o.clientTop||0,f=n.clientLeft||o.clientLeft||0,l=u.pageYOffset||s.support.boxModel&&n.scrollTop||o.scrollTop,c=u.pageXOffset||s.support.boxModel&&n.scrollLeft||o.scrollLeft,h=r.top+l-a,p=r.left+c-f;return{top:h,left:p}}:Sn=function(e,t,n){var r,i=e.offsetParent,o=e,u=t.body,a=t.defaultView,f=a?a.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,c=e.offsetLeft;while((e=e.parentNode)&&e!==u&&e!==n){if(s.support.fixedPosition&&f.position==="fixed")break;r=a?a.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,c-=e.scrollLeft,e===i&&(l+=e.offsetTop,c+=e.offsetLeft,s.support.doesNotAddBorder&&(!s.support.doesAddBorderForTableAndCells||!xn.test(e.nodeName))&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),o=i,i=e.offsetParent),s.support.subtractsBorderForOverflowNotVisible&&r.overflow!=="visible"&&(l+=parseFloat(r.borderTopWidth)||0,c+=parseFloat(r.borderLeftWidth)||0),f=r}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return s.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(n.scrollTop,u.scrollTop),c+=Math.max(n.scrollLeft,u.scrollLeft)),{top:l,left:c}},s.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){s.offset.setOffset(this,e,t)});var n=this[0],r=n&&n.ownerDocument;return r?n===r.body?s.offset.bodyOffset(n):Sn(n,r,r.documentElement):null},s.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return s.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(s.css(e,"marginTop"))||0,n+=parseFloat(s.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=s.css(e,"position");r==="static"&&(e.style.position="relative");var i=s(e),o=i.offset(),u=s.css(e,"top"),a=s.css(e,"left"),f=(r==="absolute"||r==="fixed")&&s.inArray("auto",[u,a])>-1,l={},c={},h,p;f?(c=i.position(),h=c.top,p=c.left):(h=parseFloat(u)||0,p=parseFloat(a)||0),s.isFunction(t)&&(t=t.call(e,n,o)),t.top!=null&&(l.top=t.top-o.top+h),t.left!=null&&(l.left=t.left-o.left+p),"using"in t?t.using.call(e,l):i.css(l)}},s.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Tn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(s.css(e,"marginTop"))||0,n.left-=parseFloat(s.css(e,"marginLeft"))||0,r.top+=parseFloat(s.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(s.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||n.body;while(e&&!Tn.test(e.nodeName)&&s.css(e,"position")==="static")e=e.offsetParent;return e})}}),s.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);s.fn[e]=function(i){return s.access(this,function(e,i,o){var u=Nn(e);if(o===t)return u?n in u?u[n]:s.support.boxModel&&u.document.documentElement[i]||u.document.body[i]:e[i];u?u.scrollTo(r?s(u).scrollLeft():o,r?o:s(u).scrollTop()):e[i]=o},e,i,arguments.length,null)}}),s.each({Height:"height",Width:"width"},function(e,n){var r="client"+e,i="scroll"+e,o="offset"+e;s.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(s.css(e,n,"padding")):this[n]():null},s.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(s.css(t,n,e?"margin":"border")):this[n]():null},s.fn[n]=function(e){return s.access(this,function(e,n,u){var a,f,l,c;if(s.isWindow(e))return a=e.document,f=a.documentElement[r],s.support.boxModel&&f||a.body&&a.body[r]||f;if(e.nodeType===9)return a=e.documentElement,a[r]>=a[i]?a[r]:Math.max(e.body[i],a[i],e.body[o],a[o]);if(u===t)return l=s.css(e,n),c=parseFloat(l),s.isNumeric(c)?c:l;s(e).css(n,u)},n,e,arguments.length,null)}}),e.jQuery=e.$=s,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return s})})(window),function(e,t){var n;e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(r){var i,s,o,u,a,f;if(n.fire(r,"ajax:before")){u=r.data("cross-domain")||null,a=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(r.is("form")){i=r.attr("method"),s=r.attr("action"),o=r.serializeArray();var l=r.data("ujs:submit-button");l&&(o.push(l),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=n.href(r),o=r.data("params")||null);return f={type:i||"GET",data:o,dataType:a,crossDomain:u,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])}},s&&(f.url=s),n.ajax(f)}return!1},handleMethod:function(r){var i=n.href(r),s=r.data("method"),o=r.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),r=!1,i;return t?(n.fire(e,"confirm")&&(r=n.confirm(t),i=n.fire(e,"confirm:complete",[r])),r&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o=n||"input,textarea";return t.find(o).each(function(){s=e(this);if(r?s.val():!s.val())i=i.add(s)}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),e(document).delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),s=i.data("method"),o=i.data("params");if(!n.allowAction(i))return n.stopEverything(r);i.is(n.linkDisableSelector)&&n.disableElement(i);if(i.data("remote")!==t)return(r.metaKey||r.ctrlKey)&&(!s||s==="GET")&&!o?!0:(n.handleRemote(i)===!1&&n.enableElement(i),!1);if(i.data("method"))return n.handleMethod(i),!1}),e(document).delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),e(document).delegate(n.formSubmitSelector,"submit.rails",function(r){var i=e(this),s=i.data("remote")!==t,o=n.blankInputs(i,n.requiredInputSelector),u=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(r);if(o&&i.attr("novalidate")==t&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r);if(s)return u?n.fire(i,"ajax:aborted:file",[u]):!e.support.submitBubbles&&e().jquery<"1.7"&&n.callFormSubmitBindings(i,r)===!1?n.stopEverything(r):(n.handleRemote(i),!1);setTimeout(function(){n.disableFormElements(i)},13)}),e(document).delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",s)}),e(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),e(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))})}(jQuery),function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var r=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.18"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this
.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.18"}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');/sw|se|ne|nw/.test(s)&&u.css({zIndex:++n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var c=l.apply(this,[t,a,f]),h=e.browser.msie&&e.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)c=this._updateRatio(c,t);return c=this._respectSize(c,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.18"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/i.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*i.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.18"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items
[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=this,o=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==s)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==s&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var u=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(u=!0)});if(!u)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&i.push([e.isFunction(f.options.items)?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&(i.push([e.isFunction(f.options.items)?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f))}}for(var o=i.length-1;o>=0;o--){var l=i[o][1],c=i[o][0];for(var a=0,h=c.length;a<h;a++){var p=e(c[a]);p.data(this.widgetName+"-item",l),n.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.ui.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.items[a][this.containers[r].floating?"left":"top"];Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.18"})}(jQuery),jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=e.curCSS(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}function u(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},n,r;if(e&&e.length&&e[0]&&e[e[0]]){var i=e.length;while(i--)n=e[i],typeof e[n]=="string"&&(r=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),t[r]=e[n])}else for(n in e)typeof e[n]=="string"&&(t[n]=e[n]);return t}function a(t){var n,r;for(n in t)r=t[n],(r==null||e.isFunction(r)||n in o||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(r)))&&delete t[n];return t}function f(e,t){var n={_:0},r;for(r in t)e[r]!=t[r]&&(n[r]=t[r]);return n}function l(t,n,r,i){typeof t=="object"&&(i=n,r=null,n=t,t=n.effect),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n=n||{},r=r||n.duration,r=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,i=i||n.complete,[t,n,r,i]}function c(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects[t]?!0:!1}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=n(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,r,i){return e.isFunction(r)&&(i=r,r=null),this.queue(function(){var o=e(this),l=o.attr("style")||" ",c=a(u.call(this)),h,p=o.attr("class");e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),h=a(u.call(this)),o.attr("class",p),o.animate(f(c,h),{queue:!1,duration:n,easing:r,complete:function(){e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),typeof o.attr("style")=="object"?(o.attr("style").cssText="",o.attr("style").cssText=l):o.attr("style",l),i&&i.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.apply(this,[r?{add:n}:{remove:n},i,s,o]):this._toggleClass(n,r):e.effects.animateClass.apply(this,[{toggle:n},r,i,s])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}}),e.extend(e.effects,{version:"1.8.18",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;return t.wrap(r),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(n).show()},removeWrapper:function(t){var n,r=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n):t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(i[n]=unit[0]*r+unit[1])}),i}}),e.fn.extend({effect:function(t,n,r,i){var s=l.apply(this,arguments),o={options:s[1],duration:s[2],callback:s[3]},u=o.options.mode,a=e.effects[t];return e.fx.off||!a?u?this[u](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):a.call(this,o)},_show:e.fn.show,show:function(e){if(c(e))return this._show.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(c(e))return this._hide.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(c(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=l.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158
),i*(n/=s)*n*((o+1)*n-o)+r},easeOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*((n=n/s-1)*n*((o+1)*n+o)+1)+r},easeInOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),(n/=s/2)<1?i/2*n*n*(((o*=1.525)+1)*n-o)+r:i/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+r},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e,t){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=s=="vertical"?"height":"width",f=s=="vertical"?u.height():u.width();i=="show"&&u.css(a,0);var l={};l[a]=i=="show"?f:0,u.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",u=t.options.distance||20,a=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",u=t.options.distance||(l=="top"?n.outerHeight({margin:!0})/3:n.outerWidth({margin:!0})/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-u:u),i=="hide"&&(u/=a*2),i!="hide"&&a--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+u,n.animate(h,f/2,t.options.easing),u/=2,a--}for(var p=0;p<a;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),u=i=="hide"?u*2:u/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+u,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=n[0].tagName=="IMG"?u:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?a.height():a.width();i=="show"&&(a.css(f.size,0),a.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,a.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0})/2:n.outerWidth({margin:!0})/2);i=="show"&&n.css("opacity",0).css(u,a=="pos"?-f:f);var l={opacity:i=="show"?1:0};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var u=i.outerWidth(!0),a=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(u/r),top:-f*(a/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:u/r,height:a/n,left:s.left+l*(u/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(u/r):0),top:s.top+f*(a/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(a/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(u/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(u/r)),top:s.top+f*(a/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(a/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e,t){e.effects.fade=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,u=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=u,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(u?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,a,t.options.easing).animate(v,a,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s={backgroundColor:n.css("backgroundColor")};i=="hide"&&(s.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show");times=(t.options.times||5)*2-1,duration=t.duration?t.duration/2:e.fx.speeds._default/2,isVisible=n.is(":visible"),animateTo=0,isVisible||(n.css("opacity",0).show(),animateTo=1),(r=="hide"&&isVisible||r=="show"&&!isVisible)&&times--;for(var i=0;i<times;i++)n.animate({opacity:animateTo},duration,t.options.easing),animateTo=(animateTo+1)%2;n.animate({opacity:animateTo},duration,t.options.easing,function(){animateTo==0&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),function(e,t){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide"),i=parseInt(t.options.percent,10)||150,s=i/100,u={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:r,percent:r=="hide"?i:100,from:r=="hide"?u:{height:u.height*s,width:u.width*s}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),u=t.options.direction||"both",a=t.options.origin;i!="effect"&&(r.origin=a||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:u!="horizontal"?s/100:1,x:u!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],s=["width","height","overflow"],u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(a),n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),s=r.concat(a).concat(f),n.find("*[width]").each(function(){child=e(this),c&&e.effects.save(child,s);var n={height:child.height(),width:child.width()};child.from={height:n.height*m.from.y,width:n.width*m.from.x},child.to={height:n.height*m.to.y,width:n.width*m.to.x},m.from.y!=m.to.y&&(child.from=e.effects.setTransition(child,a,m.from.y,child.from),child.to=e.effects.setTransition(child,a,m.to.y,child.to)),m.from.x!=m.to.x&&(child.from=e.effects.setTransition(child,f,m.from.x,child.from),child.to=e.effects.setTransition(child,f,m.to.x,child.to)),child.css(child.from),child.animate(child.to,t.duration,t.options.easing,function(){c&&e.effects.restore(child,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){n.to.opacity===0&&n.css("opacity",n.from.opacity),l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",u=t.options.distance||20,a=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+u,p[l]=(c=="pos"?"+=":"-=")+u*2,d[l]=(c=="pos"?"-=":"+=")+u*2,n.animate(h,f,t.options.easing);for(var v=1;v<a;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0}):n.outerWidth({margin:!0}));i=="show"&&n.css(u,a=="pos"?isNaN(f)?"-"+f:-f:f);var l={};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:u.top,left:u.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var r=t.element.find("a").filter(n.navigationFilter).eq(0);if(r.length){var i=r.closest(".ui-accordion-header");i.length?t.active=i:t.active=r.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t=="active"&&this.activate(n),t=="icons"&&(this._destroyIcons(),n&&this._createIcons()),t=="disabled"&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return s?(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),!1):!0},resize:function(){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).height("").height())}).height(n));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return;if(!t.target){if(!r.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);this._toggle(o,i,s);return}var u=e(t.currentTarget||n),a=u[0]===this.active[0];r.active=r.collapsible&&a?!1:this.headers.index(u);if(this.running||!r.collapsible&&a)return;var f=this.active,o=u.next(),i=this.active.next(),s={options:r,newHeader:a&&r.collapsible?e([]):u,oldHeader:this.active,newContent:a&&r.collapsible?e([]):o,oldContent:i},l=this.headers.index(this.active[0])>this.headers.index(u[0]);this.active=a?e([]):u,this._toggle(o,i,s,a,l),f.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),a||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));return},_toggle:function(t,n,r,i,s){var o=this,u=o.options;o.toShow=t,o.toHide=n,o.data=r;var a=function(){if(!o)return;return o._completed.apply(o,arguments)};o._trigger("changestart",null,o.data),o.running=n.size()===0?t.size():n.size();if(u.animated){var f={};u.collapsible&&i?f={toShow:e([]),toHide:n,complete:a,down:s,autoHeight:u.autoHeight||u.fillSpace}:f={toShow:t,toHide:n,complete:a,down:s,autoHeight:u.autoHeight||u.fillSpace},u.proxied||(u.proxied=u.animated),u.proxiedDuration||(u.proxiedDuration=u.duration),u.animated=e.isFunction(u.proxied)?u.proxied(f):u.proxied,u.duration=e.isFunction(u.proxiedDuration)?u.proxiedDuration(f):u.proxiedDuration;var l=e.ui.accordion.animations,c=u.duration,h=u.animated;h&&!l[h]&&!e.easing[h]&&(h="slide"),l[h]||(l[h]=function(e){this.slide(e,{easing:h,duration:c||700})}),l[h](f)}else u.collapsible&&i?t.toggle():(n.hide(),t.show()),a(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.18",animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);return}var r=t.toShow.css("overflow"),i=0,s={},o={},u=["height","paddingTop","paddingBottom"],a,f=t.toShow;a=f[0].style.width,f.width(f.parent().width()-parseFloat(f.css("paddingLeft"))-parseFloat(f.css("paddingRight"))-(parseFloat(f.css("borderLeftWidth"))||0)-(parseFloat(f.css("borderRightWidth"))||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:a,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._move("previous",n),n.preventDefault();break;case i.DOWN:t._move("next",n),n.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),t.beforeunloadHandler=function(){t.element.removeAttr("autocomplete")},e(window).bind("beforeunload",t.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,i;e.isArray(this.options.source)?(r=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(i=this.options.source,this.source=function(r,s){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:r,dataType:"json",context:{autocompleteRequest:++n},success:function(e,t){this.autocompleteRequest===n&&s(e)},error:function(){this.autocompleteRequest===n&&s([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio"
,c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click.button",function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(h)}).bind("blur.button",function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change.button",function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup.button",function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,e(document).one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(u.disabled)return!1;(t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments);if(t==="disabled"){n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){t==="disabled"&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var n=$(e.target).closest(t);if(!n.length)return;n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(n){var r=$(n.target).closest(t);if($.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||!r.length)return;r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),r.addClass("ui-state-hover"),r.hasClass("ui-datepicker-prev")&&r.addClass("ui-datepicker-prev-hover"),r.hasClass("ui-datepicker-next")&&r.addClass("ui-datepicker-next-hover")})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}function isArray(e){return e&&($.browser.safari&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.18"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(e){$.datepicker.log(e)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i}),i&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var n=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e));var r=e.dpDiv.find("iframe.ui-datepicker-cover");!r.length||r.css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),s=i[1],o=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(i[0]!=1||i[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var u=e.yearshtml;setTimeout(function(){u===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),u=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+$(document).scrollLeft(),a=document.documentElement.clientHeight+$(document).scrollTop();return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=this,s=function(){$.datepicker._tidyDialog(t),i._curInst=null};$.effects&&$.effects[n]?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,s):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,s),n||s(),this._datepickerShowing=!1;var o=this._get(t,"onClose");o&&o.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length)throw"Extra/unparsed characters found in date: "+t.substring(g);a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var w=this._getDaysInMonth(a,f-1);if(l<=w)break;f++,l-=w}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);while(a){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=parseInt(a[1],10)*7;break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"
),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', -"+a+", 'M');\""+' title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._adjustDate('#"+e.id+"', +"+a+", 'M');\""+' title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+dpuuid+'.datepicker._hideDatepicker();">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+dpuuid+".datepicker._gotoToday('#"+e.id+"');\""+">"+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' onclick="DP_jQuery_'+dpuuid+".datepicker._selectDay('#"+e.id+"',"+G.getMonth()+","+G.getFullYear()+', this);return false;"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'M');\" "+">";for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+dpuuid+".datepicker._selectMonthYear('#"+e.id+"', this, 'Y');\" "+">";for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.18",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},s=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,r=t.options,i=r.title||"&#160;",s=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),a=(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),f=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){f.addClass("ui-state-hover")},function(){f.removeClass("ui-state-hover")}).focus(function(){f.addClass("ui-state-focus")}).blur(function(){f.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a),l=(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(f),c=e("<span></span>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(a);e.isFunction(r.beforeclose)&&!e.isFunction(r.beforeClose)&&(r.beforeClose=r.beforeclose),a.find("*").add(a).disableSelection(),r.draggable&&e.fn.draggable&&t._makeDraggable(),r.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!1===n._trigger("beforeClose",t))return;return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):(n.uiDialog.hide(),n._trigger("close",t)),e.ui.dialog.overlay.resize(),n.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),n},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?r._trigger("focus",n):(i.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=i.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",n),r)},open:function(){if(this._isOpen)return;var t=this,n=t.options,r=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),r.show(n.show),t.moveToTop(!0),n.modal&&r.bind("keydown.ui-dialog",function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),e(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);n.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e('<button type="button"></button>').click(function(){r.click.apply(n.element[0],arguments)}).appendTo(o);e.each(r,function(e,t){if(e==="click")return;e in s?i[e](t):i.attr(e,t)}),e.fn.button&&i.button()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){function s(e){return{position:e.position,offset:e.offset}}var t=this,n=t.options,r=e(document),i;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,o){i=n.height==="auto"?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),t._trigger("dragStart",r,s(o))},drag:function(e,n){t._trigger("drag",e,s(n))},stop:function(o,u){n.position=[u.position.left-r.scrollLeft(),u.position.top-r.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),t._trigger("dragStop",o,s(u)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=r.options,s=r.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:r.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:r._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i=this,s=i.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(r);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(n+r);break;case"disabled":r?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!r&&s.draggable("destroy"),!o&&r&&i._makeDraggable();break;case"position":i._position(r);break;case"resizable":var u=s.is(":data(resizable)");u&&!r&&s.resizable("destroy"),u&&typeof r=="string"&&s.resizable("option","handles",r),!u&&r!==!1&&i._makeResizable(r);break;case"title":e(".ui-dialog-title",i.uiDialogTitlebar).html(""+(r||"&#160;"))}e.Widget.prototype._setOption.apply(i,arguments)},_size:function(){var t=this.options,n,r,i=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),n=this.uiDialog.css({height:"auto",width:t.width}).height(),r=Math.max(0,t.minHeight-n);if(t.height==="auto")if(e.support.minHeight)this.element.css({minHeight:r,height:"auto"});else{this.uiDialog.show();var s=this.element.css("height","auto").height();i||this.uiDialog.hide(),this.element.height(Math.max(s,r))}else this.element.height(Math.max(t.height-n,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);n!=-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s={},o=e.fn.position,u=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var u=e(t.of),a=u[0],f=(t.collision||"flip").split(" "),l=t.offset?t.offset.split(" "):[0,0],c,h,p;return a.nodeType===9?(c=u.width(),h=u.height(),p={top:0,left:0}):a.setTimeout?(c=u.width(),h=u.height(),p={top:u.scrollTop(),left:u.scrollLeft()}):a.preventDefault?(t.at="left top",c=h=0,p={top:t.of.pageY,left:t.of.pageX}):(c=u.outerWidth(),h=u.outerHeight(),p=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),f.length===1&&(f[1]=f[0]),l[0]=parseInt(l[0],10)||0,l.length===1&&(l[1]=l[0]),l[1]=parseInt(l[1],10)||0,t.at[0]==="right"?p.left+=c:t.at[0]===i&&(p.left+=c/2),t.at[1]==="bottom"?p.top+=h:t.at[1]===i&&(p.top+=h/2),p.left+=l[0],p.top+=l[1],this.each(function(){var n=e(this),r=n.outerWidth(),o=n.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,a=parseInt(e.curCSS(this,"marginTop",!0))||0,d=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),v=o+a+(parseInt(e.curCSS(this,"marginBottom",!0))||0),m=e.extend({},p),g;t.my[0]==="right"?m.left-=r:t.my[0]===i&&(m.left-=r/2),t.my[1]==="bottom"?m.top-=o:t.my[1]===i&&(m.top-=o/2),s.fractions||(m.left=Math.round(m.left),m.top=Math.round(m.top)),g={left:m.left-u,top:m.top-a},e.each(["left","top"],function(n,i){e.ui.position[f[n]]&&e.ui.position[f[n]][i](m,{targetWidth:c,targetHeight:h,elemWidth:r,elemHeight:o,collisionPosition:g,collisionWidth:d,collisionHeight:v,offset:l,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(m,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,a=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+a:s>0?o+u+a:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,a=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+a:s>0?o+u+a:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):u.call(this)}),function(){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),r,i,o,u,a;r=document.createElement(t?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},t&&e.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in o)r.style[f]=o[f];r.appendChild(n),i=t||document.documentElement,i.insertBefore(r,i.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",u=e(n).offset(function(e,t){return t}).offset(),r.innerHTML="",i.removeChild(r),a=u.top+u.left+(t?2e3:0),s.fractions=a>21&&a<22}()}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){t==="value"&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.18"})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var a=i.length;a<o;a+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=e(this).data("index.ui-slider-handle"),s,o,u,a;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r.preventDefault();if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),s=t._start(r,i);if(s===!1)return}}a=t.options.step,t.options.values&&t.options.values.length?o=u=t.values(i):o=u=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:u=t._valueMin();break;case e.ui.keyCode.END:u=t._valueMax();break;case e.ui.keyCode.PAGE_UP:u=t._trimAlignValue(o+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:u=t._trimAlignValue(o-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===t._valueMax())return;u=t._trimAlignValue(o+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===t._valueMin())return;u=t._trimAlignValue(o-a)}t._slide(r,i,u)}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,a,f,l,c;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),a=t)}),n.range===!0&&this.values(1)===n.min&&(a+=1,o=e(this.handles[a])),f=this._start(t,a),f===!1?!1:(this._mouseSliding=!0,u._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,
s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,a,f,l;this.options.values&&this.options.values.length?this.handles.each(function(t,a){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(a=this.value(),f=this._valueMin(),l=this._valueMax(),s=l!==f?(a-f)/(l-f)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.18"})}(jQuery),function(e,n){function s(){return++r}function o(){return++i}var r=0,i=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+s()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+o());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(t){function h(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var r=this,i=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var o=e(n).attr("href"),u=o.split("#")[0],a;u&&(u===location.toString().split("#")[0]||(a=e("base")[0])&&u===a.href)&&(o=n.hash,n.href=o);if(s.test(o))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(o)));else if(o&&o!=="#"){e.data(n,"href.tabs",o),e.data(n,"load.tabs",o.replace(/#.*$/,""));var f=r._tabId(n);n.href="#"+f;var l=r.element.find("#"+f);l.length||(l=e(i.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),l.data("destroy.tabs",!0)),r.panels=r.panels.add(l)}else i.disabled.push(t)}),t?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),i.selected===n?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return i.selected=e,!1}),typeof i.selected!="number"&&i.cookie&&(i.selected=parseInt(r._cookie(),10)),typeof i.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),i.selected=i.selected||(this.lis.length?0:-1)):i.selected===null&&(i.selected=-1),i.selected=i.selected>=0&&this.anchors[i.selected]||i.selected<0?i.selected:0,i.disabled=e.unique(i.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return r.lis.index(e)}))).sort(),e.inArray(i.selected,i.disabled)!=-1&&i.disabled.splice(e.inArray(i.selected,i.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),i.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(i.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[i.selected],r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash))[0]))}),this.load(i.selected)),e(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[i.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),i.cookie&&this._cookie(i.selected,i.cookie);for(var o=0,u;u=this.lis[o];o++)e(u)[e.inArray(o,i.disabled)!=-1&&!e(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");i.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(i.event!=="mouseover"){var a=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},f=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){a("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){f("hover",e(this))}),this.anchors.bind("focus.tabs",function(){a("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){f("focus",e(this).closest("li"))})}var l,c;i.fx&&(e.isArray(i.fx)?(l=i.fx[0],c=i.fx[1]):l=c=i.fx);var p=c?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(c,c.duration||"normal",function(){h(n,c),r._trigger("show",null,r._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,n[0]))},d=l?function(e,t){t.animate(l,l.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),h(t,l),r.element.dequeue("tabs")})}:function(e,t,n){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(i.event+".tabs",function(){var t=this,n=e(t).closest("li"),s=r.panels.filter(":not(.ui-tabs-hide)"),o=r.element.find(r._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!i.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,o[0]))===!1)return this.blur(),!1;i.selected=r.anchors.index(this),r.abort();if(i.collapsible){if(n.hasClass("ui-tabs-selected"))return i.selected=-1,i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){d(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),this.blur(),!1}i.cookie&&r._cookie(i.selected,i.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&r.element.queue("tabs",function(){d(t,s)}),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$="+e+"]"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(t,r,i){i===n&&(i=this.anchors.length);var s=this,o=this.options,u=e(o.tabTemplate.replace(/#\{href\}/g,t).replace(/#\{label\}/g,r)),a=t.indexOf("#")?this._tabId(e("a",u)[0]):t.replace("#","");u.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=s.element.find("#"+a);return f.length||(f=e(o.panelTemplate).attr("id",a).data("destroy.tabs",!0)),f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(u.appendTo(this.list),f.appendTo(this.list[0].parentNode)):(u.insertBefore(this.lis[i]),f.insertBefore(this.panels[i])),o.disabled=e.map(o.disabled,function(e,t){return e>=i?++e:e}),this._tabify(),this.anchors.length==1&&(o.selected=0,u.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[0],s.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();return r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},enable:function(t){t=this._getIndex(t);var n=this.options;if(e.inArray(t,n.disabled)==-1)return;return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this,n=this.options;return e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){e=this._getIndex(e);if(e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}return this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){n.element.find(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(e,s,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.error(e,s,t,i)}catch(o){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.18"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,n){var r=this,i=this.options,s=r._rotate||(r._rotate=function(t){clearTimeout(r.rotation),r.rotation=setTimeout(function(){var e=i.selected;r.select(++e<r.anchors.length?e:0)},e),t&&t.stopPropagation()}),o=r._unrotate||(r._unrotate=n?function(e){t=i.selected,s()}:function(e){e.clientX&&r.rotate(null)});return e?(this.element.bind("tabsshow",s),this.anchors.bind(i.event+".tabs",o),s()):(clearTimeout(r.rotation),this.element.unbind("tabsshow",s),this.anchors.unbind(i.event+".tabs",o),delete this._rotate,delete this._unrotate),this}})}(jQuery),function(){var e={};window.Handlebars=e,e.VERSION="1.0.beta.6",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(e,r){var i=r.inverse||function(){},s=r.fn,o="",u=t.call(e);u===n&&(e=e.call(this));if(e===!0)return s(this);if(e===!1||e==null)return i(this);if(u==="[object Array]"){if(e.length>0)for(var a=0,f=e.length;a<f;a++)o+=s(e[a]);else o=i(this);return o}return s(e)}),e.registerHelper("each",function(e,t){var n=t.fn,r=t.inverse,i="";if(e&&e.length>0)for(var s=0,o=e.length;s<o;s++)i+=n(e[s]);else i=r(this);return i}),e.registerHelper("if",function(r,i){var s=t.call(r);return s===n&&(r=r.call(this)),!r||e.Utils.isEmpty(r)?i.inverse(this):i.fn(this)}),e.registerHelper("unless",function(t,n){var r=n.fn,i=n.inverse;return n.fn=i,n.inverse=r,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)}),e.registerHelper("log",function(t){e.log(t)});var r=function(){var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(t,n,r,i,s,o,u){var a=o.length-1;switch(s){case 1:return o[a-1];case 2:this.$=new i.ProgramNode(o[a-2],o[a]);break;case 3:this.$=new i.ProgramNode(o[a]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[o[a]];break;case 6:o[a-1].push(o[a]),this.$=o[a-1];break;case 7:this.$=new i.InverseNode(o[a-2],o[a-1],o[a]);break;case 8:this.$=new i.BlockNode(o[a-2],o[a-1],o[a]);break;case 9:this.$=o[a];break;case 10:this.$=o[a];break;case 11:this.$=new i.ContentNode(o[a]);break;case 12:this.$=new i.CommentNode(o[a]);break;case 13:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 14:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 15:this.$=o[a-1];break;case 16:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1]);break;case 17:this.$=new i.MustacheNode(o[a-1][0],o[a-1][1],!0);break;case 18:this.$=new i.PartialNode(o[a-1]);break;case 19:this.$=new i.PartialNode(o[a-2],o[a-1]);break;case 20:break;case 21:this.$=[[o[a-2]].concat(o[a-1]),o[a]];break;case 22:this.$=[[o[a-1]].concat(o[a]),null];break;case 23:this.$=[[o[a-1]],o[a]];break;case 24:this.$=[[o[a]],null];break;case 25:o[a-1].push(o[a]),this.$=o[a-1];break;case 26:this.$=[o[a]];break;case 27:this.$=o[a];break;case 28:this.$=new i.StringNode(o[a]);break;case 29:this.$=new i.IntegerNode(o[a]);break;case 30:this.$=new i.BooleanNode(o[a]);break;case 31:this.$=new i.HashNode(o[a]);break;case 32:o[a-1].push(o[a]),this.$=o[a-1];break;case 33:this.$=[o[a]];break;case 34:this.$=[o[a-2],o[a]];break;case 35:this.$=[o[a-2],new i.StringNode(o[a])];break;case 36:this.$=[o[a-2],new i.IntegerNode(o[a])];break;case 37:this.$=[o[a-2],new i.BooleanNode(o[a])];break;case 38:this.$=new i.IdNode(o[a]);break;case 39:o[a-2].push(o[a]),this.$=o[a-2];break;case 40:this.$=[o[a]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(t,n){throw new Error(t)},parse:function(t){function d(e){r.length=r.length-2*e,i.length=i.length-e,s.length=s.length-e}function v(){var e;return e=n.lexer.lex()||1,typeof e!="number"&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,u="",a=0,f=0,l=0,c=2,h=1;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var p=this.lexer.yylloc;s.push(p),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var m,g,y,b,w,E,S={},x,T,N,C;for(;;){y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(m==null&&(m=v()),b=o[y]&&o[y][m]);if(typeof b=="undefined"||!b.length||!b[0])if(!l){C=[];for(x in o[y])this.terminals_[x]&&x>2&&C.push("'"+this.terminals_[x]+"'");var k="";this.lexer.showPosition?k="Parse error on line "+(a+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+C.join(", ")+", got '"+this.terminals_[m]+"'":k="Parse error on line "+(a+1)+": Unexpected "+(m==1?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:p,expected:C})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+m);switch(b[0]){case 1:r.push(m),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(b[1]),m=null,g?(m=g,g=null):(f=this.lexer.yyleng,u=this.lexer.yytext,a=this.lexer.yylineno,p=this.lexer.yylloc,l>0&&l--);break;case 2:T=this.productions_[b[1]][1],S.$=i[i.length-T],S._$={first_line:s[s.length-(T||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(T||1)].first_column,last_column:s[s.length-1].last_column},E=this.performAction.call(S,u,f,a,this.yy,b[1],i,s);if(typeof E!="undefined")return E;T&&(r=r.slice(0,-1*T*2),i=i.slice(0,-1*T),s=s.slice(0,-1*T)),r.push(this.productions_[b[1]][0]),i.push(S.$),s.push(S._$),N=o[r[r.length-2]][r[r.length-1]],r.push(N);break;case 3:return!0}}return!0}},t=function(){var e={EOF:1,parseError:function(t,n){if(!this.yy.parseError)throw new Error(t);this.yy.parseError(t,n)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.match+=e,this.matched+=e;var t=e.match(/\n/);return t&&this.yylineno++,this._input=this._input.slice(1),e},unput:function(e){return this._input=e+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=(new Array(e.length+1)).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r;this._more||(this.yytext="",this.match="");var i=this._currentRules();for(var s=0;s<i.length;s++){t=this._input.match(this.rules[i[s]]);if(t){r=t[0].match(/\n.*/g),r&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-1:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,i[s],this.conditionStack[this.conditionStack.length-1]);if(e)return e;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return typeof t!="undefined"?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return e.performAction=function(t,n,r,i){var s=i;switch(r){case 0:n.yytext.slice(-1)!=="\\"&&this.begin("mu"),n.yytext.slice(-1)==="\\"&&(n.yytext=n.yytext.substr(0,n.yyleng-1),this.begin("emu"));if(n.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return n.yytext=n.yytext.substr(3,n.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return n.yytext=n.yytext.substr(1,n.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return n.yytext=n.yytext.substr(1,n.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},e.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},e}();return e.lexer=t,e}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=r,exports.parse=function(){return r.parse.apply(r,arguments)},exports.main=function(t){if(!t[1])throw new Error("Usage: "+t[0]+" FILE");if(typeof process!="undefined")var n=require("fs").readFileSync(require("path").join(process.cwd(),t[1]),"utf8");else var r=require("file").path(require("file").cwd()),n=r.join(t[1]).read({charset:"utf-8"});return exports.parser.parse(n)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),e.Parser=r,e.parse=function(t){return e.Parser.yy=e.AST,e.Parser.parse(t)},e.print=function(t){return(new e.PrintVisitor).accept(t)},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){}},e.log=function(t,n){e.logger.log(t,n)},function(){e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.id=e[0],this.params=e.slice(1),this.hash=t,this.escaped=!n},e.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var t=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};e.AST.BlockNode=function(e,n,r){t(e.id,r),this.type="block",this.mustache=e,this.program=n},e.AST.InverseNode=function(e,n,r){t(e.id,r),this.type="inverse",this.mustache=e,this.program=n},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");var t=[],n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r];s===".."?n++:s==="."||s==="this"?this.isScoped=!0:t.push(s)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=t.length===1&&n===0},e.AST.StringNode=function(e){this.type="STRING",this.string=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},e.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),e.Exception=function(e){var t=Error.prototype.constructor.apply(this,arguments);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.message=t.message},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():t==null||t===!1?"":r.test(t)?t.replace(n,i):t},isEmpty:function(e){return typeof e=="undefined"?!0:e===null?!0:e===!1?!0:Object.prototype.toString.call(e)==="[object Array]"&&e.length===0?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},t.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},t.DISASSEMBLE_MAP={};for(var r in t.OPCODE_MAP){var i=t.OPCODE_MAP[r];t.DISASSEMBLE_MAP[i]=r}t.multiParamSize=function(e){return t.MULTI_PARAM_OPCODES[t.DISASSEMBLE_MAP[e]]},t.prototype={compiler:t,disassemble:function(){var e=this.opcodes,n,r,i=[],s,o,u;for(var a=0,f=e.length;a<f;a++){n=e[a];if(n==="DECLARE")o=e[++a],u=e[++a],i.push("DECLARE "+o+" = "+u);else{s=t.DISASSEMBLE_MAP[n];var l=t.multiParamSize(n),c=[];for(var h=0;h<l;h++)r=e[++a],typeof r=="string"&&(r='"'+r.replace("\n","\\n")+'"'),c.push(r);s=s+" "+c.join(" "),i.push(s)}}return i.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t=e.statements,n;this.opcodes=[];for(var r=0,i=t.length;r<i;r++)n=t[r],this[n.type](n);return this.isSimple=i===1,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),n=this.guid++;this.usePartial=this.usePartial||t.usePartial,this.children[n]=t;for(var r=0,i=t.depths.list.length;r<i;r++){depth=t.depths.list[r];if(depth<2)continue;this.addDepth(depth-1)}return n},block:function(e){var t=e.
mustache,n,r,i,s,o=this.setupStackForMustache(t),u=this.compileProgram(e.program);e.program.inverse&&(s=this.compileProgram(e.program.inverse),this.declare("inverse",s)),this.opcode("invokeProgram",u,o.length,!!t.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(e){var t=this.setupStackForMustache(e.mustache),n=this.compileProgram(e.program);this.declare("inverse",n),this.opcode("invokeProgram",null,t.length,!!e.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(e){var t=e.pairs,n,r;this.opcode("push","{}");for(var i=0,s=t.length;i<s;i++)n=t[i],r=n[1],this.accept(r),this.opcode("assignToHash",n[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.setupStackForMustache(e);this.opcode("invokeMustache",t.length,e.id.original,!!e.hash),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("lookupWithHelpers",e.parts[0]||null,e.isScoped||!1);for(var t=1,n=e.parts.length;t<n;t++)this.opcode("lookup",e.parts[t])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("push",e.integer)},BOOLEAN:function(e){this.opcode("push",e.bool)},comment:function(){},pushParams:function(e){var t=e.length,n;while(t--)n=e[t],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.string)):this[n.type](n)},opcode:function(e,n,r,i){this.opcodes.push(t.OPCODE_MAP[e]),n!==undefined&&this.opcodes.push(n),r!==undefined&&this.opcodes.push(r),i!==undefined&&this.opcodes.push(i)},declare:function(e,t){this.opcodes.push("DECLARE"),this.opcodes.push(e),this.opcodes.push(t)},addDepth:function(e){if(e===0)return;this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e))},setupStackForMustache:function(e){var t=e.params;return this.pushParams(t),e.hash&&this.hash(e.hash),this.ID(e.id),t}},n.prototype={nameLookup:function(e,t,r){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,r){this.environment=e,this.options=t||{},this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(e,t);var i=e.opcodes,s;this.i=0;for(a=i.length;this.i<a;this.i++)s=this.nextOpcode(0),s[0]==="DECLARE"?(this.i=this.i+2,this[s[1]]=s[2]):(this.i=this.i+s[1].length,this[s[0]].apply(this,s[1]));return this.createFunctionContext(r)},nextOpcode:function(e){var n=this.environment.opcodes,r=n[this.i+e],i,s,o,u;if(r==="DECLARE")return i=n[this.i+1],s=n[this.i+2],["DECLARE",i,s];i=t.DISASSEMBLE_MAP[r],o=t.multiParamSize(r),u=[];for(var a=0;a<o;a++)u.push(n[this.i+a+1+e]);return[i,u]},eat:function(e){this.i=this.i+e.length},preamble:function(){var e=[];this.useRegister("foundHelper");if(!this.isChild){var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),e.push(n)}else e.push("");this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars;this.isChild||(n=n.concat(this.context.registers.list)),n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", "));if(!this.isChild){var r=[];for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var o=0,u=this.environment.depths.list.length;o<u;o++)s.push("depth"+this.environment.depths.list[o]);if(t)return s.push(this.source.join("\n  ")),Function.apply(this,s);var a="function "+(this.name||"")+"("+s.join(",")+") {\n  "+this.source.join("\n  ")+"}";return e.log(e.logger.DEBUG,a+"\n\n"),a},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(1),t="";this.context.aliases.escapeExpression="this.escapeExpression",e[0]==="appendContent"&&(t=" + "+this.quotedString(e[1][0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupWithHelpers:function(e,t){if(e){var n=this.nextStack();this.usingKnownHelper=!1;var r;!t&&this.options.knownHelpers[e]?(r=n+" = "+this.nameLookup("helpers",e,"helper"),this.usingKnownHelper=!0):t||this.options.knownHelpersOnly?r=n+" = "+this.nameLookup("depth"+this.lastContext,e,"context"):(this.register("foundHelper",this.nameLookup("helpers",e,"helper")),r=n+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,e,"context")),r+=";",this.source.push(r)}else this.pushStack("depth"+this.lastContext)},lookup:function(e){var t=this.topStack();this.source.push(t+" = ("+t+" === null || "+t+" === undefined || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")+");")},pushStringParam:function(e){this.pushStack("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStack(this.quotedString(e))},push:function(e){this.pushStack(e)},invokeMustache:function(e,t,n){this.populateParams(e,this.quotedString(t),"{}",null,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+n+"=== undef) { "+e+" = helperMissing.call("+t+"); }"),e!==n&&this.source.push("else { "+e+" = "+n+"; }"))})},invokeProgram:function(e,t,n){var r=this.programExpression(this.inverse),i=this.programExpression(e);this.populateParams(t,null,i,r,n,function(e,t,n){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+e+" = blockHelperMissing.call("+t+"); }"))})},populateParams:function(e,t,n,r,i,s){var o=i||this.options.stringParams||r||this.options.data,u=this.popStack(),a,f=[],l,c,h;o?(this.register("tmp1",n),h="tmp1"):h="{ hash: {} }";if(o){var p=i?this.popStack():"{}";this.source.push("tmp1.hash = "+p+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var d=0;d<e;d++)l=this.popStack(),f.push(l),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");r&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+r+";")),this.options.data&&this.source.push("tmp1.data = data;"),f.push(h),this.populateCall(f,u,t||u,s,n!=="{}")},populateCall:function(e,t,n,r,i){var s=["depth0"].concat(e).join(", "),o=["depth0"].concat(n).concat(e).join(", "),u=this.nextStack();if(this.usingKnownHelper)this.source.push(u+" = "+t+".call("+s+");");else{this.context.aliases.functionType='"function"';var a=i?"foundHelper && ":"";this.source.push("if("+a+"typeof "+t+" === functionType) { "+u+" = "+t+".call("+s+"); }")}r.call(this,u,o,t),this.usingKnownHelper=!1},invokePartial:function(e){params=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:n,compileChildren:function(e,t){var n=e.children,r,i;for(var s=0,o=n.length;s<o;s++){r=n[s],i=new this.compiler,this.context.programs.push("");var u=this.context.programs.length;r.index=u,r.name="program"+u,this.context.programs[u]=i.compile(r,t,this.context)}},programExpression:function(e){if(e==null)return"self.noop";var t=this.environment.children[e],n=t.depths.list,r=[t.index,t.name,"data"];for(var i=0,s=n.length;i<s;i++)depth=n[i],depth===1?r.push("depth0"):r.push("depth"+(depth-1));return n.length===0?"self.program("+r.join(", ")+")":(r.shift(),"self.programWithDepth("+r.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.context.registers[e]||(this.context.registers[e]=!0,this.context.registers.list.push(e))},pushStack:function(e){return this.source.push(this.nextStack()+" = "+e+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var s="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),o=n.RESERVED_WORDS={};for(var u=0,a=s.length;u<a;u++)o[s[u]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(e.Compiler,e.JavaScriptCompiler),e.precompile=function(t,n){n=n||{};var r=e.parse(t),i=(new e.Compiler).compile(r,n);return(new e.JavaScriptCompiler).compile(i,n)},e.compile=function(t,n){function i(){var r=e.parse(t),i=(new e.Compiler).compile(r,n),s=(new e.JavaScriptCompiler).compile(i,n,undefined,!0);return e.template(s)}n=n||{};var r;return function(e,t){return r||(r=i()),r.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,r){var i=this.programs[t];return r?e.VM.program(n,r):i?i:(i=this.programs[t]=e.VM.program(n),i)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop};return function(r,i){return i=i||{},t.call(n,e,r,i.helpers,i.partials,i.data)}},programWithDepth:function(e,t,n){var r=Array.prototype.slice.call(arguments,2);return function(n,i){return i=i||{},e.apply(this,[n,i.data||t].concat(r))}},program:function(e,t){return function(n,r){return r=r||{},e(n,r.data||t)}},noop:function(){return""},invokePartial:function(t,n,r,i,s,o){options={helpers:i,partials:s,data:o};if(t===undefined)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(r,options);if(!e.compile)throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode");return s[n]=e.compile(t),s[n](r,options)}},e.template=e.VM.template}(),function(){"undefined"==typeof Ember&&(Ember={},"undefined"!=typeof window&&(window.Em=window.Ember=Em=Ember)),Ember.isNamespace=!0,Ember.toString=function(){return"Ember"},Ember.VERSION="0.9.8.1",Ember.ENV="undefined"==typeof ENV?{}:ENV,Ember.EXTEND_PROTOTYPES=Ember.ENV.EXTEND_PROTOTYPES!==!1,Ember.SHIM_ES5=Ember.ENV.SHIM_ES5===!1?!1:Ember.EXTEND_PROTOTYPES,Ember.CP_DEFAULT_CACHEABLE=!!Ember.ENV.CP_DEFAULT_CACHEABLE,Ember.VIEW_PRESERVES_CONTEXT=!!Ember.ENV.VIEW_PRESERVES_CONTEXT,Ember.K=function(){return this},"undefined"==typeof Ember.assert&&(Ember.assert=Ember.K),"undefined"==typeof Ember.warn&&(Ember.warn=Ember.K),"undefined"==typeof Ember.deprecate&&(Ember.deprecate=Ember.K),"undefined"==typeof Ember.deprecateFunc&&(Ember.deprecateFunc=function(e,t){return t}),"undefined"==typeof ember_assert&&(window.ember_assert=Ember.K),"undefined"==typeof ember_warn&&(window.ember_warn=Ember.K),"undefined"==typeof ember_deprecate&&(window.ember_deprecate=Ember.K),"undefined"==typeof ember_deprecateFunc&&(window.ember_deprecateFunc=function(e,t){return t}),Ember.Logger=window.console||{log:Ember.K,warn:Ember.K,error:Ember.K}}(),function(){var e=Ember.platform={};e.create=Object.create;if(!e.create){var t=function(){},n=t.prototype;e.create=function(r,i){t.prototype=r,r=new t,t.prototype=n;if(i!==undefined)for(var s in i){if(!i.hasOwnProperty(s))continue;e.defineProperty(r,s,i[s])}return r},e.create.isSimulated=!0}var r=Object.defineProperty,i,s;if(r)try{r({},"a",{get:function(){}})}catch(o){r=null}r&&(i=function(){var e={};return r(e,"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),r(e,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),e.a===!0}(),s=function(){try{return r(document.createElement("div"),"definePropertyOnDOM",{}),!0}catch(e){}return!1}(),i?s||(r=function(e,t,n){var r;return typeof Node=="object"?r=e instanceof Node:r=typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string",r?e[t]=n.value:Object.defineProperty(e,t,n)}):r=null),e.defineProperty=r,e.hasPropertyAccessors=!0,e.defineProperty||(e.hasPropertyAccessors=!1,e.defineProperty=function(e,t,n){e[t]=n.value},e.defineProperty.isSimulated=!0)}(),function(){var e="__ember"+ +(new Date),t,n,r;t=0,n=[],r={};var i=Ember.GUID_DESC={configurable:!0,writable:!0,enumerable:!1},s=Ember.platform.defineProperty,o=Ember.platform.create;Ember.GUID_KEY=e,Ember.generateGuid=function(n,r){r||(r="ember");var o=r+t++;return n&&(i.value=o,s(n,e,i),i.value=null),o},Ember.guidFor=function(i){if(i===undefined)return"(undefined)";if(i===null)return"(null)";var s,o,u=typeof i;switch(u){case"number":return o=n[i],o||(o=n[i]="nu"+i),o;case"string":return o=r[i],o||(o=r[i]="st"+t++),o;case"boolean":return i?"(true)":"(false)";default:if(i[e])return i[e];if(i===Object)return"(Object)";if(i===Array)return"(Array)";return Ember.generateGuid(i,"ember")}};var u={writable:!0,configurable:!1,enumerable:!1,value:null},a=Ember.GUID_KEY+"_meta";Ember.META_KEY=a;var f={descs:{},watching:{}};Object.freeze&&Object.freeze(f);var l=Ember.platform.defineProperty.isSimulated?o:function(e){return e};Ember.meta=function(t,n){var r=t[a];return n===!1?r||f:(r?r.source!==t&&(r=o(r),r.descs=o(r.descs),r.values=o(r.values),r.watching=o(r.watching),r.lastSetValues={},r.cache={},r.source=t,s(t,a,u),r=t[a]=l(r)):(s(t,a,u),r=t[a]=l({descs:{},watching:{},values:{},lastSetValues:{},cache:{},source:t}),r.descs.constructor=null),r)},Ember.getMeta=function(t,n){var r=Ember.meta(t,!1);return r[n]},Ember.setMeta=function(t,n,r){var i=Ember.meta(t,!0);return i[n]=r,r},Ember.metaPath=function(e,t,n){var r=Ember.meta(e,n),i,s;for(var u=0,a=t.length;u<a;u++){i=t[u],s=r[i];if(!s){if(!n)return undefined;s=r[i]={__ember_source__:e}}else if(s.__ember_source__!==e){if(!n)return undefined;s=r[i]=o(s),s.__ember_source__=e}r=s}return s},Ember.wrap=function(e,t){function n(){}var r=function(){var r,i=this._super;return this._super=t||n,r=e.apply(this,arguments),this._super=i,r};return r.base=e,r},Ember.isArray=function(e){return!e||e.setInterval?!1:Array.isArray&&Array.isArray(e)?!0:Ember.Array&&Ember.Array.detect(e)?!0:e.length!==undefined&&"object"==typeof e?!0:!1},Ember.makeArray=function(e){return e===null||e===undefined?[]:Ember.isArray(e)?e:[e]}}(),function(){function o(e){return e.indexOf("*")===-1||e==="*"?e:e.replace(/(^|.)\*/,function(e,t){return t==="."?e:t+"."})}function u(e){e=o(e);if(e==="*")return e;var t=e.charAt(0);return t==="."?"this"+e:e}function a(e,t){var r=t.length,i,s,u;t=o(t),i=0;while(e&&i<r){s=t.indexOf(".",i),s<0&&(s=r),u=t.slice(i,s),e=u==="*"?e:n(e,u);if(e&&e.isDestroyed)return undefined;i=s+1}return e}function d(e){return e.match(p)[0]}function v(e,t){var r=h.test(t),i=!r&&c.test(t),s;if(!e||i)e=window;r&&(t=t.slice(5)),t=o(t),e===window&&(s=d(t),e=n(e,s),t=t.slice(s.length+1));if(!t||t.length===0)throw new Error("Invalid Path");return f[0]=e,f[1]=t,f}var e=Ember.platform.hasPropertyAccessors&&Ember.ENV.USE_ACCESSORS;Ember.USE_ACCESSORS=!!e;var t=Ember.meta,n,r;n=function(t,n){n===undefined&&"string"==typeof t&&(n=t,t=Ember);if(!t)return undefined;var r=t[n];return r===undefined&&"function"==typeof t.unknownProperty&&(r=t.unknownProperty(n)),r},r=function(t,n,r){return"object"!=typeof t||n in t?t[n]=r:"function"==typeof t.setUnknownProperty?t.setUnknownProperty(n,r):"function"==typeof t.unknownProperty?t.unknownProperty(n,r):t[n]=r,r};if(!e){var i=n,s=r;n=function(e,n){n===undefined&&"string"==typeof e&&(n=e,e=Ember);if(!e)return undefined;var r=t(e,!1).descs[n];return r?r.get(e,n):i(e,n)},r=function(e,n,r){var i=t(e,!1).descs[n];return i?i.set(e,n,r):s(e,n,r),r}}Ember.get=n,Ember.set=r;var f=[],l=/^([A-Z$]|([0-9][A-Z$]))/,c=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,h=/^this[\.\*]/,p=/^([^\.\*]+)/;Ember.normalizePath=u,Ember.normalizeTuple=function(e,t){return v(e,u(t))},Ember.normalizeTuple.primitive=v,Ember.getWithDefault=function(e,t,n){var r=Ember.get(e,t);return r===undefined?n:r},Ember.getPath=function(e,t){var r,i,s;if(t==="")return e;!t&&"string"==typeof e&&(t=e,e=null),t=o(t);if(e===null&&t.indexOf(".")<0)return n(window,t);t=u(t),r=h.test(t);if(!e||r){var f=v(e,t);e=f[0],t=f[1],f.length=0}return a(e,t)},Ember.setPath=function(e,t,n,r){var i;arguments.length===2&&"string"==typeof e&&(n=t,t=e,e=null),t=u(t);if(t.indexOf(".")>0)i=t.slice(t.lastIndexOf(".")+1),t=t.slice(0,t.length-(i.length+1)),t!=="this"&&(e=Ember.getPath(e,t));else{if(l.test(t))throw new Error("Invalid Path");i=t}if(!i||i.length===0||i==="*")throw new Error("Invalid Path");if(!e){if(r)return;throw new Error("Object in path "+t+" could not be found or was destroyed.")}return Ember.set(e,i,n)},Ember.trySetPath=function(e,t,n){return arguments.length===2&&"string"==typeof e&&(n=t,t=e,e=null),Ember.setPath(e,t,n,!0)},Ember.isGlobalPath=function(e){return!h.test(e)&&l.test(e)}}(),function(){function p(e,t,n){n=n||r(e,!1).values;if(n){var i=n[t];if(i!==undefined)return i;if(e.unknownProperty)return e.unknownProperty(t)}}function d(e,t,n){var i=r(e),s;return s=i.watching[t]>0&&n!==i.values[t],s&&Ember.propertyWillChange(e,t),i.values[t]=n,s&&Ember.propertyDidChange(e,t),n}function m(e){var t=v[e];return t||(t=v[e]=function(){return p(this,e)}),t}function y(e){var t=g[e];return t||(t=g[e]=function(t){return d(this,e,t)}),t}function b(e,t){return t==="toString"?"function"!=typeof e.toString:!!e[t]}var e=Ember.USE_ACCESSORS,t=Ember.GUID_KEY,n=Ember.META_KEY,r=Ember.meta,i=Ember.platform.create,s=Ember.platform.defineProperty,o,u,a={writable:!0,configurable:!0,enumerable:!0,value:null},f=Ember.Descriptor=function(){},l=f.setup=function(e,t,n){a.value=n,s(e,t,a),a.value=null},c=Ember.Descriptor.prototype;c.set=function(e,t,n){return e[t]=n,n},c.get=function(e,t){return p(e,t,e)},c.setup=l,c.teardown=function(e,t){return e[t]},c.val=function(e,t){return e[t]},e||(Ember.Descriptor.MUST_USE_GETTER=function(){this instanceof Ember.Object},Ember.Descriptor.MUST_USE_SETTER=function(){this instanceof Ember.Object&&this.isDestroyed});var h={configurable:!0,enumerable:!0,set:Ember.Descriptor.MUST_USE_SETTER},v={},g={};u=new Ember.Descriptor,Ember.platform.hasPropertyAccessors?(u.get=p,u.set=d,e?u.setup=function(e,t,n){h.get=m(t),h.set=y(t),s(e,t,h),h.get=h.set=null,n!==undefined&&(r(e).values[t]=n)}:u.setup=function(e,t,n){h.get=m(t),s(e,t,h),h.get=null,n!==undefined&&(r(e).values[t]=n)},u.teardown=function(e,t){var n=r(e).values[t];return delete r(e).values[t],n}):u.set=function(e,t,n){var i=r(e),s;return s=i.watching[t]>0&&n!==e[t],s&&Ember.propertyWillChange(e,t),e[t]=n,s&&Ember.propertyDidChange(e,t),n},Ember.SIMPLE_PROPERTY=new Ember.Descriptor,o=Ember.SIMPLE_PROPERTY,o.unwatched=u.unwatched=o,o.watched=u.watched=u,Ember.defineProperty=function(e,t,n,i){var u=r(e,!1),a=u.descs,f=u.watching[t]>0,l=!0;return i===undefined?(l=!1,i=b(a,t)?a[t].teardown(e,t):e[t]):b(a,t)&&a[t].teardown(e,t),n||(n=o),n instanceof Ember.Descriptor?(u=r(e,!0),a=u.descs,n=(f?n.watched:n.unwatched)||n,a[t]=n,n.setup(e,t,i,f)):(a[t]&&(r(e).descs[t]=null),s(e,t,n)),l&&f&&Ember.overrideChains(e,t,u),this},Ember.create=function(e,r){var s=i(e,r);return t in s&&Ember.generateGuid(s,"ember"),n in s&&Ember.rewatch(s),s},Ember.createPrototype=function(e,s){var o=i(e,s);return r(o,!0).proto=o,t in o&&Ember.generateGuid(o,"ember"),n in o&&Ember.rewatch(o),o}}(),function(){function o(t,n){var r=e(t),s,o;return s=r.deps,s?s.__emberproto__!==t&&(s=r.deps=i(s),s.__emberproto__=t):s=r.deps={__emberproto__:t},o=s[n],o?o.__emberproto__!==t&&(o=s[n]=i(o),o.__emberproto__=t):o=s[n]={__emberproto__:t},o}function u(e,t,n){var r=o(e,n);r[t]=(r[t]||0)+1,Ember.watch(e,n)}function a(e,t,n){var r=o(e,n);r[t]=(r[t]||0)-1,Ember.unwatch(e,n)}function f(e,t,n){var r=e._dependentKeys,i=r?r.length:0;for(var s=0;s<i;s++)u(t,n,r[s])}function l(e,t){this.func=e,this._cacheable=t&&t.cacheable!==undefined?t.cacheable:Ember.CP_DEFAULT_CACHEABLE,this._dependentKeys=t&&t.dependentKeys}function h(t,n){var r=n._cacheable,i=n.func;return r?function(){var n,r=e(this).cache;return t in r?r[t]:(n=r[t]=i.call(this,t),n)}:function(){return i.call(this,t)}}function p(n,r){var i=r._cacheable,s=r.func;return function(o){var u=e(this,i),a=u.source===this&&u.watching[n]>0,f,l,c;return l=r._suspended,r._suspended=this,a=a&&u.lastSetValues[n]!==t(o),a&&(u.lastSetValues[n]=t(o),Ember.propertyWillChange(this,n)),i&&delete u.cache[n],f=s.call(this,n,o),i&&(u.cache[n]=f),a&&Ember.propertyDidChange(this,n),r._suspended=l,f}}var e=Ember.meta,t=Ember.guidFor,n=Ember.USE_ACCESSORS,r=Array.prototype.slice,i=Ember.platform.create,s=Ember.platform.defineProperty;Ember.ComputedProperty=l,l.prototype=new Ember.Descriptor;var c={configurable:!0,enumerable:!0,get:function(){return undefined},set:Ember.Descriptor.MUST_USE_SETTER},d=l.prototype;d.cacheable=function(e){return this._cacheable=e!==!1,this},d.volatile=function(){return this.cacheable(!1)},d.property=function(){return this._dependentKeys=r.call(arguments),this},d.meta=function(e){return this._meta=e,this},d.setup=function(e,t,n){c.get=h(t,this),c.set=p(t,this),s(e,t,c),c.get=c.set=null,f(this,e,t)},d.teardown=function(t,n){var r=this._dependentKeys,i=r?r.length:0;for(var s=0;s<i;s++)a(t,n,r[s]);return this._cacheable&&delete e(t).cache[n],null},d.didChange=function(t,n){this._cacheable&&this._suspended!==t&&delete e(t).cache[n]},d.get=function(t,n){var r,i;if(this._cacheable){i=e(t).cache;if(n in i)return i[n];r=i[n]=this.func.call(t,n)}else r=this.func.call(t,n);return r},d.set=function(n,r,i){var s=this._cacheable,o=e(n,s),u=o.source===n&&o.watching[r]>0,a,f,l;return f=this._suspended,this._suspended=n,u=u&&o.lastSetValues[r]!==t(i),u&&(o.lastSetValues[r]=t(i),Ember.propertyWillChange(n,r)),s&&delete o.cache[r],a=this.func.call(n,r,i),s&&(o.cache[r]=a),u&&Ember.propertyDidChange(n,r),this._suspended=f,a},d.val=function(t,n){return e(t,!1).values[n]},Ember.platform.hasPropertyAccessors?n||(d.setup=function(e,t){s(e,t,c),f(this,e,t)}):d.setup=function(e,t,n){e[t]=undefined,f(this,e,t)},Ember.computed=function(e){var t;arguments.length>1&&(t=r.call(arguments,0,-1),e=r.call(arguments,-1)[0]);var n=new l(e);return t&&n.property.apply(n,t),n},Ember.cacheFor=function(t,n){var r=e(t,!1).cache;if(r&&n in r)return r[n]}}(),function(){var e=function(e){return e&&Function.prototype.toString.call(e).indexOf("[native code]")>-1},t=e(Array.prototype.map)?Array.prototype.map:function(e){if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=new Array(n),i=arguments[1];for(var s=0;s<n;s++)s in t&&(r[s]=e.call(i,t[s],s,t));return r},n=e(Array.prototype.forEach)?Array.prototype.forEach:function(e){if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=arguments[1];for(var i=0;i<n;i++)i in t&&e.call(r,t[i],i,t)},r=e(Array.prototype.indexOf)?Array.prototype.indexOf:function(e,t){t===null||t===undefined?t=0:t<0&&(t=Math.max(0,this.length+t));for(var n=t,r=this.length;n<r;n++)if(this[n]===e)return n;return-1};Ember.ArrayUtils={map:function(e){var n=Array.prototype.slice.call(arguments,1);return e.map?e.map.apply(e,n):t.apply(e,n)},forEach:function(e){var t=Array.prototype.slice.call(arguments,1);return e.forEach?e.forEach.apply(e,t):n.apply(e,t)},indexOf:function(e){var t=Array.prototype.slice.call(arguments,1);return e.indexOf?e.indexOf.apply(e,t):r.apply(e,t)},indexesOf:function(e){var t=Array.prototype.slice.call(arguments,1);return t[0]===undefined?[]:Ember.ArrayUtils.map(t[0],function(t){return Ember.ArrayUtils.indexOf(e,t)})},removeObject:function(e,t){var n=this.indexOf(e,t);n!==-1&&e.splice(n,1)}},Ember.SHIM_ES5&&(Array.prototype.map||(Array.prototype.map=t),Array.prototype.forEach||(Array.prototype.forEach=n),Array.prototype.indexOf||(Array.prototype.indexOf=r))}(),function(){function c(e,t,n){i&&!n?f.push(e,t):Ember.sendEvent(e,t)}function h(){l.clear(),f.flush()}function p(t){return t+e}function d(e){return e+t}function v(e){return e.slice(0,-7)}function m(e){return e.slice(0,-7)}function g(e){return function(t,n,r){var i=r[0],s=v(r[1]),o,u=e.slice();n.length>2&&(o=Ember.getPath(Ember.isGlobalPath(s)?window:i,s)),u.unshift(i,s,o),n.apply(t,u)}}function b(e,t,n){var r=n[0],i=m(n[1]),s;t.length>2&&(s=Ember.getPath(r,i)),t.call(e,r,i,s)}var e=":change",t=":before",n=Ember.guidFor,r=Ember.normalizePath,i=0,s=Array.prototype.slice,o=Ember.ArrayUtils.forEach,u=function(){this.targetSet={}};u.prototype.add=function(e,t){var n=this.targetSet,r=Ember.guidFor(e),i=n[r];return i||(n[r]=i={}),i[t]?!1:i[t]=!0},u.prototype.clear=function(){this.targetSet={}};var a=function(){this.targetSet={},this.queue=[]};a.prototype.push=function(e,t){var n=this.targetSet,r=this.queue,i=Ember.guidFor(e),s=n[i],o;s||(n[i]=s={}),o=s[t],o===undefined?s[t]=r.push(Ember.deferEvent(e,t))-1:r[o]=Ember.deferEvent(e,t)},a.prototype.flush=function(){var e=this.queue;this.queue=[],this.targetSet={};for(var t=0,n=e.length;t<n;++t)e[t]()};var f=new a,l=new u;Ember.beginPropertyChanges=function(){return i++,this},Ember.endPropertyChanges=function(){i--,i<=0&&h()},Ember.changeProperties=function(e,t){Ember.beginPropertyChanges();try{e.call(t)}finally{Ember.endPropertyChanges()}},Ember.setProperties=function(e,t){return Ember.changeProperties(function(){for(var n in t)t.hasOwnProperty(n)&&Ember.set(e,n,t[n])}),e};var y=g([]);Ember.addObserver=function(e,t,n,i){t=r(t);var o;if(arguments.length>4){var u=s.call(arguments,4);o=g(u)}else o=y;return Ember.addListener(e,p(t),n,i,o),Ember.watch(e,t),this},Ember.observersFor=function(e,t){return Ember.listenersFor(e,p(t))},Ember.removeObserver=function(e,t,n,i){return t=r(t),Ember.unwatch(e,t),Ember.removeListener(e,p(t),n,i),this},Ember.addBeforeObserver=function(e,t,n,i){return t=r(t),Ember.addListener(e,d(t),n,i,b),Ember.watch(e,t),this},Ember._suspendObserver=function(e,t,n,r,i){return Ember._suspendListener(e,p(t),n,r,i)},Ember.beforeObserversFor=function(e,t){return Ember.listenersFor(e,d(t))},Ember.removeBeforeObserver=function(e,t,n,i){return t=r(t),Ember.unwatch(e,t),Ember.removeListener(e,d(t),n,i),this},Ember.notifyObservers=function(e,t){if(e.isDestroying)return;c(e,p(t))},Ember.notifyBeforeObservers=function(e,t){if(e.isDestroying)return;var n,r,s=!1;if(i){if(!l.add(e,t))return;s=!0}c(e,d(t),s)}}(),function(){function p(e){return e.match(c)[0]}function d(e){return e==="*"||!h.test(e)}function m(t,n,r,i,s){var o=e(n);i[o]||(i[o]={});if(i[o][r])return;i[o][r]=!0;var u=s.deps;u=u&&u[r];if(u)for(var a in u){if(v[a])continue;t(n,a)}}function b(e,t,n){if(e.isDestroying)return;var r=g,i=!r;i&&(r=g={}),m(D,e,t,r,n),i&&(g=null)}function w(e,t,n){if(e.isDestroying)return;var r=y,i=!r;i&&(r=y={}),m(P,e,t,r,n),i&&(y=null)}function E(n,r,i){if(!n||"object"!=typeof n)return;var s=t(n),o=s.chainWatchers;if(!o||o.__emberproto__!==n)o=s.chainWatchers={__emberproto__:n};o[r]||(o[r]={}),o[r][e(i)]=i,Ember.watch(n,r)}function S(n,r,i){if(!n||"object"!=typeof n)return;var s=t(n,!1),o=s.chainWatchers;if(!o||o.__emberproto__!==n)return;o[r]&&delete o[r][e(i)],Ember.unwatch(n,r)}function T(){if(x.length===0)return;var e=x;x=[],l(e,function(e){e[0].add(e[1])})}function N(e){return t(e,!1).proto===e}function L(e){var n=t(e),r=n.chains;return r?r.value()!==e&&(r=n.chains=r.copy(e)):r=n.chains=new C(null,null,e),r}function A(e,t,n,r,i){var s=t.chainWatchers;if(!s||s.__emberproto__!==e)return;s=s[n];if(!s)return;for(var o in s){if(!s.hasOwnProperty(o))continue;s[o][r](i)}}function O(e,t,n){A(e,n,t,"willChange")}function M(e,t,n){A(e,n,t,"didChange")}function D(e,n){var r=t(e,!1),i=r.proto,s=r.descs[n];if(i===e)return;s&&s.willChange&&s.willChange(e,n),b(e,n,r),O(e,n,r),Ember.notifyBeforeObservers(e,n)}function P(e,n){var r=t(e,!1),i=r.proto,s=r.descs[n];if(i===e)return;s&&s.didChange&&s.didChange(e,n),w(e,n,r),M(e,n,r),Ember.notifyObservers(e,n)}var e=Ember.guidFor,t=Ember.meta,n=Ember.get,r=Ember.set,i=Ember.normalizeTuple.primitive,s=Ember.normalizePath,o=Ember.SIMPLE_PROPERTY,u=Ember.GUID_KEY,a=Ember.META_KEY,f=Ember.notifyObservers,l=Ember.ArrayUtils.forEach,c=/^([^\.\*]+)/,h=/[\.\*]/,v={__emberproto__:!0},g,y,x=[],C=function(e,t,n,r){var i;this._parent=e,this._key=t,this._watching=n===undefined,this._value=n,this._separator=r||".",this._paths={},this._watching&&(this._object=e.value(),this._object&&E(this._object,this._key,this)),this._parent&&this._parent._key==="@each"&&this.value()},k=C.prototype;k.value=function(){if(this._value===undefined&&this._watching){var e=this._parent.value();this._value=e&&!N(e)?n(e,this._key):undefined}return this._value},k.destroy=function(){if(this._watching){var e=this._object;e&&S(e,this._key,this),this._watching=!1}},k.copy=function(e){var t=new C(null,null,e,this._separator),n=this._paths,r;for(r in n){if(n[r]<=0)continue;t.add(r)}return t},k.add=function(e){var t,n,r,s,o,u;u=this._paths,u[e]=(u[e]||0)+1,t=this.value(),n=i(t,e);if(n[0]&&n[0]===t)e=n[1],r=p(e),e=e.slice(r.length+1);else{if(!n[0]){x.push([this,e]),n.length=0;return}s=n[0],r=e.slice(0,0-(n[1].length+1)),o=e.slice(r.length,r.length+1),e=n[1]}n.length=0,this.chain(r,e,s,o)},k.remove=function(e){var t,n,r,s,o;o=this._paths,o[e]>0&&o[e]--,t=this.value(),n=i(t,e),n[0]===t?(e=n[1],r=p(e),e=e.slice(r.length+1)):(s=n[0],r=e.slice(0,0-(n[1].length+1)),e=n[1]),n.length=0,this.unchain(r,e)},k.count=0,k.chain=function(e,t,n,r){var i=this._chains,s;i||(i=this._chains={}),s=i[e],s||(s=i[e]=new C(this,e,n,r)),s.count++,t&&t.length>0&&(e=p(t),t=t.slice(e.length+1),s.chain(e,t))},k.unchain=function(e,t){var n=this._chains,r=n[e];t&&t.length>1&&(e=p(t),t=t.slice(e.length+1),r.unchain(e,t)),r.count--,r.count<=0&&(delete n[r._key],r.destroy())},k.willChange=function(){var e=this._chains;if(e)for(var t in e){if(!e.hasOwnProperty(t))continue;e[t].willChange()}this._parent&&this._parent.chainWillChange(this,this._key,1)},k.chainWillChange=function(e,t,n){this._key&&(t=this._key+this._separator+t),this._parent?this._parent.chainWillChange(this,t,n+1):(n>1&&Ember.propertyWillChange(this.value(),t),t="this."+t,this._paths[t]>0&&Ember.propertyWillChange(this.value(),t))},k.chainDidChange=function(e,t,n){this._key&&(t=this._key+this._separator+t),this._parent?this._parent.chainDidChange(this,t,n+1):(n>1&&Ember.propertyDidChange(this.value(),t),t="this."+t,this._paths[t]>0&&Ember.propertyDidChange(this.value(),t))},k.didChange=function(e){if(this._watching){var t=this._parent.value();t!==this._object&&(S(this._object,this._key,this),this._object=t,E(t,this._key,this)),this._value=undefined,this._parent&&this._parent._key==="@each"&&this.value()}var n=this._chains;if(n)for(var r in n){if(!n.hasOwnProperty(r))continue;n[r].didChange(e)}if(e)return;this._parent&&this._parent.chainDidChange(this,this._key,1)},Ember.overrideChains=function(e,t,n){A(e,n,t,"didChange",!0)};var _=Ember.SIMPLE_PROPERTY.watched;Ember.watch=function(e,n){if(n==="length"&&Ember.typeOf(e)==="array")return this;var r=t(e),i=r.watching,o;return n=s(n),i[n]?i[n]=(i[n]||0)+1:(i[n]=1,d(n)?(o=r.descs[n],o=o?o.watched:_,o&&Ember.defineProperty(e,n,o)):L(e).add(n)),this},Ember.isWatching=function(e,n){return!!t(e).watching[n]},Ember.watch.flushPending=T,Ember.unwatch=function(e,n){if(n==="length"&&Ember.typeOf(e)==="array")return this;var r=t(e).watching,i,u;return n=s(n),r[n]===1?(r[n]=0,d(n)?(i=t(e).descs[n],i=i?i.unwatched:o,i&&
Ember.defineProperty(e,n,i)):L(e).remove(n)):r[n]>1&&r[n]--,this},Ember.rewatch=function(e){var n=t(e,!1),r=n.chains,i=n.bindings,s,o;return u in e&&!e.hasOwnProperty(u)&&Ember.generateGuid(e,"ember"),r&&r.value()!==e&&L(e),this},Ember.propertyWillChange=D,Ember.propertyDidChange=P;var H=[];Ember.destroy=function(e){var t=e[a],n,r,i,s;if(t){e[a]=null,n=t.chains;if(n){H.push(n);while(H.length>0){n=H.pop(),r=n._chains;if(r)for(i in r)r.hasOwnProperty(i)&&H.push(r[i]);n._watching&&(s=n._object,s&&S(s,n._key,n))}}}}}(),function(){function s(e,t,r,s){var o=n(r);return i(e,["listeners",t,o],s)}function o(e,n){var r=t(e,!1).listeners;return r?r[n]||!1:!1}function a(e,t,n){if(!e)return!1;for(var r in e){if(u[r])continue;var i=e[r];if(i)for(var s in i){if(u[s])continue;var o=i[s];if(o&&t(o,n)===!0)return!0}}return!1}function f(e,t){var n=e.method,r=e.target,i=e.xform;r||(r=t[0]),"string"==typeof n&&(n=r[n]),i?i(r,n,t):n.apply(r,t)}function l(e,t,r,i,o){!i&&"function"==typeof r&&(i=r,r=null);var u=s(e,t,r,!0),a=n(i);u[a]?u[a].xform=o:u[a]={target:r,method:i,xform:o},"function"==typeof e.didAddListener&&e.didAddListener(t,r,i)}function c(e,t,r,i){!i&&"function"==typeof r&&(i=r,r=null);var o=s(e,t,r,!0),u=n(i);o&&o[u]&&(o[u]=null),e&&"function"==typeof e.didRemoveListener&&e.didRemoveListener(t,r,i)}function h(e,t,r,i,o){!i&&"function"==typeof r&&(i=r,r=null);var u=s(e,t,r,!0),a=n(i),f=u&&u[a];u[a]=null;try{return o.call(r)}finally{u[a]=f}}function p(e){var n=t(e,!1).listeners,r=[];if(n)for(var i in n)!u[i]&&n[i]&&r.push(i);return r}function d(e,t){e!==Ember&&"function"==typeof e.sendEvent&&e.sendEvent.apply(e,r.call(arguments,1));var n=o(e,t);return a(n,f,arguments),!0}function v(e,t){var n=o(e,t),i=[],s=arguments;return a(n,function(e){i.push(e)}),function(){e!==Ember&&"function"==typeof e.sendEvent&&e.sendEvent.apply(e,r.call(s,1));for(var t=0,n=i.length;t<n;++t)f(i[t],s)}}function m(e,t){var n=o(e,t);if(a(n,function(){return!0}))return!0;var r=i(e,["listeners"],!0);return r[t]=null,!1}function g(e,t){var n=o(e,t),r=[];return a(n,function(e){r.push([e.target,e.method])}),r}var e=Ember.platform.create,t=Ember.meta,n=Ember.guidFor,r=Array.prototype.slice,i=Ember.metaPath,u={__ember_source__:!0};Ember.addListener=l,Ember.removeListener=c,Ember._suspendListener=h,Ember.sendEvent=d,Ember.hasListeners=m,Ember.watchedEvents=p,Ember.listenersFor=g,Ember.deferEvent=v}(),function(){function n(t,n,r,i){n===undefined&&(n=t,t=undefined),"string"==typeof n&&(n=t[n]),r&&i>0&&(r=r.length>i?e.call(r,i):null);if("function"!=typeof Ember.onerror)return n.apply(t||this,r||[]);try{return n.apply(t||this,r||[])}catch(s){Ember.onerror(s)}}function a(){u=null,o.currentRunLoop&&o.end()}function c(){var e=+(new Date),t=-1;for(var r in f){if(!f.hasOwnProperty(r))continue;var i=f[r];if(i&&i.expires)if(e>=i.expires)delete f[r],n(i.target,i.method,i.args,2);else if(t<0||i.expires<t)t=i.expires}t>0&&setTimeout(c,t- +(new Date))}function h(e,t){t[this.tguid]&&delete t[this.tguid][this.mguid],f[e]&&n(this.target,this.method,this.args,2),delete f[e]}function d(){p=null;for(var e in f){if(!f.hasOwnProperty(e))continue;var t=f[e];t.next&&(delete f[e],n(t.target,t.method,t.args,2))}}var e=Array.prototype.slice,t=Ember.ArrayUtils.forEach,r,i=function(){},s=function(e){var t;return this instanceof s?t=this:t=new i,t._prev=e||null,t.onceTimers={},t};i.prototype=s.prototype,s.prototype={end:function(){this.flush()},prev:function(){return this._prev},schedule:function(t,n,r){var i=this._queues,s;i||(i=this._queues={}),s=i[t],s||(s=i[t]=[]);var o=arguments.length>3?e.call(arguments,3):null;return s.push({target:n,method:r,args:o}),this},flush:function(e){function l(e){n(e.target,e.method,e.args)}var i=this._queues,s,o,u,a,f;if(!i)return this;Ember.watch.flushPending();if(e)while(this._queues&&(a=this._queues[e])){this._queues[e]=null;if(e==="sync"){f=Ember.LOG_BINDINGS,f&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges();try{t(a,l)}finally{Ember.endPropertyChanges()}f&&Ember.Logger.log("End: Flush Sync Queue")}else t(a,l)}else{s=Ember.run.queues,u=s.length;do{this._queues=null;for(o=0;o<u;o++){e=s[o],a=i[e];if(a)if(e==="sync"){f=Ember.LOG_BINDINGS,f&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges();try{t(a,l)}finally{Ember.endPropertyChanges()}f&&Ember.Logger.log("End: Flush Sync Queue")}else t(a,l)}}while(i=this._queues)}return r=null,this}},Ember.RunLoop=s,Ember.run=function(e,t){var r,i;o.begin();try{if(e||t)r=n(e,t,arguments,2)}finally{o.end()}return r};var o=Ember.run;Ember.run.begin=function(){o.currentRunLoop=new s(o.currentRunLoop)},Ember.run.end=function(){try{o.currentRunLoop.end()}finally{o.currentRunLoop=o.currentRunLoop.prev()}},Ember.run.queues=["sync","actions","destroy","timers"],Ember.run.schedule=function(e,t,n){var r=o.autorun();r.schedule.apply(r,arguments)};var u;Ember.run.autorun=function(){return o.currentRunLoop||(o.begin(),Ember.testing?o.end():u||(u=setTimeout(a,1))),o.currentRunLoop},Ember.run.sync=function(){o.autorun(),o.currentRunLoop.flush("sync")};var f={},l=!1;Ember.run.later=function(t,n){var r,i,s,u,a;return arguments.length===2&&"function"==typeof t?(a=n,n=t,t=undefined,r=[t,n]):(r=e.call(arguments),a=r.pop()),i=+(new Date)+a,s={target:t,method:n,expires:i,args:r},u=Ember.guidFor(s),f[u]=s,o.once(f,c),u},Ember.run.once=function(t,n){var r=Ember.guidFor(t),i=Ember.guidFor(n),s,u,a=o.autorun().onceTimers;return s=a[r]&&a[r][i],s&&f[s]?f[s].args=e.call(arguments):(u={target:t,method:n,args:e.call(arguments),tguid:r,mguid:i},s=Ember.guidFor(u),f[s]=u,a[r]||(a[r]={}),a[r][i]=s,o.schedule("actions",u,h,s,a)),s};var p=!1;Ember.run.next=function(t,n){var r,i;return r={target:t,method:n,args:e.call(arguments),next:!0},i=Ember.guidFor(r),f[i]=r,p||(p=setTimeout(d,1)),i},Ember.run.cancel=function(e){delete f[e]}}(),function(){function e(e){return e instanceof Array?e:e===undefined||e===null?[]:[e]}function t(e,t){return e instanceof Array?e.length>1?t:e[0]:e}function f(e,t,n,r){var i=e._typeTransform;i&&(t=i(t,e._placeholder));var s=e._transforms,o=s?s.length:0,u;for(u=0;u<o;u++){var a=s[u][r];a&&(t=a.call(this,t,n))}return t}function l(e){return e===undefined||e===null||e===""||Ember.isArray(e)&&i(e,"length")===0}function c(e,t){return s(a(t)?window:e,t)}function h(e,t){var n=t._operation,r;return n?r=n(e,t._from,t._operand):r=c(e,t._from),f(t,r,e,"to")}function p(e,t){var n=s(e,t._to);return f(t,n,e,"from")}function y(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}Ember.LOG_BINDINGS=!!Ember.ENV.LOG_BINDINGS,Ember.BENCHMARK_BINDING_NOTIFICATIONS=!!Ember.ENV.BENCHMARK_BINDING_NOTIFICATIONS,Ember.BENCHMARK_BINDING_SETUP=!!Ember.ENV.BENCHMARK_BINDING_SETUP,Ember.MULTIPLE_PLACEHOLDER="@@MULT@@",Ember.EMPTY_PLACEHOLDER="@@EMPTY@@";var n={to:function(e){return!!e}},r={to:function(t){return!t}},i=Ember.get,s=Ember.getPath,o=Ember.setPath,u=Ember.guidFor,a=Ember.isGlobalPath,d=function(e,t,n){return c(e,t)&&c(e,n)},v=function(e,t,n){return c(e,t)||c(e,n)},m=function(){},g=function(e,t){var n;return this instanceof g?n=this:n=new m,n._direction="fwd",n._from=t,n._to=e,n};m.prototype=g.prototype,g.prototype={copy:function(){var e=new g(this._to,this._from);return this._oneWay&&(e._oneWay=!0),this._transforms&&(e._transforms=this._transforms.slice(0)),this._typeTransform&&(e._typeTransform=this._typeTransform,e._placeholder=this._placeholder),this._operand&&(e._operand=this._operand,e._operation=this._operation),e},from:function(e){return this._from=e,this},to:function(e){return this._to=e,this},oneWay:function(e){return this._oneWay=e===undefined?!0:!!e,this},transform:function(e){return"function"==typeof e&&(e={to:e}),this._transforms||(this._transforms=[]),this._transforms.push(e),this},resetTransforms:function(){return this._transforms=null,this},single:function(e){return e===undefined&&(e=Ember.MULTIPLE_PLACEHOLDER),this._typeTransform=t,this._placeholder=e,this},multiple:function(){return this._typeTransform=e,this._placeholder=null,this},bool:function(){return this.transform(n),this},notEmpty:function(e){if(e===null||e===undefined)e=Ember.EMPTY_PLACEHOLDER;return this.transform({to:function(t){return l(t)?e:t}}),this},notNull:function(e){if(e===null||e===undefined)e=Ember.EMPTY_PLACEHOLDER;return this.transform({to:function(t){return t===null||t===undefined?e:t}}),this},not:function(){return this.transform(r),this},isNull:function(){return this.transform(function(e){return e===null||e===undefined}),this},toString:function(){var e=this._oneWay?"[oneWay]":"";return"Ember.Binding<"+u(this)+">("+this._from+" -> "+this._to+")"+e},connect:function(e){var t=this._oneWay,n=this._operand;return Ember.addObserver(e,this._from,this,this.fromDidChange),n&&Ember.addObserver(e,n,this,this.fromDidChange),t||Ember.addObserver(e,this._to,this,this.toDidChange),Ember.meta(e,!1).proto!==e&&this._scheduleSync(e,"fwd"),this._readyToSync=!0,this},disconnect:function(e){var t=this._oneWay,n=this._operand;return Ember.removeObserver(e,this._from,this,this.fromDidChange),n&&Ember.removeObserver(e,n,this,this.fromDidChange),t||Ember.removeObserver(e,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(e){this._scheduleSync(e,"fwd")},toDidChange:function(e){this._scheduleSync(e,"back")},_scheduleSync:function(e,t){var n=u(e),r=this[n];r||(Ember.run.schedule("sync",this,this._sync,e),this[n]=t),r==="back"&&t==="fwd"&&(this[n]="fwd")},_sync:function(e){var t=Ember.LOG_BINDINGS;if(e.isDestroyed||!this._readyToSync)return;var n=u(e),r=this[n],i=this._from,s=this._to;delete this[n];if(r==="fwd"){var o=h(e,this);t&&Ember.Logger.log(" ",this.toString(),"->",o,e),this._oneWay?Ember.trySetPath(Ember.isGlobalPath(s)?window:e,s,o):Ember._suspendObserver(e,s,this,this.toDidChange,function(){Ember.trySetPath(Ember.isGlobalPath(s)?window:e,s,o)})}else if(r==="back"){var a=p(e,this);t&&Ember.Logger.log(" ",this.toString(),"<-",a,e),Ember._suspendObserver(e,i,this,this.fromDidChange,function(){Ember.trySetPath(Ember.isGlobalPath(i)?window:e,i,a)})}}},y(g,{from:function(){var e=this,t=new e;return t.from.apply(t,arguments)},to:function(){var e=this,t=new e;return t.to.apply(t,arguments)},oneWay:function(e,t){var n=this,r=new n(null,e);return r.oneWay(t)},single:function(e,t){var n=this,r=new n(null,e);return r.single(t)},multiple:function(e){var t=this,n=new t(null,e);return n.multiple()},transform:function(e,t){t||(t=e,e=null);var n=this,r=new n(null,e);return r.transform(t)},notEmpty:function(e,t){var n=this,r=new n(null,e);return r.notEmpty(t)},notNull:function(e,t){var n=this,r=new n(null,e);return r.notNull(t)},bool:function(e){var t=this,n=new t(null,e);return n.bool()},not:function(e){var t=this,n=new t(null,e);return n.not()},isNull:function(e){var t=this,n=new t(null,e);return n.isNull()},and:function(e,t){var n=this,r=(new n(null,e)).oneWay();return r._operand=t,r._operation=d,r},or:function(e,t){var n=this,r=(new n(null,e)).oneWay();return r._operand=t,r._operation=v,r},registerTransform:function(e,t){this.prototype[e]=t,this[e]=function(t){var n=this,r=new n(null,t),i;return i=Array.prototype.slice.call(arguments,1),r[e].apply(r,i)}}}),Ember.Binding=g,Ember.bind=function(e,t,n){return(new Ember.Binding(t,n)).connect(e)},Ember.oneWay=function(e,t,n){return(new Ember.Binding(t,n)).oneWay().connect(e)}}(),function(){function p(e,t){var n=Ember.meta(e,t!==!1),r=n.mixins;return t===!1?r||l:(r?r.__emberproto__!==e&&(r=n.mixins=h(r),r.__emberproto__=e):r=n.mixins={__emberproto__:e},r)}function d(t,n){return n&&n.length>0&&(t.mixins=o(n,function(t){if(t instanceof e)return t;var n=new e;return n.properties=t,n})),t}function m(e){return"function"!=typeof e||e.isMethod===!1?!1:u(v,e)<0}function g(t,r,i,s,o){function w(e){delete i[e],delete s[e]}var f=t.length,l,c,h,p,d,v,y,b;for(l=0;l<f;l++){c=t[l];if(!c)throw new Error("Null value found in Ember.mixin()");if(c instanceof e){h=Ember.guidFor(c);if(r[h])continue;r[h]=c,p=c.properties}else p=c;if(p){b=s.concatenatedProperties||o.concatenatedProperties,p.concatenatedProperties&&(b=b?b.concat(p.concatenatedProperties):p.concatenatedProperties);for(v in p){if(!p.hasOwnProperty(v))continue;d=p[v];if(d instanceof Ember.Descriptor){if(d===n&&i[v])continue;i[v]=d,s[v]=undefined}else{if(m(d)){y=i[v]===Ember.SIMPLE_PROPERTY&&s[v],y||(y=o[v]),"function"!=typeof y&&(y=null);if(y){var E=d.__ember_observes__,S=d.__ember_observesBefore__;d=Ember.wrap(d,y),d.__ember_observes__=E,d.__ember_observesBefore__=S}}else if(b&&u(b,v)>=0||v==="concatenatedProperties"){var x=s[v]||o[v];d=x?x.concat(d):Ember.makeArray(d)}i[v]=Ember.SIMPLE_PROPERTY,s[v]=d}}p.hasOwnProperty("toString")&&(o.toString=p.toString)}else c.mixins&&(g(c.mixins,r,i,s,o),c._without&&a(c._without,w))}}function b(e){var t=Ember.meta(e),n=t.required;if(!n||n.__emberproto__!==e)n=t.required=n?h(n):{__ember_count__:0},n.__emberproto__=e;return n}function w(e){return"function"==typeof e&&e.__ember_observes__}function E(e){return"function"==typeof e&&e.__ember_observesBefore__}function x(e,t,n){if(S.test(t)){var r=n.bindings;r?r.__emberproto__!==e&&(r=n.bindings=h(n.bindings),r.__emberproto__=e):r=n.bindings={__emberproto__:e},r[t]=!0}}function T(e,t){t===undefined&&(t=Ember.meta(e));var n=t.bindings,r,i;if(n)for(r in n)i=r!=="__emberproto__"&&e[r],i&&(i instanceof Ember.Binding?(i=i.copy(),i.to(r.slice(0,-7))):i=new Ember.Binding(r.slice(0,-7),i),i.connect(e),e[r]=i)}function N(e,i,s){var o={},u={},a=Ember.meta(e),f=a.required,l,h,d,v,m;g(i,p(e),o,u,e),t.detect(e)&&(h=u.willApplyProperty||e.willApplyProperty,d=u.didApplyProperty||e.didApplyProperty);for(l in o){if(!o.hasOwnProperty(l))continue;m=o[l],v=u[l];if(m===n){if(!(l in e)){if(!s)throw new Error("Required property not defined: "+l);f=b(e),f.__ember_count__++,f[l]=!0}}else{while(m instanceof r){var S=m.methodName;o[S]?(v=u[S],m=o[S]):a.descs[S]?(m=a.descs[S],v=m.val(e,S)):(v=e[S],m=Ember.SIMPLE_PROPERTY)}h&&h.call(e,l);var N=w(v),C=N&&w(e[l]),k=E(v),L=k&&E(e[l]),A,O;if(C){A=C.length;for(O=0;O<A;O++)Ember.removeObserver(e,C[O],null,l)}if(L){A=L.length;for(O=0;O<A;O++)Ember.removeBeforeObserver(e,L[O],null,l)}x(e,l,a),y(e,l,m,v);if(N){A=N.length;for(O=0;O<A;O++)Ember.addObserver(e,N[O],null,l)}if(k){A=k.length;for(O=0;O<A;O++)Ember.addBeforeObserver(e,k[O],null,l)}f&&f[l]&&(f=b(e),f.__ember_count__--,f[l]=!1),d&&d.call(e,l)}}s||(v=T(e,a));if(!s&&f&&f.__ember_count__>0){var M=[];for(l in f){if(c[l])continue;M.push(l)}throw new Error("Required properties not defined: "+M.join(","))}return e}function k(e,t,n){var r=Ember.guidFor(e);if(n[r])return!1;n[r]=!0;if(e===t)return!0;var i=e.mixins,s=i?i.length:0;while(--s>=0)if(k(i[s],t,n))return!0;return!1}function L(e,t,n){if(n[Ember.guidFor(t)])return;n[Ember.guidFor(t)]=!0;if(t.properties){var r=t.properties;for(var i in r)r.hasOwnProperty(i)&&(e[i]=!0)}else t.mixins&&a(t.mixins,function(t){L(e,t,n)})}function M(e,t,n){var r=e.length;for(var s in t){if(!t.hasOwnProperty||!t.hasOwnProperty(s))continue;var o=t[s];e[r]=s;if(o&&o.toString===i)o[A]=e.join(".");else if(o&&O(o,"isNamespace")){if(n[Ember.guidFor(o)])continue;n[Ember.guidFor(o)]=!0,M(e,o,n)}}e.length=r}function _(){var e=Ember.Namespace,t,n;if(e.PROCESSED)return;for(var r in window){if(r==="globalStorage"&&window.StorageList&&window.globalStorage instanceof window.StorageList)continue;if(window.hasOwnProperty&&!window.hasOwnProperty(r))continue;try{t=window[r],n=t&&O(t,"isNamespace")}catch(i){continue}n&&(t[A]=r)}}var e,t,n,r,i,s,o=Ember.ArrayUtils.map,u=Ember.ArrayUtils.indexOf,a=Ember.ArrayUtils.forEach,f=Array.prototype.slice,l={},c={__emberproto__:!0,__ember_count__:!0},h=Ember.platform.create,v=[Boolean,Object,Number,Array,Date,String],y=Ember.defineProperty,S=Ember.IS_BINDING=/^.+Binding$/;Ember.mixin=function(e){var t=f.call(arguments,1);return N(e,t,!1)},Ember.Mixin=function(){return d(this,arguments)},e=Ember.Mixin,e._apply=N,e.applyPartial=function(e){var t=f.call(arguments,1);return N(e,t,!0)},e.finishPartial=function(e){return T(e),e},e.create=function(){i.processed=!1;var e=this;return d(new e,arguments)},e.prototype.reopen=function(){var t,n;this.properties&&(t=e.create(),t.properties=this.properties,delete this.properties,this.mixins=[t]);var r=arguments.length,i=this.mixins,s;for(s=0;s<r;s++)t=arguments[s],t instanceof e?i.push(t):(n=e.create(),n.properties=t,i.push(n));return this};var C=[];e.prototype.apply=function(e){C[0]=this;var t=N(e,C,!1);return C.length=0,t},e.prototype.applyPartial=function(e){C[0]=this;var t=N(e,C,!0);return C.length=0,t},e.prototype.detect=function(t){return t?t instanceof e?k(t,this,{}):!!p(t,!1)[Ember.guidFor(this)]:!1},e.prototype.without=function(){var t=new e(this);return t._without=f.call(arguments),t},e.prototype.keys=function(){var e={},t={},n=[];L(e,this,t);for(var r in e)e.hasOwnProperty(r)&&n.push(r);return n};var A=Ember.GUID_KEY+"_name",O=Ember.get;Ember.identifyNamespaces=_,s=function(e){var t=e.superclass;if(t)return t[A]?t[A]:s(t);return},i=function(){var e=Ember.Namespace,t;if(e&&!this[A]&&!i.processed){e.PROCESSED||(_(),e.PROCESSED=!0),i.processed=!0;var n=e.NAMESPACES;for(var r=0,o=n.length;r<o;r++)t=n[r],M([t.toString()],t,{})}if(this[A])return this[A];var u=s(this);return u?"(subclass of "+u+")":"(unknown mixin)"},e.prototype.toString=i,e.mixins=function(e){var t=[],n=p(e,!1),r,i;for(r in n){if(c[r])continue;i=n[r],i.properties||t.push(n[r])}return t},n=new Ember.Descriptor,n.toString=function(){return"(Required Property)"},Ember.required=function(){return n},r=function(e){this.methodName=e},r.prototype=new Ember.Descriptor,Ember.alias=function(e){return new r(e)},Ember.MixinDelegate=e.create({willApplyProperty:Ember.required(),didApplyProperty:Ember.required()}),t=Ember.MixinDelegate,Ember.observer=function(e){var t=f.call(arguments,1);return e.__ember_observes__=t,e},Ember.beforeObserver=function(e){var t=f.call(arguments,1);return e.__ember_observesBefore__=t,e}}(),function(){}(),function(){}(),function(){function i(t,n,r,s){var o,u,a;if("object"!=typeof t||t===null)return t;if(n&&(u=e(r,t))>=0)return s[u];if(Ember.typeOf(t)==="array"){o=t.slice();if(n){u=o.length;while(--u>=0)o[u]=i(o[u],n,r,s)}}else if(Ember.Copyable&&Ember.Copyable.detect(t))o=t.copy(n,r,s);else{o={};for(a in t){if(!t.hasOwnProperty(a))continue;o[a]=n?i(t[a],n,r,s):t[a]}}return n&&(r.push(t),s.push(o)),o}var e=Ember.ArrayUtils.indexOf,t={},n="Boolean Number String Function Array Date RegExp Object".split(" ");Ember.ArrayUtils.forEach(n,function(e){t["[object "+e+"]"]=e.toLowerCase()});var r=Object.prototype.toString;Ember.typeOf=function(e){var n;return n=e===null||e===undefined?String(e):t[r.call(e)]||"object",n==="function"?Ember.Object&&Ember.Object.detect(e)&&(n="class"):n==="object"&&(e instanceof Error?n="error":Ember.Object&&e instanceof Ember.Object?n="instance":n="object"),n},Ember.none=function(e){return e===null||e===undefined},Ember.empty=function(e){return e===null||e===undefined||e.length===0&&typeof e!="function"},Ember.compare=function s(e,t){if(e===t)return 0;var n=Ember.typeOf(e),r=Ember.typeOf(t),i=Ember.Comparable;if(i){if(n==="instance"&&i.detect(e.constructor))return e.constructor.compare(e,t);if(r==="instance"&&i.detect(t.constructor))return 1-t.constructor.compare(t,e)}var o=Ember.ORDER_DEFINITION_MAPPING;if(!o){var u=Ember.ORDER_DEFINITION;o=Ember.ORDER_DEFINITION_MAPPING={};var a,f;for(a=0,f=u.length;a<f;++a)o[u[a]]=a;delete Ember.ORDER_DEFINITION}var l=o[n],c=o[r];if(l<c)return-1;if(l>c)return 1;switch(n){case"boolean":case"number":if(e<t)return-1;if(e>t)return 1;return 0;case"string":var h=e.localeCompare(t);if(h<0)return-1;if(h>0)return 1;return 0;case"array":var p=e.length,d=t.length,v=Math.min(p,d),m=0,g=0;while(m===0&&g<v)m=s(e[g],t[g]),g++;if(m!==0)return m;if(p<d)return-1;if(p>d)return 1;return 0;case"instance":if(Ember.Comparable&&Ember.Comparable.detect(e))return e.compare(e,t);return 0;default:return 0}},Ember.copy=function(e,t){return"object"!=typeof e||e===null?e:Ember.Copyable&&Ember.Copyable.detect(e)?e.copy(t):i(e,t,t?[]:null,t?[]:null)},Ember.inspect=function(e){var t,n=[];for(var r in e)if(e.hasOwnProperty(r)){t=e[r];if(t==="toString")continue;Ember.typeOf(t)==="function"&&(t="function() { ... }"),n.push(r+": "+t)}return"{"+n.join(" , ")+"}"},Ember.isEqual=function(e,t){return e&&"function"==typeof e.isEqual?e.isEqual(t):e===t},Ember.ORDER_DEFINITION=Ember.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class"],Ember.keys=Object.keys,Ember.keys||(Ember.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),Ember.Error=function(){var e=Error.prototype.constructor.apply(this,arguments);for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.message=e.message},Ember.Error.prototype=Ember.create(Error.prototype)}(),function(){var e=/[ _]/g,t={},n=/([a-z])([A-Z])/g,r=/(\-|_|\s)+(.)?/g,i=/([a-z\d])([A-Z]+)/g,s=/\-|\s+/g;Ember.STRINGS={},Ember.String={fmt:function(e,t){var n=0;return e.replace(/%@([0-9]+)?/g,function(e,r){return r=r?parseInt(r,0)-1:n++,e=t[r],(e===null?"(null)":e===undefined?"":e).toString()})},loc:function(e,t){return e=Ember.STRINGS[e]||e,Ember.String.fmt(e,t)},w:function(e){return e.split(/\s+/)},decamelize:function(e){return e.replace(n,"$1_$2").toLowerCase()},dasherize:function(n){var r=t,i=r[n];return i?i:(i=Ember.String.decamelize(n).replace(e,"-"),r[n]=i,i)},camelize:function(e){return e.replace(r,function(e,t,n){return n?n.toUpperCase():""})},underscore:function(e){return e.replace(i,"$1_$2").replace(s,"_").toLowerCase()}}}(),function(){var e=Ember.String.fmt,t=Ember.String.w,n=Ember.String.loc,r=Ember.String.camelize,i=Ember.String.decamelize,s=Ember.String.dasherize,o=Ember.String.underscore;Ember.EXTEND_PROTOTYPES&&(String.prototype.fmt=function(){return e(this,arguments)},String.prototype.w=function(){return t(this)},String.prototype.loc=function(){return n(this,arguments)},String.prototype.camelize=function(){return r(this)},String.prototype.decamelize=function(){return i(this)},String.prototype.dasherize=function(){return s(this)},String.prototype.underscore=function(){return o(this)})}(),function(){var e=Array.prototype.slice;Ember.EXTEND_PROTOTYPES&&(Function.prototype.property=function(){var e=Ember.computed(this);return e.property.apply(e,arguments)},Function.prototype.observes=function(){return this.__ember_observes__=e.call(arguments),this},Function.prototype.observesBefore=function(){return this.__ember_observesBefore__=e.call(arguments),this})}(),function(){}(),function(){function s(){return i.length===0?{}:i.pop()}function o(e){return i.push(e),null}function u(t,n){function i(i){var s=e(i,t);return r?n===s:!!s}var r=arguments.length===2;return i}function a(e,t,n){t.call(e,n[0],n[2],n[3])}var e=Ember.get,t=Ember.set,n=Array.prototype.slice,r=Ember.ArrayUtils.indexOf,i=[];Ember.Enumerable=Ember.Mixin.create({isEnumerable:!0,nextObject:Ember.required(Function),firstObject:Ember.computed(function(){if(e(this,"length")===0)return undefined;var t=s(),n;return n=this.nextObject(0,null,t),o(t),n}).property("[]").cacheable(),lastObject:Ember.computed(function(){var t=e(this,"length");if(t===0)return undefined;var n=s(),r=0,i,u=null;do u=i,i=this.nextObject(r++,u,n);while(i!==undefined);return o(n),u}).property("[]").cacheable(),contains:function(e){return this.find(function(t){return t===e})!==undefined},forEach:function(t,n){if(typeof t!="function")throw new TypeError;var r=e(this,"length"),i=null,u=s();n===undefined&&(n=null);for(var a=0;a<r;a++){var f=this.nextObject(a,i,u);t.call(n,f,a,this),i=f}return i=null,u=o(u),this},getEach:function(e){return this.mapProperty(e)},setEach:function(e,n){return this.forEach(function(r){t(r,e,n)})},map:function(e,t){var n=[];return this.forEach(function(r,i,s){n[i]=e.call(t,r,i,s)}),n},mapProperty:function(t){return this.map(function(n){return e(n,t)})},filter:function(e,t){var n=[];return this.forEach(function(r,i,s){e.call(t,r,i,s)&&n.push(r)}),n},filterProperty:function(e,t){return this.filter(u.apply(this,arguments))},find:function(t,n){var r=e(this,"length");n===undefined&&(n=null);var i=null,u,a=!1,f,l=s();for(var c=0;c<r&&!a;c++){u=this.nextObject(c,i,l);if(a=t.call(n,u,c,this))f=u;i=u}return u=i=null,l=o(l),f},findProperty:function(e,t){return this.find(u.apply(this,arguments))},every:function(e,t){return!this.find(function(n,r,i){return!e.call(t,n,r,i)})},everyProperty:function(e,t){return this.every(u.apply(this,arguments))},some:function(e,t){return!!this.find(function(n,r,i){return!!e.call(t,n,r,i)})},someProperty:function(e,t){return this.some(u.apply(this,arguments))},reduce:function(e,t,n){if(typeof e!="function")throw new TypeError;var r=t;return this.forEach(function(t,i){r=e.call(null,r,t,i,this,n)},this),r},invoke:function(e){var t,r=[];return arguments.length>1&&(t=n.call(arguments,1)),this.forEach(function(n,i){var s=n&&n[e];"function"==typeof s&&(r[i]=t?s.apply(n,t):s.call(n))},this),r},toArray:function(){var e=[];return this.forEach(function(t,n){e[n]=t}),e},compact:function(){return this.without(null)},without:function(e){if(!this.contains(e))return this;var t=[];return this.forEach(function(n){n!==e&&(t[t.length]=n)}),t},uniq:function(){var e=[];return this.forEach(function(t){r(e,t)<0&&e.push(t)}),e},"[]":Ember.computed(function(e,t){return this}).property().cacheable(),addEnumerableObserver:function(t,n){var r=n&&n.willChange||"enumerableWillChange",i=n&&n.didChange||"enumerableDidChange",s=e(this,"hasEnumerableObservers");return s||Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.addListener(this,"@enumerable:before",t,r,a),Ember.addListener(this,"@enumerable:change",t,i,a),s||Ember.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(t,n){var r=n&&n.willChange||"enumerableWillChange",i=n&&n.didChange||"enumerableDidChange",s=e(this,"hasEnumerableObservers");return s&&Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.removeListener(this,"@enumerable:before",t,r),Ember.removeListener(this,"@enumerable:change",t,i),s&&Ember.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:Ember.computed(function(){return Ember.hasListeners(this,"@enumerable:change")||Ember.hasListeners(this,"@enumerable:before")}).property().cacheable(),enumerableContentWillChange:function(t,n){var r,i,s;return"number"==typeof t?r=t:t?r=e(t,"length"):r=t=-1,"number"==typeof n?i=n:n?i=e(n,"length"):i=n=-1,s=i<0||r<0||i-r!==0,t===-1&&(t=null),n===-1&&(n=null),Ember.propertyWillChange(this,"[]"),s&&Ember.propertyWillChange(this,"length"),Ember.sendEvent(this,"@enumerable:before",t,n),this},enumerableContentDidChange:function(t,n){var r=this.propertyDidChange,i,s,o;return"number"==typeof t?i=t:t?i=e(t,"length"):i=t=-1,"number"==typeof n?s=n:n?s=e(n,"length"):s=n=-1,o=s<0||i<0||s-i!==0,t===-1&&(t=null),n===-1&&(n=null),Ember.sendEvent(this,"@enumerable:change",t,n),o&&Ember.propertyDidChange(this,"length"),Ember.propertyDidChange(this,"[]"),this}})}(),function(){function s(e){return e===null||e===undefined}function o(e,t,n){t.call(e,n[0],n[2],n[3],n[4])}var e=Ember.get,t=Ember.set,n=Ember.meta,r=Ember.ArrayUtils.map,i=Ember.cacheFor;Ember.Array=Ember.Mixin.create(Ember.Enumerable,{isSCArray:!0,length:Ember.required(),objectAt:function(t){return t<0||t>=e(this,"length")?undefined:e(this,t)},objectsAt:function(e){var t=this;return r(e,function(e){return t.objectAt(e)})},nextObject:function(e){return this.objectAt(e)},"[]":Ember.computed(function(t,n){return n!==undefined&&this.replace(0,e(this,"length"),n),this}).property().cacheable(),firstObject:Ember.computed(function(){return this.objectAt(0)}).property().cacheable(),lastObject:Ember.computed(function(){return this.objectAt(e(this,"length")-1)}).property().cacheable(),contains:function(e){return this.indexOf(e)>=0},slice:function(t,n){var r=[],i=e(this,"length");s(t)&&(t=0);if(s(n)||n>i)n=i;while(t<n)r[r.length]=this.objectAt(t++);return r},indexOf:function(t,n){var r,i=e(this,"length");n===undefined&&(n=0),n<0&&(n+=i);for(r=n;r<i;r++)if(this.objectAt(r,!0)===t)return r;return-1},lastIndexOf:function(t,n){var r,i=e(this,"length");if(n===undefined||n>=i)n=i-1;n<0&&(n+=i);for(r=n;r>=0;r--)if(this.objectAt(r)===t)return r;return-1},addArrayObserver:function(t,n){var r=n&&n.willChange||"arrayWillChange",i=n&&n.didChange||"arrayDidChange",s=e(this,"hasArrayObservers");return s||Ember.propertyWillChange(this,"hasArrayObservers"),Ember.addListener(this,"@array:before",t,r,o),Ember.addListener(this,"@array:change",t,i,o),s||Ember.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(t,n){var r=n&&n.willChange||"arrayWillChange",i=n&&n.didChange||"arrayDidChange",s=e(this,"hasArrayObservers");return s&&Ember.propertyWillChange(this,"hasArrayObservers"),Ember.removeListener(this,"@array:before",t,r,o),Ember.removeListener(this,"@array:change",t,i,o),s&&Ember.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:Ember.computed(function(){return Ember.hasListeners(this,"@array:change")||Ember.hasListeners(this,"@array:before")}).property().cacheable(),arrayContentWillChange:function(t,n,r){t===undefined?(t=0,n=r=-1):(n===undefined&&(n=-1),r===undefined&&(r=-1)),Ember.sendEvent(this,"@array:before",t,n,r);var i,s;if(t>=0&&n>=0&&e(this,"hasEnumerableObservers")){i=[],s=t+n;for(var o=t;o<s;o++)i.push(this.objectAt(o))}else i=n;return this.enumerableContentWillChange(i,r),Ember.isWatching(this,"@each")&&e(this,"@each"),this},arrayContentDidChange:function(t,n,r){t===undefined?(t=0,n=r=-1):(n===undefined&&(n=-1),r===undefined&&(r=-1));var s,o;if(t>=0&&r>=0&&e(this,"hasEnumerableObservers")){s=[],o=t+r;for(var u=t;u<o;u++)s.push(this.objectAt(u))}else s=r;this.enumerableContentDidChange(n,s),Ember.sendEvent(this,"@array:change",t,n,r);var a=e(this,"length"),f=i(this,"firstObject"),l=i(this,"lastObject");return this.objectAt(0)!==f&&(Ember.propertyWillChange(this,"firstObject"),Ember.propertyDidChange(this,"firstObject")),this.objectAt(a-1)!==l&&(Ember.propertyWillChange(this,"lastObject"),Ember.propertyDidChange(this,"lastObject")),this},"@each":Ember.computed(function(){return this.__each||(this.__each=new Ember.EachProxy(this)),this.__each}).property().cacheable()})}(),function(){Ember.Comparable=Ember.Mixin.create({isComparable:!0,compare:Ember.required(Function)})}(),function(){var e=Ember.get,t=Ember.set;Ember.Copyable=Ember.Mixin.create({copy:Ember.required(Function),frozenCopy:function(){if(Ember.Freezable&&Ember.Freezable.detect(this))return e(this,"isFrozen")?this:this.copy().freeze();throw new Error(Ember.String.fmt("%@ does not support freezing",[this]))}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Freezable=Ember.Mixin.create({isFrozen:!1,freeze:function(){return e(this,"isFrozen")?this:(t(this,"isFrozen",!0),this)}}),Ember.FROZEN_ERROR="Frozen object cannot be modified."}(),function(){var e=Ember.ArrayUtils.forEach;Ember.MutableEnumerable=Ember.Mixin.create(Ember.Enumerable,{addObject:Ember.required(Function),addObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.addObject(e)},this),Ember.endPropertyChanges(this),this},removeObject:Ember.required(Function),removeObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.removeObject(e)},this),Ember.endPropertyChanges(this),this}})}(),function(){var e="Index out of range",t=[],n=Ember.get,r=Ember.set,i=Ember.ArrayUtils.forEach;Ember.MutableArray=Ember.Mixin.create(Ember.Array,Ember.MutableEnumerable,{replace:Ember.required(),clear:function(){var e=n(this,"length");return e===0?this:(this.replace(0,e,t),this)},insertAt:function(t,r){if(t>n(this,"length"))throw new Error(e);return this.replace(t,0,[r]),this},removeAt:function(r,i){var s=0;if("number"==typeof r){if(r<0||r>=n(this,"length"))throw new Error(e);i===undefined&&(i=1),this.replace(r,i,t)}return this},pushObject:function(e){return this.insertAt(n(this,"length"),e),e},pushObjects:function(e){return this.replace(n(this,"length"),0,e),this},popObject:function(){var e=n(this,"length");if(e===0)return null;var t=this.objectAt(e-1);return this.removeAt(e-1,1),t},shiftObject:function(){if(n(this,"length")===0)return null;var e=this.objectAt(0);return this.removeAt(0),e},unshiftObject:function(e){return this.insertAt(0,e),e},unshiftObjects:function(e){return this.replace(0,0,e),this},removeObject:function(e){var t=n(this,"length")||0;while(--t>=0){var r=this.objectAt(t);r===e&&this.removeAt(t)}return this},addObject:function(e){return this.contains(e)||this.pushObject(e),this}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Observable=Ember.Mixin.create({isObserverable:!0,get:function(t){return e(this,t)},getProperties:function(){
var t={},n=arguments;arguments.length===1&&Ember.typeOf(arguments[0])==="array"&&(n=arguments[0]);for(var r=0;r<n.length;r++)t[n[r]]=e(this,n[r]);return t},set:function(e,n){return t(this,e,n),this},setProperties:function(e){return Ember.setProperties(this,e)},beginPropertyChanges:function(){return Ember.beginPropertyChanges(),this},endPropertyChanges:function(){return Ember.endPropertyChanges(),this},propertyWillChange:function(e){return Ember.propertyWillChange(this,e),this},propertyDidChange:function(e){return Ember.propertyDidChange(this,e),this},notifyPropertyChange:function(e){return this.propertyWillChange(e),this.propertyDidChange(e),this},addObserver:function(e,t,n){Ember.addObserver(this,e,t,n)},removeObserver:function(e,t,n){Ember.removeObserver(this,e,t,n)},hasObserverFor:function(e){return Ember.hasListeners(this,e+":change")},unknownProperty:function(e){return undefined},setUnknownProperty:function(e,t){this[e]=t},getPath:function(e){return Ember.getPath(this,e)},setPath:function(e,t){return Ember.setPath(this,e,t),this},getWithDefault:function(e,t){return Ember.getWithDefault(this,e,t)},incrementProperty:function(n,r){return r||(r=1),t(this,n,(e(this,n)||0)+r),e(this,n)},decrementProperty:function(n,r){return r||(r=1),t(this,n,(e(this,n)||0)-r),e(this,n)},toggleProperty:function(n){return t(this,n,!e(this,n)),e(this,n)},cacheFor:function(e){return Ember.cacheFor(this,e)},observersForKey:function(e){return Ember.observersFor(this,e)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.getPath;Ember.TargetActionSupport=Ember.Mixin.create({target:null,action:null,targetObject:Ember.computed(function(){var t=e(this,"target");if(Ember.typeOf(t)==="string"){var r=n(this,t);return r===undefined&&(r=n(window,t)),r}return t}).property("target").cacheable(),triggerAction:function(){var t=e(this,"action"),n=e(this,"targetObject");if(n&&t){var r;return typeof n.send=="function"?r=n.send(t,this):(typeof t=="string"&&(t=n[t]),r=t.call(n,this)),r!==!1&&(r=!0),r}return!1}})}(),function(){function r(e,t,r){var i=n.call(r,2);t.apply(e,i)}var e=Ember.get,t=Ember.set,n=Array.prototype.slice;Ember.Evented=Ember.Mixin.create({on:function(e,t,n){n||(n=t,t=null),Ember.addListener(this,e,t,n,r)},fire:function(e){Ember.sendEvent.apply(null,[this,e].concat(n.call(arguments,1)))},off:function(e,t,n){Ember.removeListener(this,e,t,n)}})}(),function(){}(),function(){function a(){var n=!1,r,i=!1,o=!1,a=function(){n||a.proto(),r?(this.reopen.apply(this,r),r=null,e(this),Ember.Mixin.finishPartial(this),this.init.apply(this,arguments)):(o?e(this):(Ember.GUID_DESC.value=undefined,s(this,Ember.GUID_KEY,Ember.GUID_DESC)),i===!1&&(i=this.init),Ember.GUID_DESC.value=undefined,s(this,"_super",Ember.GUID_DESC),Ember.Mixin.finishPartial(this),i.apply(this,arguments))};return a.toString=t,a.willReopen=function(){n&&(a.PrototypeMixin=Ember.Mixin.create(a.PrototypeMixin)),n=!1},a._initMixins=function(e){r=e},a.proto=function(){var e=a.superclass;return e&&e.proto(),n||(n=!0,a.PrototypeMixin.applyPartial(a.prototype),Ember.rewatch(a.prototype),o=!!u(a.prototype,!1).chains),this.prototype},a}var e=Ember.rewatch,t=Ember.Mixin.prototype.toString,n=Ember.set,r=Ember.get,i=Ember.platform.create,s=Ember.platform.defineProperty,o=Array.prototype.slice,u=Ember.meta,f=a();f.PrototypeMixin=Ember.Mixin.create({reopen:function(){return Ember.Mixin._apply(this,arguments,!0),this},isInstance:!0,init:function(){},isDestroyed:!1,isDestroying:!1,destroy:function(){if(this.isDestroying)return;return this.isDestroying=!0,this.willDestroy&&this.willDestroy(),n(this,"isDestroyed",!0),Ember.run.schedule("destroy",this,this._scheduledDestroy),this},_scheduledDestroy:function(){Ember.destroy(this),this.didDestroy&&this.didDestroy()},bind:function(e,t){return t instanceof Ember.Binding||(t=Ember.Binding.from(t)),t.to(e).connect(this),t},toString:function(){return"<"+this.constructor.toString()+":"+Ember.guidFor(this)+">"}}),f.__super__=null;var l=Ember.Mixin.create({ClassMixin:Ember.required(),PrototypeMixin:Ember.required(),isClass:!0,isMethod:!1,extend:function(){var e=a(),t;e.ClassMixin=Ember.Mixin.create(this.ClassMixin),e.PrototypeMixin=Ember.Mixin.create(this.PrototypeMixin),e.ClassMixin.ownerConstructor=e,e.PrototypeMixin.ownerConstructor=e;var n=e.PrototypeMixin;return n.reopen.apply(n,arguments),e.superclass=this,e.__super__=this.prototype,t=e.prototype=i(this.prototype),t.constructor=e,Ember.generateGuid(t,"ember"),u(t).proto=t,e.subclasses=Ember.Set?new Ember.Set:null,this.subclasses&&this.subclasses.add(e),e.ClassMixin.apply(e),e},create:function(){var e=this;return arguments.length>0&&this._initMixins(arguments),new e},reopen:function(){this.willReopen();var e=this.PrototypeMixin;return e.reopen.apply(e,arguments),this},reopenClass:function(){var e=this.ClassMixin;return e.reopen.apply(e,arguments),Ember.Mixin._apply(this,arguments,!1),this},detect:function(e){if("function"!=typeof e)return!1;while(e){if(e===this)return!0;e=e.superclass}return!1},detectInstance:function(e){return e instanceof this},metaForProperty:function(e){var t=u(this.proto(),!1).descs[e];return t._meta||{}},eachComputedProperty:function(e,t){var n=this.proto(),r=u(n).descs,i={},s;for(var o in r)s=r[o],s instanceof Ember.ComputedProperty&&e.call(t||this,o,s._meta||i)}});f.ClassMixin=l,l.apply(f),Ember.CoreObject=f}(),function(){var e=Ember.get,t=Ember.set,n=Ember.guidFor,r=Ember.none;Ember.Set=Ember.CoreObject.extend(Ember.MutableEnumerable,Ember.Copyable,Ember.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Error(Ember.FROZEN_ERROR);var r=e(this,"length");if(r===0)return this;var i;this.enumerableContentWillChange(r,0),Ember.propertyWillChange(this,"firstObject"),Ember.propertyWillChange(this,"lastObject");for(var s=0;s<r;s++)i=n(this[s]),delete this[i],delete this[s];return t(this,"length",0),Ember.propertyDidChange(this,"firstObject"),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(r,0),this},isEqual:function(t){if(!Ember.Enumerable.detect(t))return!1;var n=e(this,"length");if(e(t,"length")!==n)return!1;while(--n>=0)if(!t.contains(this[n]))return!1;return!0},add:Ember.alias("addObject"),remove:Ember.alias("removeObject"),pop:function(){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);var t=this.length>0?this[this.length-1]:null;return this.remove(t),t},push:Ember.alias("addObject"),shift:Ember.alias("pop"),unshift:Ember.alias("push"),addEach:Ember.alias("addObjects"),removeEach:Ember.alias("removeObjects"),init:function(e){this._super(),e&&this.addObjects(e)},nextObject:function(e){return this[e]},firstObject:Ember.computed(function(){return this.length>0?this[0]:undefined}).property().cacheable(),lastObject:Ember.computed(function(){return this.length>0?this[this.length-1]:undefined}).property().cacheable(),addObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(r(i))return this;var s=n(i),o=this[s],u=e(this,"length"),a;return o>=0&&o<u&&this[o]===i?this:(a=[i],this.enumerableContentWillChange(null,a),Ember.propertyWillChange(this,"lastObject"),u=e(this,"length"),this[s]=u,this[u]=i,t(this,"length",u+1),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(null,a),this)},removeObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(r(i))return this;var s=n(i),o=this[s],u=e(this,"length"),a=o===0,f=o===u-1,l,c;return o>=0&&o<u&&this[o]===i&&(c=[i],this.enumerableContentWillChange(c,null),a&&Ember.propertyWillChange(this,"firstObject"),f&&Ember.propertyWillChange(this,"lastObject"),o<u-1&&(l=this[u-1],this[o]=l,this[n(l)]=o),delete this[s],delete this[u-1],t(this,"length",u-1),a&&Ember.propertyDidChange(this,"firstObject"),f&&Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(c,null)),this},contains:function(e){return this[n(e)]>=0},copy:function(){var r=this.constructor,i=new r,s=e(this,"length");t(i,"length",s);while(--s>=0)i[s]=this[s],i[n(this[s])]=s;return i},toString:function(){var e=this.length,t,n=[];for(t=0;t<e;t++)n[t]=this[t];return"Ember.Set<%@>".fmt(n.join(","))}})}(),function(){Ember.CoreObject.subclasses=new Ember.Set,Ember.Object=Ember.CoreObject.extend(Ember.Observable)}(),function(){var e=Ember.ArrayUtils.indexOf;Ember.Namespace=Ember.Object.extend({isNamespace:!0,init:function(){Ember.Namespace.NAMESPACES.push(this),Ember.Namespace.PROCESSED=!1},toString:function(){return Ember.identifyNamespaces(),this[Ember.GUID_KEY+"_name"]},destroy:function(){var t=Ember.Namespace.NAMESPACES;window[this.toString()]=undefined,t.splice(e(t,this),1),this._super()}}),Ember.Namespace.NAMESPACES=[Ember],Ember.Namespace.PROCESSED=!1}(),function(){Ember.Application=Ember.Namespace.extend()}(),function(){var e=Ember.get,t=Ember.set;Ember.ArrayProxy=Ember.Object.extend(Ember.MutableArray,{content:null,objectAtContent:function(t){return e(this,"content").objectAt(t)},replaceContent:function(t,n,r){e(this,"content").replace(t,n,r)},contentWillChange:Ember.beforeObserver(function(){var t=e(this,"content"),n=t?e(t,"length"):0;this.arrayWillChange(t,0,n,undefined),t&&t.removeArrayObserver(this)},"content"),contentDidChange:Ember.observer(function(){var t=e(this,"content"),n=t?e(t,"length"):0;t&&t.addArrayObserver(this),this.arrayDidChange(t,0,undefined,n)},"content"),objectAt:function(t){return e(this,"content")&&this.objectAtContent(t)},length:Ember.computed(function(){var t=e(this,"content");return t?e(t,"length"):0}).property().cacheable(),replace:function(t,n,r){return e(this,"content")&&this.replaceContent(t,n,r),this},arrayWillChange:function(e,t,n,r){this.arrayContentWillChange(t,n,r)},arrayDidChange:function(e,t,n,r){this.arrayContentDidChange(t,n,r)},init:function(){this._super(),this.contentWillChange(),this.contentDidChange()}})}(),function(){function o(e,t,r,i,s){var o=r._objects,u;o||(o=r._objects={});while(--s>=i){var a=e.objectAt(s);a&&(Ember.addBeforeObserver(a,t,r,"contentKeyWillChange"),Ember.addObserver(a,t,r,"contentKeyDidChange"),u=n(a),o[u]||(o[u]=[]),o[u].push(s))}}function u(e,t,r,i,s){var o=r._objects;o||(o=r._objects={});var u,a;while(--s>=i){var f=e.objectAt(s);f&&(Ember.removeBeforeObserver(f,t,r,"contentKeyWillChange"),Ember.removeObserver(f,t,r,"contentKeyDidChange"),a=n(f),u=o[a],u[u.indexOf(s)]=null)}}var e=Ember.set,t=Ember.get,n=Ember.guidFor,r=Ember.ArrayUtils.forEach,i=Ember.Object.extend(Ember.Array,{init:function(e,t,n){this._super(),this._keyName=t,this._owner=n,this._content=e},objectAt:function(e){var n=this._content.objectAt(e);return n&&t(n,this._keyName)},length:Ember.computed(function(){var e=this._content;return e?t(e,"length"):0}).property().cacheable()}),s=/^.+:(before|change)$/;Ember.EachProxy=Ember.Object.extend({init:function(e){this._super(),this._content=e,e.addArrayObserver(this),r(Ember.watchedEvents(this),function(e){this.didAddListener(e)},this)},unknownProperty:function(e,t){var n;return n=new i(this._content,e,this),(new Ember.Descriptor).setup(this,e,n),this.beginObservingContentKey(e),n},arrayWillChange:function(e,t,n,r){var i=this._keys,s,o,a;a=n>0?t+n:-1,Ember.beginPropertyChanges(this);for(s in i){if(!i.hasOwnProperty(s))continue;a>0&&u(e,s,this,t,a),Ember.propertyWillChange(this,s)}Ember.propertyWillChange(this._content,"@each"),Ember.endPropertyChanges(this)},arrayDidChange:function(e,t,n,r){var i=this._keys,s,u,a;a=r>0?t+r:-1,Ember.beginPropertyChanges(this);for(s in i){if(!i.hasOwnProperty(s))continue;a>0&&o(e,s,this,t,a),Ember.propertyDidChange(this,s)}Ember.propertyDidChange(this._content,"@each"),Ember.endPropertyChanges(this)},didAddListener:function(e){s.test(e)&&this.beginObservingContentKey(e.slice(0,-7))},didRemoveListener:function(e){s.test(e)&&this.stopObservingContentKey(e.slice(0,-7))},beginObservingContentKey:function(e){var n=this._keys;n||(n=this._keys={});if(!n[e]){n[e]=1;var r=this._content,i=t(r,"length");o(r,e,this,0,i)}else n[e]++},stopObservingContentKey:function(e){var n=this._keys;if(n&&n[e]>0&&--n[e]<=0){var r=this._content,i=t(r,"length");u(r,e,this,0,i)}},contentKeyWillChange:function(e,t){Ember.propertyWillChange(this,t)},contentKeyDidChange:function(e,t){Ember.propertyDidChange(this,t)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.Mixin.create(Ember.MutableArray,Ember.Observable,Ember.Copyable,{get:function(e){return e==="length"?this.length:"number"==typeof e?this[e]:this._super(e)},objectAt:function(e){return this[e]},replace:function(t,n,r){if(this.isFrozen)throw Ember.FROZEN_ERROR;var i=r?e(r,"length"):0;this.arrayContentWillChange(t,n,i);if(!r||r.length===0)this.splice(t,n);else{var s=[t,n].concat(r);this.splice.apply(this,s)}return this.arrayContentDidChange(t,n,i),this},unknownProperty:function(e,t){var n;return t!==undefined&&n===undefined&&(n=this[e]=t),n},indexOf:function(e,t){var n,r=this.length;t===undefined?t=0:t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=r);for(n=t;n<r;n++)if(this[n]===e)return n;return-1},lastIndexOf:function(e,t){var n,r=this.length;t===undefined?t=r-1:t=t<0?Math.ceil(t):Math.floor(t),t<0&&(t+=r);for(n=t;n>=0;n--)if(this[n]===e)return n;return-1},copy:function(){return this.slice()}}),r=["length"];Ember.ArrayUtils.forEach(n.keys(),function(e){Array.prototype[e]&&r.push(e)}),r.length>0&&(n=n.without.apply(n,r)),Ember.NativeArray=n,Ember.A=function(e){return e===undefined&&(e=[]),Ember.NativeArray.apply(e)},Ember.NativeArray.activate=function(){n.apply(Array.prototype),Ember.A=function(e){return e||[]}},Ember.EXTEND_PROTOTYPES&&Ember.NativeArray.activate()}(),function(){var e=Ember.guidFor,t=Ember.ArrayUtils.indexOf,n=Ember.OrderedSet=function(){this.clear()};n.create=function(){return new n},n.prototype={clear:function(){this.presenceSet={},this.list=[]},add:function(t){var n=e(t),r=this.presenceSet,i=this.list;if(n in r)return;r[n]=!0,i.push(t)},remove:function(n){var r=e(n),i=this.presenceSet,s=this.list;delete i[r];var o=t(s,n);o>-1&&s.splice(o,1)},isEmpty:function(){return this.list.length===0},forEach:function(e,t){var n=this.list.slice();for(var r=0,i=n.length;r<i;r++)e.call(t,n[r])},toArray:function(){return this.list.slice()}};var r=Ember.Map=function(){this.keys=Ember.OrderedSet.create(),this.values={}};r.create=function(){return new r},r.prototype={get:function(t){var n=this.values,r=e(t);return n[r]},set:function(t,n){var r=this.keys,i=this.values,s=e(t);r.add(t),i[s]=n},remove:function(t){var n=this.keys,r=this.values,i=e(t),s;return r.hasOwnProperty(i)?(n.remove(t),s=r[i],delete r[i],!0):!1},has:function(t){var n=this.values,r=e(t);return n.hasOwnProperty(r)},forEach:function(t,n){var r=this.keys,i=this.values;r.forEach(function(r){var s=e(r);t.call(n,r,i[s])})}}}(),function(){var e={},t={};Ember.onLoad=function(n,r){var i;e[n]=e[n]||Ember.A(),e[n].pushObject(r),(i=t[n])&&r(i)},Ember.runLoadHooks=function(n,r){var i;t[n]=r,(i=e[n])&&e[n].forEach(function(e){e(r)})}}(),function(){}(),function(){Ember.ArrayController=Ember.ArrayProxy.extend()}(),function(){}(),function(){}(),function(){var e=Ember.get,t=Ember.set;Ember.Application=Ember.Namespace.extend({rootElement:"body",eventDispatcher:null,customEvents:null,init:function(){var n,r=e(this,"rootElement");this._super(),n=Ember.EventDispatcher.create({rootElement:r}),t(this,"eventDispatcher",n);if(Ember.$.isReady)Ember.run.once(this,this.didBecomeReady);else{var i=this;Ember.$(document).ready(function(){Ember.run.once(i,i.didBecomeReady)})}},initialize:function(t){var n=Ember.A(Ember.keys(this)),r=e(this.constructor,"injections"),i=this,s,o;Ember.runLoadHooks("application",this),n.forEach(function(e){r.forEach(function(n){n(i,t,e)})})},didBecomeReady:function(){var t=e(this,"eventDispatcher"),n=e(this,"stateManager"),r=e(this,"customEvents");t.setup(r),this.ready(),n&&n instanceof Ember.Router&&this.setupStateManager(n)},setupStateManager:function(t){var n=e(t,"location");t.route(n.getURL()),n.onUpdateURL(function(e){t.route(e)})},ready:Ember.K,destroy:function(){return e(this,"eventDispatcher").destroy(),this._super()},registerInjection:function(e){this.constructor.registerInjection(e)}}),Ember.Application.reopenClass({concatenatedProperties:["injections"],injections:Ember.A(),registerInjection:function(t){e(this,"injections").pushObject(t)}}),Ember.Application.registerInjection(function(e,t,n){if(!/^[A-Z].*Controller$/.test(n))return;var r=n[0].toLowerCase()+n.substr(1),i=e[n].create();t.set(r,i),i.set("target",t)})}(),function(){var e=Ember.get,t=Ember.set;Ember.HashLocation=Ember.Object.extend({init:function(){t(this,"location",e(this,"location")||window.location),t(this,"callbacks",Ember.A())},getURL:function(){return e(this,"location").hash.substr(1)},setURL:function(n){e(this,"location").hash=n,t(this,"lastSetURL",n)},onUpdateURL:function(n){var r=this,i=function(){var i=location.hash.substr(1);if(e(r,"lastSetURL")===i)return;t(r,"lastSetURL",null),n(location.hash.substr(1))};e(this,"callbacks").pushObject(i),window.addEventListener("hashchange",i)},willDestroy:function(){e(this,"callbacks").forEach(function(e){window.removeEventListener("hashchange",e)}),t(this,"callbacks",null)}}),Ember.Location={create:function(e){var t=e&&e.style;if(t==="hash")return Ember.HashLocation.create.apply(Ember.HashLocation,arguments)}}}(),function(){}(),function(){}(),function(){Ember.$=window.jQuery}(),function(){var e=Ember.get,t=Ember.set,n=Ember.ArrayUtils.forEach,r=Ember.ArrayUtils.indexOf,i=function(){this.seen={},this.list=[]};i.prototype={add:function(e){if(e in this.seen)return;this.seen[e]=!0,this.list.push(e)},toDOM:function(){return this.list.join(" ")}},Ember.RenderBuffer=function(e){return new Ember._RenderBuffer(e)},Ember._RenderBuffer=function(e){this.elementTag=e,this.childBuffers=[]},Ember._RenderBuffer.prototype={elementClasses:null,elementId:null,elementAttributes:null,elementTag:null,elementStyle:null,parentBuffer:null,push:function(e){return this.childBuffers.push(String(e)),this},addClass:function(e){var t=this.elementClasses=this.elementClasses||new i;return this.elementClasses.add(e),this},id:function(e){return this.elementId=e,this},attr:function(e,t){var n=this.elementAttributes=this.elementAttributes||{};return arguments.length===1?n[e]:(n[e]=t,this)},removeAttr:function(e){var t=this.elementAttributes;return t&&delete t[e],this},style:function(e,t){var n=this.elementStyle=this.elementStyle||{};return this.elementStyle[e]=t,this},newBuffer:function(e,t,n,r){var i=new Ember._RenderBuffer(e);return i.parentBuffer=t,r&&i.setProperties(r),n&&n.call(this,i),i},replaceWithBuffer:function(e){var t=this.parentBuffer;if(!t)return;var n=t.childBuffers,i=r(n,this);e?n.splice(i,1,e):n.splice(i,1)},begin:function(e){return this.newBuffer(e,this,function(e){this.childBuffers.push(e)})},prepend:function(e){return this.newBuffer(e,this,function(e){this.childBuffers.splice(0,0,e)})},replaceWith:function(e){var t=this.parentBuffer;return this.newBuffer(e,t,function(e){this.replaceWithBuffer(e)})},insertAfter:function(t){var n=e(this,"parentBuffer");return this.newBuffer(t,n,function(e){var t=n.childBuffers,i=r(t,this);t.splice(i+1,0,e)})},end:function(){var e=this.parentBuffer;return e||this},remove:function(){this.replaceWithBuffer(null)},element:function(){return Ember.$(this.string())[0]},string:function(){var e="",t=this.elementTag,r;if(t){var i=this.elementId,s=this.elementClasses,o=this.elementAttributes,u=this.elementStyle,a="",f;r=["<"+t],i&&r.push('id="'+this._escapeAttribute(i)+'"'),s&&r.push('class="'+this._escapeAttribute(s.toDOM())+'"');if(u){for(f in u)u.hasOwnProperty(f)&&(a+=f+":"+this._escapeAttribute(u[f])+";");r.push('style="'+a+'"')}if(o)for(f in o)o.hasOwnProperty(f)&&r.push(f+'="'+this._escapeAttribute(o[f])+'"');r=r.join(" ")+">"}var l=this.childBuffers;return n(l,function(t){var n=typeof t=="string";e+=n?t:t.string()}),t?r+e+"</"+t+">":e},_escapeAttribute:function(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/&(?!\w+;)|[<>"'`]/g,r=/[&<>"'`]/,i=function(e){return t[e]||"&amp;"},s=e.toString();return r.test(s)?s.replace(n,i):s}}}(),function(){var e=Ember.get,t=Ember.set,n=Ember.String.fmt;Ember.EventDispatcher=Ember.Object.extend({rootElement:"body",setup:function(t){var n,r={touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"};Ember.$.extend(r,t||{});var i=Ember.$(e(this,"rootElement"));i.addClass("ember-application");for(n in r)r.hasOwnProperty(n)&&this.setupHandler(i,n,r[n])},setupHandler:function(e,t,n){var r=this;e.delegate(".ember-view",t+".ember",function(e,t){var i=Ember.View.views[this.id],s=!0,o=null;return o=r._findNearestEventManager(i,n),o&&o!==t?s=r._dispatchEvent(o,e,n,i):i?s=r._bubbleEvent(i,e,n):e.stopPropagation(),s}),e.delegate("[data-ember-action]",t+".ember",function(e){var t=Ember.$(e.currentTarget).attr("data-ember-action"),r=Ember.Handlebars.ActionHelper.registeredActions[t],i=r.handler;if(r.eventName===n)return i(e)})},_findNearestEventManager:function(t,n){var r=null;while(t){r=e(t,"eventManager");if(r&&r[n])break;t=e(t,"parentView")}return r},_dispatchEvent:function(e,t,n,r){var i=!0,s=e[n];return Ember.typeOf(s)==="function"?(i=s.call(e,t,r),t.stopPropagation()):i=this._bubbleEvent(r,t,n),i},_bubbleEvent:function(e,t,n){return Ember.run(function(){return e.handleEvent(n,t)})},destroy:function(){var t=e(this,"rootElement");return Ember.$(t).undelegate(".ember").removeClass("ember-application"),this._super()}})}(),function(){var e=Ember.run.queues;e.splice(Ember.$.inArray("actions",e)+1,0,"render")}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.addObserver,r=Ember.getPath,i=Ember.meta,s=Ember.String.fmt,o=Array.prototype.slice,u=Ember.ArrayUtils.forEach,a=Ember.computed(function(){var t=e(this,"_childViews"),n=Ember.A();return u(t,function(t){t.isVirtual?n.pushObjects(e(t,"childViews")):n.push(t)}),n}).property().cacheable(),f=Ember.VIEW_PRESERVES_CONTEXT;Ember.TEMPLATES={};var l={preRender:{},inBuffer:{},hasElement:{},inDOM:{},destroyed:{}};Ember.View=Ember.Object.extend(Ember.Evented,{concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,templates:Ember.TEMPLATES,template:Ember.computed(function(t,n){if(n!==undefined)return n;var r=e(this,"templateName"),i=this.templateForName(r,"template");return i||e(this,"defaultTemplate")}).property("templateName").cacheable(),controller:null,layout:Ember.computed(function(t,n){if(arguments.length===2)return n;var r=e(this,"layoutName"),i=this.templateForName(r,"layout");return i||e(this,"defaultLayout")}).property("layoutName").cacheable(),templateForName:function(t,n){if(!t)return;var r=e(this,"templates"),i=e(r,t);if(!i)throw new Ember.Error(s('%@ - Unable to find %@ "%@".',[this,n,t]));return i},templateContext:Ember.computed(function(n,r){return arguments.length===2?(t(this,"_templateContext",r),r):e(this,"_templateContext")}).cacheable(),_templateContext:Ember.computed(function(t,n){var r;if(arguments.length===2)return n;if(f){r=e(this,"_parentView");if(r)return e(r,"_templateContext")}return this}).cacheable(),_displayPropertyDidChange:Ember.observer(function(){this.rerender()},"templateContext","controller"),parentView:Ember.computed(function(){var t=e(this,"_parentView");return t&&t.isVirtual?e(t,"parentView"):t}).property("_parentView").volatile(),_parentView:null,concreteView:Ember.computed(function(){return this.isVirtual?e(this,"parentView"):this}).property("_parentView").volatile(),isVisible:!0,childViews:a,_childViews:[],_childViewsWillChange:Ember.beforeObserver(function(){if(this.isVirtual){var t=e(this,"parentView");t&&Ember.propertyWillChange(t,"childViews")}},"childViews"),_childViewsDidChange:Ember.observer(function(){if(this.isVirtual){var t=e(this,"parentView");t&&Ember.propertyDidChange(t,"childViews")}},"childViews"),nearestInstanceOf:function(t){var n=e(this,"parentView");while(n){if(n instanceof t)return n;n=e(n,"parentView")}},nearestWithProperty:function(t){var n=e(this,"parentView");while(n){if(t in n)return n;n=e(n,"parentView")}},nearestChildOf:function(t){var n=e(this,"parentView");while(n){if(e(n,"parentView")instanceof t)return n;n=e(n,"parentView")}},collectionView:Ember.computed(function(){return this.nearestInstanceOf(Ember.CollectionView)}).cacheable(),itemView:Ember.computed(function(){return this.nearestChildOf(Ember.CollectionView)}).cacheable(),contentView:Ember.computed(function(){return this.nearestWithProperty("content")}).cacheable(),_parentViewDidChange:Ember.observer(function(){if(this.isDestroying)return;this.invokeRecursively(function(e){e.propertyDidChange("collectionView"),e.propertyDidChange("itemView"),e.propertyDidChange("contentView")})},"_parentView"),cloneKeywords:function(){var t=e(this,"templateData"),n=e(this,"controller"),r=t?Ember.copy(t.keywords):{};return r.view=e(this,"concreteView"),n&&(r.controller=n),r},render:function(t){var n=e(this,"layout")||e(this,"template");if(n){var r=e(this,"_templateContext"),i=this.cloneKeywords(),s={view:this,buffer:t,isRenderData:!0,keywords:i},o=n(r,{data:s});o!==undefined&&t.push(o)}},invokeForState:function(e){var t=this.state,n;if(u=l[t][e])return n=o.call(arguments),n[0]=this,u.apply(this,n);var r=this,i=r.states,s;while(i){s=i[t];while(s){var u=s[e];if(u)return l[t][e]=u,n=o.call(arguments,1),n.unshift(this),u.apply(this,n);s=s.parentState}i=i.parent}},rerender:function(){return this.invokeForState("rerender")},clearRenderedChildren:function(){var t=this.lengthBeforeRender,n=this.lengthAfterRender,r=e(this,"_childViews");for(var i=n-1;i>=t;i--)r[i]&&r[i].destroy()},_applyClassNameBindings:function(){var t=e(this,"classNameBindings"),r=e(this,"classNames"),i,s,o;if(!t)return;u(t,function(e){var t,u,a=function(){s=this._classStringForProperty(e),i=this.$(),t&&(i.removeClass(t),r.removeObject(t)),s?(i.addClass(s),t=s):t=null};o=this._classStringForProperty(e),o&&(r.push(o),t=o),u=e.split(":")[0],n(this,u,a)},this)},_applyAttributeBindings:function(t){var r=e(this,"attributeBindings"),i,s,o;if(!r)return;u(r,function(r){var o=r.split(":"),u=o[0],a=o[1]||u,f=function(){s=this.$(),i=e(this,u),Ember.View.applyAttributeBindings(s,a,i)};n(this,u,f),i=e(this,u),Ember.View.applyAttributeBindings(t,a,i)},this)},_classStringForProperty:function(e){var t=e.split(":"),n=t[1];e=t[0];var r=Ember.getPath(this,e,!1);r===undefined&&Ember.isGlobalPath(e)&&(r=Ember.getPath(window,e));if(!!r&&n)return n;if(r===!0){var i=e.split(".");return Ember.String.dasherize(i[i.length-1])}return r!==!1&&r!==undefined&&r!==null?r:null},element:Ember.computed(function(e,t){return t!==undefined?this.invokeForState("setElement",t):this.invokeForState("getElement")}).property("_parentView").cacheable(),$:function(e){return this.invokeForState("$",e)},mutateChildViews:function(t){var n=e(this,"_childViews"),r=e(n,"length"),i;while(--r>=0)i=n[r],t.call(this,i,r);return this},forEachChildView:function(t){var n=e(this,"_childViews");if(!n)return this;var r=e(n,"length"),i,s;for(s=0;s<r;s++)i=n[s],t.call(this,i);return this},appendTo:function(e){return this._insertElementLater(function(){this.$().appendTo(e)}),this},replaceIn:function(e){return this._insertElementLater(function(){Ember.$(e).empty(),this.$().appendTo(e)}),this},_insertElementLater:function(e){this._lastInsert=Ember.guidFor(e),Ember.run.schedule("render",this,this.invokeForState,"insertElement",e)},append:function(){return this.appendTo(document.body)},remove:function(){this.destroyElement(),this.invokeRecursively(function(e){e.clearRenderedChildren()})},elementId:Ember.computed(function(e,t){return t!==undefined?t:Ember.guidFor(this)}).cacheable(),_elementIdDidChange:Ember.beforeObserver(function(){throw"Changing a view's elementId after creation is not allowed."},"elementId"),findElementInParentElement:function(t){var n="#"+e(this,"elementId");return Ember.$(n)[0]||Ember.$(n,t)[0]},renderBuffer:function(t){t=t||e(this,"tagName");if(t===null||t===undefined)t="div";return Ember.RenderBuffer(t)},createElement:function(){if(e(this,"element"))return this;var n=this.renderToBuffer();return t(this,"element",n.element()),this},willInsertElement:Ember.K,didInsertElement:Ember.K,willRerender:Ember.K,invokeRecursively:function(e){e.call(this,this),this.forEachChildView(function(t){t.invokeRecursively(e)})},invalidateRecursively:function(e){this.forEachChildView(function(t){t.propertyDidChange(e)})},_notifyWillInsertElement:function(){this.invokeRecursively(function(e){e.fire("willInsertElement")})},_notifyDidInsertElement:function(){this.invokeRecursively(function(e){e.fire("didInsertElement")})},_notifyWillRerender:function(){this.invokeRecursively(function(e){e.fire("willRerender")})},destroyElement:function(){return this.invokeForState("destroyElement")},willDestroyElement:function(){},_notifyWillDestroyElement:function(){this.invokeRecursively(function(e){e.fire("willDestroyElement")})},_elementWillChange:Ember.beforeObserver(function(){this.forEachChildView(function(e){Ember.propertyWillChange(e,"element")})},"element"),_elementDidChange:Ember.observer(function(){this.forEachChildView(function(e){Ember.propertyDidChange(e,"element")})},"element"),parentViewDidChange:Ember.K,renderToBuffer:function(t,n){var r;Ember.run.sync(),n=n||"begin";if(t){var i=e(this,"tagName");if(i===null||i===undefined)i="div";r=t[n](i)}else r=this.renderBuffer();return this.buffer=r,this.transitionTo("inBuffer",!1),this.lengthBeforeRender=e(e(this,"_childViews"),"length"),this.beforeRender(r),this.render(r),this.afterRender(r),this.lengthAfterRender=e(e(this,"_childViews"),"length"),r},beforeRender:function(e){this.applyAttributesToBuffer(e)},afterRender:Ember.K,applyAttributesToBuffer:function(t){this._applyClassNameBindings(),this._applyAttributeBindings(t),u(e(this,"classNames"),function(e){t.addClass(e)}),t.id(e(this,"elementId"));var n=e(this,"ariaRole");n&&t.attr("role",n),e(this,"isVisible")===!1&&t.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:[],attributeBindings:[],state:"preRender",init:function(){this._super(),Ember.View.views[e(this,"elementId")]=this;var n=e(this,"_childViews").slice();t(this,"_childViews",n),this.classNameBindings=Ember.A(this.classNameBindings.slice()),this.classNames=Ember.A(this.classNames.slice());var r=e(this,"viewController");r&&(r=Ember.getPath(r),r&&t(r,"view",this))},appendChild:function(e,t){return this.invokeForState("appendChild",e,t)},removeChild:function(n){if(this.isDestroying)return;t(n,"_parentView",null);var r=e(this,"_childViews");return Ember.ArrayUtils.removeObject(r,n),this.propertyDidChange("childViews"),this},removeAllChildren:function(){return this.mutateChildViews(function(e){this.removeChild(e)})},destroyAllChildren:function(){return this.mutateChildViews(function(e){e.destroy()})},removeFromParent:function(){var t=e(this,"_parentView");return this.remove(),t&&t.removeChild(this),this},willDestroy:function(){var n=e(this,"_childViews"),r=e(this,"_parentView"),i=e(this,"elementId"),s;this.removedFromDOM||this.destroyElement();if(this.viewName){var o=e(this,"parentView");o&&t(o,this.viewName,null)}r&&r.removeChild(this),this.state="destroyed",s=e(n,"length");for(var u=s-1;u>=0;u--)n[u].removedFromDOM=!0,n[u].destroy();delete Ember.View.views[e(this,"elementId")]},createChildView:function(n,r){var i,s;if(Ember.View.detect(n)){i={_parentView:this,templateData:e(this,"templateData")},r?n=n.create(i,r):n=n.create(i);var o=n.viewName;o&&t(e(this,"concreteView"),o,n)}else e(n,"templateData")||t(n,"templateData",e(this,"templateData")),t(n,"_parentView",this);return n},becameVisible:Ember.K,becameHidden:Ember.K,_isVisibleDidChange:Ember.observer(function(){var t=e(this,"isVisible");this.$().toggle(t);if(this._isAncestorHidden())return;t?this._notifyBecameVisible():this._notifyBecameHidden()},"isVisible"),_notifyBecameVisible:function(){this.fire("becameVisible"),this.forEachChildView(function(t){var n=e(t,"isVisible");(n||n===null)&&t._notifyBecameVisible()})},_notifyBecameHidden:function(){this.fire("becameHidden"),this.forEachChildView(function(t){var n=e(t,"isVisible");(n||n===null)&&t._notifyBecameHidden()})},_isAncestorHidden:function(){var t=e(this,"parentView");while(t){if(e(t,"isVisible")===!1)return!0;t=e(t,"parentView")}return!1},clearBuffer:function(){this.invokeRecursively(function(e){this.buffer=null})},transitionTo
:function(e,t){this.state=e,t!==!1&&this.forEachChildView(function(t){t.transitionTo(e)})},fire:function(e){this[e]&&this[e].apply(this,[].slice.call(arguments,1)),this._super.apply(this,arguments)},handleEvent:function(e,t){return this.invokeForState("handleEvent",e,t)}});var c={prepend:function(e,t){t._insertElementLater(function(){var n=e.$();n.prepend(t.$())})},after:function(e,t){t._insertElementLater(function(){var n=e.$();n.after(t.$())})},replace:function(n){var r=e(n,"element");t(n,"element",null),n._insertElementLater(function(){Ember.$(r).replaceWith(e(n,"element"))})},remove:function(n){var r=e(n,"element");t(n,"element",null),n._lastInsert=null,Ember.$(r).remove()},empty:function(e){e.$().empty()}};Ember.View.reopen({states:Ember.View.states,domManager:c}),Ember.View.views={},Ember.View.childViewsProperty=a,Ember.View.applyAttributeBindings=function(e,t,n){var r=Ember.typeOf(n),i=e.attr(t);(r==="string"||r==="number"&&!isNaN(n))&&n!==i?e.attr(t,n):n&&r==="boolean"?e.attr(t,t):n||e.removeAttr(t)}}(),function(){var e=Ember.get,t=Ember.set;Ember.View.states={_default:{appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){return Ember.$()},getElement:function(){return null},handleEvent:function(){return!0},destroyElement:function(e){return t(e,"element",null),e._lastInsert=null,e}}},Ember.View.reopen({states:Ember.View.states})}(),function(){Ember.View.states.preRender={parentState:Ember.View.states._default,insertElement:function(e,t){if(e._lastInsert!==Ember.guidFor(t))return;e.createElement(),e._notifyWillInsertElement(),t.call(e),e.transitionTo("inDOM"),e._notifyDidInsertElement()},empty:Ember.K,setElement:function(e,t){return e.beginPropertyChanges(),e.invalidateRecursively("element"),t!==null&&e.transitionTo("hasElement"),e.endPropertyChanges(),t}}}(),function(){var e=Ember.get,t=Ember.set,n=Ember.meta;Ember.View.states.inBuffer={parentState:Ember.View.states._default,$:function(e,t){return e.rerender(),Ember.$()},rerender:function(e){e._notifyWillRerender(),e.clearRenderedChildren(),e.renderToBuffer(e.buffer,"replaceWith")},appendChild:function(t,n,r){var i=t.buffer;return n=this.createChildView(n,r),e(t,"_childViews").push(n),n.renderToBuffer(i),t.propertyDidChange("childViews"),n},destroyElement:function(e){return e.clearBuffer(),e._notifyWillDestroyElement(),e.transitionTo("preRender"),e},empty:function(){},insertElement:function(){throw"You can't insert an element that has already been rendered"},setElement:function(e,t){return e.invalidateRecursively("element"),t===null?e.transitionTo("preRender"):(e.clearBuffer(),e.transitionTo("hasElement")),t}}}(),function(){var e=Ember.get,t=Ember.set,n=Ember.meta;Ember.View.states.hasElement={parentState:Ember.View.states._default,$:function(t,n){var r=e(t,"element");return n?Ember.$(n,r):Ember.$(r)},getElement:function(t){var n=e(t,"parentView");return n&&(n=e(n,"element")),n?t.findElementInParentElement(n):Ember.$("#"+e(t,"elementId"))[0]},setElement:function(e,t){if(t!==null)throw"You cannot set an element to a non-null value when the element is already in the DOM.";return e.invalidateRecursively("element"),e.transitionTo("preRender"),t},rerender:function(e){return e._notifyWillRerender(),e.clearRenderedChildren(),e.domManager.replace(e),e},destroyElement:function(e){return e._notifyWillDestroyElement(),e.domManager.remove(e),e},empty:function(t){var n=e(t,"_childViews"),r,i;if(n){r=e(n,"length");for(i=0;i<r;i++)n[i]._notifyWillDestroyElement()}t.domManager.empty(t)},handleEvent:function(e,t,n){var r=e[t];return Ember.typeOf(r)==="function"?r.call(e,n):!0}},Ember.View.states.inDOM={parentState:Ember.View.states.hasElement,insertElement:function(e,t){if(e._lastInsert!==Ember.guidFor(t))return;throw"You can't insert an element into the DOM that has already been inserted"}}}(),function(){var e="You can't call %@ on a destroyed view",t=Ember.String.fmt;Ember.View.states.destroyed={parentState:Ember.View.states._default,appendChild:function(){throw t(e,["appendChild"])},rerender:function(){throw t(e,["rerender"])},destroyElement:function(){throw t(e,["destroyElement"])},empty:function(){throw t(e,["empty"])},setElement:function(){throw t(e,["set('element', ...)"])},insertElement:Ember.K}}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.meta,r=Ember.ArrayUtils.forEach,i=Ember.computed(function(){return e(this,"_childViews")}).property("_childViews").cacheable();Ember.ContainerView=Ember.View.extend({init:function(){var n=e(this,"childViews");Ember.defineProperty(this,"childViews",i),this._super();var s=e(this,"_childViews");r(n,function(n,r){var i;"string"==typeof n?(i=e(this,n),i=this.createChildView(i),t(this,n,i)):i=this.createChildView(n),s[r]=i},this),Ember.A(s),e(this,"childViews").addArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"})},render:function(e){this.forEachChildView(function(t){t.renderToBuffer(e)})},willDestroy:function(){e(this,"childViews").removeArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"}),this._super()},childViewsWillChange:function(e,t,n){if(n===0)return;var r=e.slice(t,t+n);this.initializeViews(r,null,null),this.invokeForState("childViewsWillChange",e,t,n)},childViewsDidChange:function(t,n,r,i){var s=e(t,"length");if(i===0)return;var o=t.slice(n,n+i);this.initializeViews(o,this,e(this,"templateData")),this.invokeForState("childViewsDidChange",t,n,i)},initializeViews:function(n,i,s){r(n,function(n){t(n,"_parentView",i),e(n,"templateData")||t(n,"templateData",s)})},_scheduleInsertion:function(e,t){t?t.domManager.after(t,e):this.domManager.prepend(this,e)},currentView:null,_currentViewWillChange:Ember.beforeObserver(function(){var t=e(this,"childViews"),n=e(this,"currentView");n&&t.removeObject(n)},"currentView"),_currentViewDidChange:Ember.observer(function(){var t=e(this,"childViews"),n=e(this,"currentView");n&&t.pushObject(n)},"currentView")}),Ember.ContainerView.states={parent:Ember.View.states,inBuffer:{childViewsDidChange:function(e,t,n,r){var i=e.buffer,s,o,u,a;n===0?(a=t[n],s=n+1,a.renderToBuffer(i,"prepend")):(a=t[n-1],s=n);for(var f=s;f<n+r;f++)o=a,a=t[f],u=o.buffer,a.renderToBuffer(u,"insertAfter")}},hasElement:{childViewsWillChange:function(e,t,n,r){for(var i=n;i<n+r;i++)t[i].remove()},childViewsDidChange:function(e,t,n,r){var i=n===0?null:t[n-1];for(var s=n;s<n+r;s++)e=t[s],this._scheduleInsertion(e,i),i=e}}},Ember.ContainerView.states.inDOM={parentState:Ember.ContainerView.states.hasElement},Ember.ContainerView.reopen({states:Ember.ContainerView.states})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.String.fmt;Ember.CollectionView=Ember.ContainerView.extend({content:null,emptyViewClass:Ember.View,emptyView:null,itemViewClass:Ember.View,init:function(){var e=this._super();return this._contentDidChange(),e},_contentWillChange:Ember.beforeObserver(function(){var t=this.get("content");t&&t.removeArrayObserver(this);var n=t?e(t,"length"):0;this.arrayWillChange(t,0,n)},"content"),_contentDidChange:Ember.observer(function(){var t=e(this,"content");t&&t.addArrayObserver(this);var n=t?e(t,"length"):0;this.arrayDidChange(t,0,null,n)},"content"),willDestroy:function(){var t=e(this,"content");t&&t.removeArrayObserver(this),this._super()},arrayWillChange:function(t,n,r){var i=e(this,"emptyView");i&&i instanceof Ember.View&&i.removeFromParent();var s=e(this,"childViews"),o,u,a;a=e(s,"length");var f=r===a;f&&this.invokeForState("empty");for(u=n+r-1;u>=n;u--)o=s[u],f&&(o.removedFromDOM=!0),o.destroy()},arrayDidChange:function(n,r,i,s){var o=e(this,"itemViewClass"),u=e(this,"childViews"),a=[],f,l,c,h,p;"string"==typeof o&&(o=Ember.getPath(o)),h=n?e(n,"length"):0;if(h)for(c=r;c<r+s;c++)l=n.objectAt(c),f=this.createChildView(o,{content:l,contentIndex:c}),a.push(f);else{var d=e(this,"emptyView");if(!d)return;d=this.createChildView(d),a.push(d),t(this,"emptyView",d)}u.replace(r,0,a)},createChildView:function(n,r){n=this._super(n,r);var i=e(n,"tagName"),s=i===null||i===undefined?Ember.CollectionView.CONTAINER_MAP[e(this,"tagName")]:i;return t(n,"tagName",s),n}}),Ember.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"}}(),function(){}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.getPath;Ember.State=Ember.Object.extend(Ember.Evented,{isState:!0,parentState:null,start:null,name:null,path:Ember.computed(function(){var t=n(this,"parentState.path"),r=e(this,"name");return t&&(r=t+"."+r),r}).property().cacheable(),fire:function(e){this[e]&&this[e].apply(this,[].slice.call(arguments,1)),this._super.apply(this,arguments)},init:function(){var n=e(this,"states"),r;t(this,"childStates",Ember.A());var i;if(!n){n={};for(i in this){if(i==="constructor")continue;this.setupChild(n,i,this[i])}t(this,"states",n)}else for(i in n)this.setupChild(n,i,n[i]);t(this,"routes",{})},setupChild:function(n,r,i){if(!i)return!1;Ember.State.detect(i)?i=i.create({name:r}):i.isState&&t(i,"name",r),i.isState&&(t(i,"parentState",this),e(this,"childStates").pushObject(i),n[r]=i)},isLeaf:Ember.computed(function(){return!e(this,"childStates").length}).cacheable(),setupControllers:Ember.K,enter:Ember.K,exit:Ember.K})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.getPath,r=Ember.String.fmt;Ember.StateManager=Ember.State.extend({init:function(){this._super(),t(this,"stateMeta",Ember.Map.create());var r=e(this,"initialState");!r&&n(this,"states.start")&&(r="start"),r&&this.goToState(r)},currentState:null,errorOnUnhandledEvent:!0,send:function(t,n){this.sendRecursively(t,e(this,"currentState"),n)},sendRecursively:function(t,i,s){var o=this.enableLogging,u=i[t];if(typeof u=="function")o&&Ember.Logger.log(r("STATEMANAGER: Sending event '%@' to state %@.",[t,e(i,"path")])),u.call(i,this,s);else{var a=e(i,"parentState");if(a)this.sendRecursively(t,a,s);else if(e(this,"errorOnUnhandledEvent"))throw new Ember.Error(this.toString()+" could not respond to event "+t+" in state "+n(this,"currentState.path")+".")}},findStatesByRoute:function(t,n){if(!n||n==="")return undefined;var r=n.split("."),i=[];for(var s=0,o=r.length;s<o;s+=1){var u=e(t,"states");if(!u)return undefined;var a=e(u,r[s]);if(!a)return undefined;t=a,i.push(a)}return i},goToState:function(){return this.transitionTo.apply(this,arguments)},pathForSegments:function(e){return Ember.ArrayUtils.map(e,function(e){return e[0]}).join(".")},transitionTo:function(t,n){if(Ember.empty(t))return;var r;Ember.typeOf(t)==="array"?r=Array.prototype.slice.call(arguments):r=[[t,n]];var i=this.pathForSegments(r),s=e(this,"currentState")||this,o,u,a=[],f,l;o=s;if(o.routes[i]){var c=o.routes[i];a=c.exitStates,f=c.enterStates,o=c.futureState,l=c.resolveState}else{u=this.findStatesByRoute(s,i);while(o&&!u){a.unshift(o),o=e(o,"parentState");if(!o){u=this.findStatesByRoute(this,i);if(!u)return}u=this.findStatesByRoute(o,i)}l=o,f=u.slice(0),a=a.slice(0);if(f.length>0){o=f[f.length-1];while(f.length>0&&f[0]===a[0])f.shift(),a.shift()}s.routes[i]={exitStates:a,enterStates:f,futureState:o,resolveState:l}}this.enterState(a,f,o),this.triggerSetupContext(l,r)},triggerSetupContext:function(e,t){var n=e;Ember.ArrayUtils.forEach(t,function(e){var t=e[0],r=e[1];n=this.findStatesByRoute(n,t),n=n[n.length-1],n.fire("setupControllers",this,r)},this)},getState:function(t){var n=e(this,t),r=e(this,"parentState");if(n)return n;if(r)return r.getState(t)},asyncEach:function(e,t,n){var r=!1,i=this;if(!e.length){n&&n.call(this);return}var s=e[0],o=e.slice(1),u={async:function(){r=!0},resume:function(){i.asyncEach(o,t,n)}};t.call(this,s,u),r||u.resume()},enterState:function(n,r,i){var s=this.enableLogging,o=this;n=n.slice(0).reverse(),this.asyncEach(n,function(e,t){e.fire("exit",o,t)},function(){this.asyncEach(r,function(t,n){s&&Ember.Logger.log("STATEMANAGER: Entering "+e(t,"path")),t.fire("enter",o,n)},function(){var n=i,r,u;u=e(n,"initialState"),u||(u="start");while(n=e(e(n,"states"),u))r=n,s&&Ember.Logger.log("STATEMANAGER: Entering "+e(n,"path")),n.fire("enter",o),u=e(n,"initialState"),u||(u="start");t(this,"currentState",r||i)})})}})}(),function(){var e=function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^\$|#\s]/g,"\\$&")};Ember._RouteMatcher=Ember.Object.extend({state:null,init:function(){var t=this.route,n=[],r=1,i;t.charAt(0)==="/"&&(t=this.route=t.substr(1)),i=e(t);var s=i.replace(/:([a-z_]+)(?=$|\/)/gi,function(e,t){return n[r++]=t,"([^/]+)"});this.identifiers=n,this.regex=new RegExp("^/?"+s)},match:function(e){var t=e.match(this.regex);if(t){var n=this.identifiers,r={};for(var i=1,s=n.length;i<s;i++)r[n[i]]=t[i];return{remaining:e.substr(t[0].length),hash:r}}},generate:function(e){var t=this.identifiers,n=this.route,r;for(var i=1,s=t.length;i<s;i++)r=t[i],n=n.replace(new RegExp(":"+r),e[r]);return n}})}(),function(){var e=Ember.get,t=Ember.getPath;Ember.Routable=Ember.Mixin.create({init:function(){this.on("setupControllers",this,this.stashContext),this._super()},stashContext:function(t,n){var r=e(t,"stateMeta"),i=this.serialize(t,n);r.set(this,i),e(this,"isRoutable")&&this.updateRoute(t,e(t,"location"))},updateRoute:function(t,n){if(n&&e(this,"isLeaf")){var r=this.absoluteRoute(t);n.setURL(r)}},absoluteRoute:function(t){var n=e(this,"parentState"),r="";e(n,"isRoutable")&&(r=n.absoluteRoute(t));var i=e(this,"routeMatcher"),s=e(t,"stateMeta").get(this),o=i.generate(s);return o!==""?r+"/"+i.generate(s):r},isRoutable:Ember.computed(function(){return typeof this.route=="string"}).cacheable(),routeMatcher:Ember.computed(function(){return Ember._RouteMatcher.create({route:e(this,"route")})}).cacheable(),deserialize:function(e,t){return t},serialize:function(e,t){return t},routePath:function(n,r){if(e(this,"isLeaf"))return;var i=e(this,"childStates"),s;i=i.sort(function(e,n){return t(n,"route.length")-t(e,"route.length")});var o=i.find(function(t){var n=e(t,"routeMatcher");if(s=n.match(r))return!0}),u=o.deserialize(n,s.hash)||{};n.transitionTo(e(o,"path"),u),n.send("routePath",s.remaining)}}),Ember.State.reopen(Ember.Routable)}(),function(){Ember.Router=Ember.StateManager.extend({route:function(e){e.charAt(0)==="/"&&(e=e.substr(1)),this.send("routePath",e)}})}(),function(){}(),function(){var e=Ember.get,t=Ember.set,n=Ember.getPath,r=Ember.String.fmt;Ember.StateManager.reopen({currentView:Ember.computed(function(){var t=e(this,"currentState"),n;while(t){if(e(t,"isViewState")){n=e(t,"view");if(n)return n}t=e(t,"parentState")}return null}).property("currentState").cacheable()})}(),function(){var e=Ember.get,t=Ember.set;Ember.ViewState=Ember.State.extend({isViewState:!0,enter:function(n){var r=e(this,"view"),i,s;r&&(Ember.View.detect(r)&&(r=r.create(),t(this,"view",r)),i=n.get("rootView"),i?(s=e(i,"childViews"),s.pushObject(r)):(i=n.get("rootElement")||"body",r.appendTo(i)))},exit:function(t){var n=e(this,"view");n&&(e(n,"parentView")?n.removeFromParent():n.remove())}})}(),function(){}(),function(){(function(e){var t=function(){},n=0,r=e.document,i="createRange"in r&&typeof Range!="undefined"&&Range.prototype.createContextualFragment,s=function(){var e=r.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",e.firstChild.innerHTML===""}(),o=function(e){var r;this instanceof o?r=this:r=new t,r.innerHTML=e;var i="metamorph-"+n++;return r.start=i+"-start",r.end=i+"-end",r};t.prototype=o.prototype;var u,a,f,l,c,h,p,d,v;l=function(){return this.startTag()+this.innerHTML+this.endTag()},d=function(){return"<script id='"+this.start+"' type='text/x-placeholder'></script>"},v=function(){return"<script id='"+this.end+"' type='text/x-placeholder'></script>"};if(i)u=function(e,t){var n=r.createRange(),i=r.getElementById(e.start),s=r.getElementById(e.end);return t?(n.setStartBefore(i),n.setEndAfter(s)):(n.setStartAfter(i),n.setEndBefore(s)),n},a=function(e,t){var n=u(this,t);n.deleteContents();var r=n.createContextualFragment(e);n.insertNode(r)},f=function(){var e=u(this,!0);e.deleteContents()},c=function(e){var t=r.createRange();t.setStart(e),t.collapse(!1);var n=t.createContextualFragment(this.outerHTML());e.appendChild(n)},h=function(e){var t=r.createRange(),n=r.getElementById(this.end);t.setStartAfter(n),t.setEndAfter(n);var i=t.createContextualFragment(e);t.insertNode(i)},p=function(e){var t=r.createRange(),n=r.getElementById(this.start);t.setStartAfter(n),t.setEndAfter(n);var i=t.createContextualFragment(e);t.insertNode(i)};else{var m={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],_default:[0,"",""]},g=function(e,t){var n=m[e.tagName.toLowerCase()]||m._default,i=n[0],o=n[1],u=n[2];s&&(t="&shy;"+t);var a=r.createElement("div");a.innerHTML=o+t+u;for(var f=0;f<=i;f++)a=a.firstChild;if(s){var l=a;while(l.nodeType===1&&!l.nodeName)l=l.firstChild;l.nodeType===3&&l.nodeValue.charAt(0)==="Â­"&&(l.nodeValue=l.nodeValue.slice(1))}return a},y=function(e){while(e.parentNode.tagName==="")e=e.parentNode;return e},b=function(e,t){e.parentNode!==t.parentNode&&t.parentNode.insertBefore(e,t.parentNode.firstChild)};a=function(e,t){var n=y(r.getElementById(this.start)),i=r.getElementById(this.end),s=i.parentNode,o,u,a;b(n,i),o=n.nextSibling;while(o){u=o.nextSibling,a=o===i;if(a){if(!t)break;i=o.nextSibling}o.parentNode.removeChild(o);if(a)break;o=u}o=g(n.parentNode,e);while(o)u=o.nextSibling,s.insertBefore(o,i),o=u},f=function(){var e=y(r.getElementById(this.start)),t=r.getElementById(this.end);this.html(""),e.parentNode.removeChild(e),t.parentNode.removeChild(t)},c=function(e){var t=g(e,this.outerHTML());while(t)nextSibling=t.nextSibling,e.appendChild(t),t=nextSibling},h=function(e){var t=r.getElementById(this.end),n=t.nextSibling,i=t.parentNode,s,o;o=g(i,e);while(o)s=o.nextSibling,i.insertBefore(o,n),o=s},p=function(e){var t=r.getElementById(this.start),n=t.parentNode,i,s;s=g(n,e);var o=t.nextSibling;while(s)i=s.nextSibling,n.insertBefore(s,o),s=i}}o.prototype.html=function(e){this.checkRemoved();if(e===undefined)return this.innerHTML;a.call(this,e),this.innerHTML=e},o.prototype.replaceWith=function(e){this.checkRemoved(),a.call(this,e,!0)},o.prototype.remove=f,o.prototype.outerHTML=l,o.prototype.appendTo=c,o.prototype.after=h,o.prototype.prepend=p,o.prototype.startTag=d,o.prototype.endTag=v,o.prototype.isRemoved=function(){var e=r.getElementById(this.start),t=r.getElementById(this.end);return!e||!t},o.prototype.checkRemoved=function(){if(this.isRemoved())throw new Error("Cannot perform operations on a Metamorph that is not in the DOM.")},e.Metamorph=o})(this)}(),function(){Ember.Handlebars=Ember.create(Handlebars),Ember.Handlebars.helpers=Ember.create(Handlebars.helpers),Ember.Handlebars.Compiler=function(){},Ember.Handlebars.Compiler.prototype=Ember.create(Handlebars.Compiler.prototype),Ember.Handlebars.Compiler.prototype.compiler=Ember.Handlebars.Compiler,Ember.Handlebars.JavaScriptCompiler=function(){},Ember.Handlebars.JavaScriptCompiler.prototype=Ember.create(Handlebars.JavaScriptCompiler.prototype),Ember.Handlebars.JavaScriptCompiler.prototype.compiler=Ember.Handlebars.JavaScriptCompiler,Ember.Handlebars.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",Ember.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},Ember.Handlebars.JavaScriptCompiler.prototype.appendToBuffer=function(e){return"data.buffer.push("+e+");"},Ember.Handlebars.Compiler.prototype.mustache=function(e){if(e.params.length||e.hash)return Handlebars.Compiler.prototype.mustache.call(this,e);var t=new Handlebars.AST.IdNode(["_triageMustache"]);return e.escaped&&(e.hash=e.hash||new Handlebars.AST.HashNode([]),e.hash.pairs.push(["escaped",new Handlebars.AST.StringNode("true")])),e=new Handlebars.AST.MustacheNode([t].concat([e.id]),e.hash,!e.escaped),Handlebars.Compiler.prototype.mustache.call(this,e)},Ember.Handlebars.precompile=function(e){var t=Handlebars.parse(e),n={data:!0,stringParams:!0},r=(new Ember.Handlebars.Compiler).compile(t,n);return(new Ember.Handlebars.JavaScriptCompiler).compile(r,n,undefined,!0)},Ember.Handlebars.compile=function(e){var t=Handlebars.parse(e),n={data:!0,stringParams:!0},r=(new Ember.Handlebars.Compiler).compile(t,n),i=(new Ember.Handlebars.JavaScriptCompiler).compile(r,n,undefined,!0);return Handlebars.template(i)};var e=Ember.Handlebars.normalizePath=function(e,t,n){var r=n&&n.keywords||{},i,s;return i=t.split(".",1)[0],r.hasOwnProperty(i)&&(e=r[i],s=!0,t===i?t="":t=t.substr(i.length)),{root:e,path:t,isKeyword:s}};Ember.Handlebars.getPath=function(t,n,r){var i=r&&r.data,s=e(t,n,i),o;return t=s.root,n=s.path,o=Ember.getPath(t,n),o===undefined&&t!==window&&Ember.isGlobalPath(n)&&(o=Ember.getPath(window,n)),o},Ember.Handlebars.registerHelper("helperMissing",function(e,t){var n,r="";throw n="%@ Handlebars error: Could not find property '%@' on object %@.",t.data&&(r=t.data.view),new Ember.Error(Ember.String.fmt(n,[r,e,this]))})}(),function(){Ember.String.htmlSafe=function(e){return new Handlebars.SafeString(e)};var e=Ember.String.htmlSafe;Ember.EXTEND_PROTOTYPES&&(String.prototype.htmlSafe=function(){return e(this)})}(),function(){var e=Ember.set,t=Ember.get,n=Ember.getPath,r={remove:function(t){var n=t.morph;if(n.isRemoved())return;e(t,"element",null),t._lastInsert=null,n.remove()},prepend:function(e,t){t._insertElementLater(function(){var n=e.morph;n.prepend(t.outerHTML),t.outerHTML=null})},after:function(e,t){t._insertElementLater(function(){var n=e.morph;n.after(t.outerHTML),t.outerHTML=null})},replace:function(e){var n=e.morph;e.transitionTo("preRender"),e.clearRenderedChildren();var r=e.renderToBuffer();Ember.run.schedule("render",this,function(){if(t(e,"isDestroyed"))return;e.invalidateRecursively("element"),e._notifyWillInsertElement(),n.replaceWith(r.string()),e.transitionTo("inDOM"),e._notifyDidInsertElement()})},empty:function(e){e.morph.html("")}};Ember._Metamorph=Ember.Mixin.create({isVirtual:!0,tagName:"",init:function(){this._super(),this.morph=Metamorph()},beforeRender:function(e){e.push(this.morph.startTag())},afterRender:function(e){e.push(this.morph.endTag())},createElement:function(){var e=this.renderToBuffer();this.outerHTML=e.string(),this.clearBuffer()},domManager:r}),Ember._MetamorphView=Ember.View.extend(Ember._Metamorph)}(),function(){var e=Ember.get,t=Ember.set,n=Ember.Handlebars.getPath;Ember._HandlebarsBoundView=Ember._MetamorphView.extend({shouldDisplayFunc:null,preserveContext:!1,previousContext:null,displayTemplate:null,inverseTemplate:null,path:null,pathRoot:null,normalizedValue:Ember.computed(function(){var t=e(this,"path"),r=e(this,"pathRoot"),i=e(this,"valueNormalizerFunc"),s,o;return t===""?s=r:(o=e(this,"templateData"),s=n(r,t,{data:o})),i?i(s):s}).property("path","pathRoot","valueNormalizerFunc").volatile(),rerenderIfNeeded:function(){!e(this,"isDestroyed")&&e(this,"normalizedValue")!==this._lastNormalizedValue&&this.rerender()},render:function(n){var r=e(this,"isEscaped"),i=e(this,"shouldDisplayFunc"),s=e(this,"preserveContext"),o=e(this,"previousContext"),u=e(this,"inverseTemplate"),a=e(this,"displayTemplate"),f=e(this,"normalizedValue");this._lastNormalizedValue=f;if(i(f)){t(this,"template",a);if(s)t(this,"_templateContext",o);else{if(!a){f===null||f===undefined?f="":f instanceof Handlebars.SafeString||(f=String(f)),r&&(f=Handlebars.Utils.escapeExpression(f)),n.push(f);return}t(this,"_templateContext",f)}}else u?(t(this,"template",u),s?t(this,"_templateContext",o):t(this,"_templateContext",f)):t(this,"template",function(){return""});return this._super(n)}})}(),function(){var e=Ember.get,t=Ember.set,n=Ember.String.fmt,r=Ember.Handlebars.getPath,i=Ember.Handlebars.normalizePath,s=Ember.ArrayUtils.forEach,o=Ember.Handlebars,u=o.helpers,a=function(e,t,n,s,o){var u=t.data,a=t.fn,f=t.inverse,l=u.view,c=this,h,p,d;d=i(c,e,u),h=d.root,p=d.path;if("object"==typeof this){var v=l.createChildView(Ember._HandlebarsBoundView,{preserveContext:n,shouldDisplayFunc:s,valueNormalizerFunc:o,displayTemplate:a,inverseTemplate:f,path:p,pathRoot:h,previousContext:c,isEscaped:t.hash.escaped,templateData:t.data});l.appendChild(v);var m=function(){Ember.run.once(v,"rerenderIfNeeded")};p!==""&&Ember.addObserver(h,p,m)}else u.buffer.push(r(h,p,t))};o.registerHelper("_triageMustache",function(e,t){return u[e]?u[e].call(this,t):u.bind.apply(this,arguments)}),o.registerHelper("bind",function(e,t){var n=t.contexts&&t.contexts[0]||this;return a.call(n,e,t,!1,function(e){return!Ember.none(e)})}),o.registerHelper("boundIf",function(t,n){var r=n.contexts&&n.contexts[0]||this,i=function(t){return Ember.typeOf(t)==="array"?e(t,"length")!==0:!!t};return a.call(r,t,n,!0,i,i)}),o.registerHelper("with",function(e,t){if(arguments.length===4){var n,r;t=arguments[3],n=arguments[2],r=arguments[0];var i=Ember.$.expando+Ember.guidFor(this);return t.data.keywords[i]=this,Ember.bind(t.data.keywords,n,i+"."+r),a.call(this,r,t.fn,!0,function(e){return!Ember.none(e)})}return u.bind.call(t.contexts[0],e,t)}),o.registerHelper("if",function(e,t){return u.boundIf.call(t.contexts[0],e,t)}),o.registerHelper("unless",function(e,t){var n=t.fn,r=t.inverse;return t.fn=r,t.inverse=n,u.boundIf.call(t.contexts[0],e,t)}),o.registerHelper("bindAttr",function(e){var t=e.hash,n=e.data.view,u=[],a=this,f=++Ember.$.uuid,l=t["class"];if(l!==null&&l!==undefined){var c=o.bindClasses(this,l,n,f,e);u.push('class="'+Handlebars.Utils.escapeExpression(c.join(" "))+'"'),delete t["class"]}var h=Ember.keys(t);return s(h,function(s){var o=t[s],l,c;c=i(a,o,e.data),l=c.root,o=c.path;var h=o==="this"?l:r(l,o,e),p=Ember.typeOf(h),d,v;d=function(){var i=r(l,o,e),u=n.$("[data-bindattr-"+f+"='"+f+"']");if(u.length===0){Ember.removeObserver(l,o,v);return}Ember.View.applyAttributeBindings(u,s,i)},v=function(){Ember.run.once(d)},o!=="this"&&Ember.addObserver(l,o,v),p==="string"||p==="number"&&!isNaN(h)?u.push(s+'="'+Handlebars.Utils.escapeExpression(h)+'"'):h&&p==="boolean"&&u.push(s+'="'+s+'"')},this),u.push("data-bindattr-"+f+'="'+f+'"'),new o.SafeString(u.join(" "))}),o.bindClasses=function(e,t,n,o,u){var a=[],f,l,c,h=function(e,t,n,i){var s=t!==""?r(e,t,i):!0;if(!!s&&n)return n;if(s===!0){var o=t.split(".");return Ember.String.dasherize(o[o.length-1])}return s!==!1&&s!==undefined&&s!==null?s:null};return s(t.split(" "),function(t){var r,s,p,d=t.split(":"),v=d[0],m=d[1],g=e,y;v!==""&&(y=i(e,v,u.data),g=y.root,v=y.path),s=function(){f=h(g,v,m,u),c=o?n.$("[data-bindattr-"+o+"='"+o+"']"):n.$(),c.length===0?Ember.removeObserver(g,v,p):(r&&c.removeClass(r),f?(c.addClass(f),r=f):r=null)},p=function(){Ember.run.once(s)},v!==""&&Ember.addObserver(g,v,p),l=h(g,v,m,u),l&&(a.push(l),r=l)}),a}}(),function(){var e=Ember.get,t=Ember.set,n=Ember.ArrayUtils.indexOf,r=/^parentView\./,i=Ember.Handlebars;i.ViewHelper=Ember.Object.create({viewClassFromHTMLOptions:function(e,t,n){var r=t.hash,i=t.data,s={},o=r["class"],u=!1;r.id&&(s.elementId=r.id,u=!0),o&&(o=o.split(" "),s.classNames=o,u=!0),r.classBinding&&(s.classNameBindings=r.classBinding.split(" "),u=!0),r.classNameBindings&&(s.classNameBindings=r.classNameBindings.split(" "),u=!0),r.attributeBindings&&(s.attributeBindings=null,u=!0),u&&(r=Ember.$.extend({},r),delete r.id,delete r["class"],delete r.classBinding);var a,f;for(var l in r){if(!r.hasOwnProperty(l))continue;Ember.IS_BINDING.test(l)&&(a=r[l],f=Ember.Handlebars.normalizePath(null,a,i),f.isKeyword?r[l]="templateData.keywords."+a:Ember.isGlobalPath(a)||(a==="this"?r[l]="bindingContext":r[l]="bindingContext."+a))}return s.bindingContext=n,e.extend(r,s)},helper:function(e,t,n){var r=n.inverse,s=n.data,o=s.view,u=n.fn,a=n.hash,f;"string"==typeof t?f=i.getPath(e,t,n):f=t,f=this.viewClassFromHTMLOptions(f,n,e);var l=s.view,c={templateData:n.data};u&&(c.template=u),l.appendChild(f,c)}}),i.registerHelper("view",function(e,t){return e&&e.data&&e.data.isRenderData&&(t=e,e="Ember.View"),i.ViewHelper.helper(this,e,t)})}(),function(){var e=Ember.get,t=Ember.Handlebars.getPath,n=Ember.String.fmt;Ember.Handlebars.registerHelper("collection",function(n,r){n&&n.data&&n.data.isRenderData&&(r=n,n=undefined);var i=r.fn,s=r.data,o=r.inverse,u;u=n?t(this,n,r):Ember.CollectionView;var a=r.hash,f={},l,c,h=a.itemViewClass,p=u.proto();delete a.itemViewClass,c=h?t(p,h,r):p.itemViewClass;for(var d in a)a.hasOwnProperty(d)&&(l=d.match(/^item(.)(.*)$/),l&&(f[l[1].toLowerCase()+l[2]]=a[d],delete a[d]));var v=a.tagName||p.tagName;i&&(f.template=i,delete r.fn);if(o&&o!==Handlebars.VM.noop){var m=e(p,"emptyViewClass");a.emptyView=m.extend({template:o,tagName:f.tagName})}return a.eachHelper==="each"&&(f._templateContext=Ember.computed(function(){return e(this,"content")}).property("content"),delete a.eachHelper),a.itemViewClass=Ember.Handlebars.ViewHelper.viewClassFromHTMLOptions(c,{data:s,hash:f},this),Ember.Handlebars.helpers.view.call(this,u,r)})}(),function(){var e=Ember.Handlebars.getPath;Ember.Handlebars.registerHelper("unbound",function(t,n){var r=n.contexts&&n.contexts[0]||this;return e(r,t,n)})}(),function(){var e=Ember.getPath;Ember.Handlebars.registerHelper("log",function(t,n){var r=n.contexts&&n.contexts[0]||this;Ember.Logger.log(e(r,t))}),Ember.Handlebars.registerHelper("debugger",function(){debugger})}(),function(){var e=Ember.get,t=Ember.set;Ember.Handlebars.EachView=Ember.CollectionView.extend(Ember._Metamorph,{itemViewClass:Ember._MetamorphView,emptyViewClass:Ember._MetamorphView,createChildView:function(n,r){n=this._super(n,r);var i=e(this,"keyword");if(i){var s=e(n,"templateData");s=Ember.copy(s),s.keywords=n.cloneKeywords(),t(n,"templateData",s);var o=e(n,"content");s.keywords[i]=o}return n}}),Ember.Handlebars.registerHelper("each",function(e,t){if(arguments.length===4){var n=arguments[0];t=arguments[3],e=arguments[2],t.hash.keyword=n}else t.hash.eachHelper="each";return t.hash.contentBinding=e,Ember.Handlebars.helpers.collection.call(this,"Ember.Handlebars.EachView",t)})}(),function(){Ember.Handlebars.registerHelper("template",function(e,t){var n=Ember.TEMPLATES[e];Ember.TEMPLATES[e](this,{data:t.data})})}(),function(){var e=Ember.Handlebars,t=e.getPath,n=Ember.get,r=e.ActionHelper={registeredActions:{}};r.registerAction=function(e,t,n,i,s){var o=(++Ember.$.uuid).toString();return r.registeredActions[o]={eventName:t,handler:function(t){return t.view=i,t.context=s,n.isState&&typeof n.send=="function"?n.send(e,t):n[e].call(n,t)}},i.on("willRerender",function(){delete r.registeredActions[o]}),o},e.registerHelper("action",function(i,s){var o=s.hash||{},u=o.on||"click",a=s.data.view,f,l,c;a.isVirtual&&(a=a.get("parentView"));if(o.target)f=t(this,o.target,s);else if(c=s.data.keywords.controller)f=n(c,"target");f=f||a,l=o.context?t(this,o.context,s):s.contexts[0];var h=r.registerAction(i,u,f,a,l);return new e.SafeString('data-ember-action="'+h+'"')})}(),function(){var e=Ember.get,t=Ember.set;Ember.Handlebars.registerHelper("yield",function(t){var n=t.data.view,r;while(n&&!e(n,"layout"))n=e(n,"parentView");r=e(n,"template"),r&&r(this,t)})}(),function(){}(),function(){}(),function(){var e=Ember.set,t=Ember.get;Ember.Checkbox=Ember.View.extend({classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","disabled"],type:"checkbox",checked:!1,disabled:!1,title:null,value:Ember.computed(function(n,r){return r!==undefined?e(this,"checked",r):t(this,"checked")}).property("checked").volatile(),change:function(){Ember.run.once(this,this._updateElementValue)},_updateElementValue:function(){var n=t(this,"title")?this.$("input:checkbox"):this.$();e(this,"checked",n.prop("checked"))},init:function(){if(t(this,"title")||t(this,"titleBinding"))this.tagName=undefined,this.attributeBindings=[],this.defaultTemplate=Ember.Handlebars.template(function(t,n,r,i,s){r=r||Ember.Handlebars.helpers;var o="",u,a,f,l,c,h=this,p="function",d=r.helperMissing,v=void 0,m=this.escapeExpression;return s.buffer.push('<label><input type="checkbox" '),u={},a="checked",u.checked=a,a="disabled",u.disabled=a,a=r.bindAttr||n.bindAttr,c={},c.hash=u,c.contexts=[],c.data=s,typeof a===p?u=a.call(n,c):a===v?u=d.call(n,"bindAttr",c):u=a,s.buffer.push(m(u)+">"),u=n,a="title",f={},l="true",f.escaped=l,l=r._triageMustache||n._triageMustache,c={},c.hash=f,c.contexts=[],c.contexts.push(u),c.data=s,typeof l===p?u=l.call(n,a,c):l===v?u=d.call(n,"_triageMustache",a,c):u=l,s.buffer.push(m(u)+"</label>"),o});this._super()}})}(),function(){var e=Ember.get,t=Ember.set;Ember.TextSupport=Ember.Mixin.create({value:"",attributeBindings:["placeholder","disabled","maxlength"],placeholder:null,disabled:!1,maxlength:null,insertNewline:Ember.K,cancel:Ember.K,focusOut:function(e){
this._elementValueDidChange()},change:function(e){this._elementValueDidChange()},keyUp:function(e){this.interpretKeyEvents(e)},interpretKeyEvents:function(e){var t=Ember.TextSupport.KEY_EVENTS,n=t[e.keyCode];this._elementValueDidChange();if(n)return this[n](e)},_elementValueDidChange:function(){t(this,"value",this.$().val())}}),Ember.TextSupport.KEY_EVENTS={13:"insertNewline",27:"cancel"}}(),function(){var e=Ember.get,t=Ember.set;Ember.TextField=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size"],value:"",type:"text",size:null})}(),function(){var e=Ember.get,t=Ember.set;Ember.Button=Ember.View.extend(Ember.TargetActionSupport,{classNames:["ember-button"],classNameBindings:["isActive"],tagName:"button",propagateEvents:!1,attributeBindings:["type","disabled","href"],targetObject:Ember.computed(function(){var t=e(this,"target"),n=e(this,"templateContext"),r=e(this,"templateData");return typeof t!="string"?t:Ember.Handlebars.getPath(n,t,{data:r})}).property("target").cacheable(),type:Ember.computed(function(e,t){var n=this.get("tagName");t!==undefined&&(this._type=t);if(this._type!==undefined)return this._type;if(n==="input"||n==="button")return"button"}).property("tagName").cacheable(),disabled:!1,href:Ember.computed(function(){return this.get("tagName")==="a"?"#":null}).property("tagName").cacheable(),mouseDown:function(){return e(this,"disabled")||(t(this,"isActive",!0),this._mouseDown=!0,this._mouseEntered=!0),e(this,"propagateEvents")},mouseLeave:function(){this._mouseDown&&(t(this,"isActive",!1),this._mouseEntered=!1)},mouseEnter:function(){this._mouseDown&&(t(this,"isActive",!0),this._mouseEntered=!0)},mouseUp:function(n){return e(this,"isActive")&&(this.triggerAction(),t(this,"isActive",!1)),this._mouseDown=!1,this._mouseEntered=!1,e(this,"propagateEvents")},keyDown:function(e){(e.keyCode===13||e.keyCode===32)&&this.mouseDown()},keyUp:function(e){(e.keyCode===13||e.keyCode===32)&&this.mouseUp()},touchStart:function(e){return this.mouseDown(e)},touchEnd:function(e){return this.mouseUp(e)},init:function(){this._super()}})}(),function(){var e=Ember.get,t=Ember.set;Ember.TextArea=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols"],rows:null,cols:null,_updateElementValue:Ember.observer(function(){this.$().val(e(this,"value"))},"value"),init:function(){this._super(),this.on("didInsertElement",this,this._updateElementValue)}})}(),function(){Ember.TabContainerView=Ember.View.extend()}(),function(){var e=Ember.get,t=Ember.getPath;Ember.TabPaneView=Ember.View.extend({tabsContainer:Ember.computed(function(){return this.nearestInstanceOf(Ember.TabContainerView)}).property().volatile(),isVisible:Ember.computed(function(){return e(this,"viewName")===t(this,"tabsContainer.currentView")}).property("tabsContainer.currentView").volatile()})}(),function(){var e=Ember.get,t=Ember.setPath;Ember.TabView=Ember.View.extend({tabsContainer:Ember.computed(function(){return this.nearestInstanceOf(Ember.TabContainerView)}).property().volatile(),mouseUp:function(){t(this,"tabsContainer.currentView",e(this,"value"))}})}(),function(){}(),function(){var e=Ember.set,t=Ember.get,n=Ember.getPath,r=Ember.ArrayUtils.indexOf,i=Ember.ArrayUtils.indexesOf;Ember.Select=Ember.View.extend({tagName:"select",defaultTemplate:Ember.Handlebars.template(function(t,n,r,i,s){function m(e,t){var n="",i,s,o,u;return t.buffer.push("<option>"),i=e,s="view.prompt",o={},u="true",o.escaped=u,u=r._triageMustache||e._triageMustache,l={},l.hash=o,l.contexts=[],l.contexts.push(i),l.data=t,typeof u===h?i=u.call(e,s,l):u===d?i=p.call(e,"_triageMustache",s,l):i=u,t.buffer.push(v(i)+"</option>"),n}function g(e,t){var n,i,s,o;n=e,i="Ember.SelectOption",s={},o="this",s.contentBinding=o,o=r.view||e.view,l={},l.hash=s,l.contexts=[],l.contexts.push(n),l.data=t,typeof o===h?n=o.call(e,i,l):o===d?n=p.call(e,"view",i,l):n=o,t.buffer.push(v(n))}r=r||Ember.Handlebars.helpers;var o="",u,a,f,l,c=this,h="function",p=r.helperMissing,d=void 0,v=this.escapeExpression;return u=n,a="view.prompt",f=r["if"],l=c.program(1,m,s),l.hash={},l.contexts=[],l.contexts.push(u),l.fn=l,l.inverse=c.noop,l.data=s,u=f.call(n,a,l),(u||u===0)&&s.buffer.push(u),u=n,a="view.content",f=r.each,l=c.program(3,g,s),l.hash={},l.contexts=[],l.contexts.push(u),l.fn=l,l.inverse=c.noop,l.data=s,u=f.call(n,a,l),(u||u===0)&&s.buffer.push(u),o}),attributeBindings:["multiple"],multiple:!1,content:null,selection:null,prompt:null,optionLabelPath:"content",optionValuePath:"content",change:function(){t(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:Ember.observer(function(){var n=t(this,"selection"),r=Ember.isArray(n);if(t(this,"multiple")){if(!r){e(this,"selection",Ember.A([n]));return}this._selectionDidChangeMultiple()}else this._selectionDidChangeSingle()},"selection"),_triggerChange:function(){var e=t(this,"selection");e&&this.selectionDidChange(),this.change()},_changeSingle:function(){var n=this.$()[0].selectedIndex,r=t(this,"content"),i=t(this,"prompt");if(!r)return;if(i&&n===0){e(this,"selection",null);return}i&&(n-=1),e(this,"selection",r.objectAt(n))},_changeMultiple:function(){var n=this.$("option:selected"),r=t(this,"prompt"),i=r?1:0,s=t(this,"content");if(!s)return;if(n){var o=n.map(function(){return this.index-i}).toArray();e(this,"selection",s.objectsAt(o))}},_selectionDidChangeSingle:function(){var e=this.$()[0],n=t(this,"content"),i=t(this,"selection"),s=n?r(n,i):-1,o=t(this,"prompt");o&&s>-1&&(s+=1),e&&(e.selectedIndex=s)},_selectionDidChangeMultiple:function(){var e=t(this,"content"),n=t(this,"selection"),s=e?i(e,n):[-1],o=t(this,"prompt"),u=o?1:0,a=this.$("option"),f;a&&a.each(function(){f=this.index>-1?this.index+u:-1,this.selected=r(s,f)>-1})},init:function(){this._super(),this.on("didInsertElement",this,this._triggerChange)}}),Ember.SelectOption=Ember.View.extend({tagName:"option",defaultTemplate:Ember.Handlebars.template(function(t,n,r,i,s){r=r||Ember.Handlebars.helpers;var o,u,a,f,l,c=this,h="function",p=r.helperMissing,d=void 0,v=this.escapeExpression;o=n,u="view.label",a={},f="true",a.escaped=f,f=r._triageMustache||n._triageMustache,l={},l.hash=a,l.contexts=[],l.contexts.push(o),l.data=s,typeof f===h?o=f.call(n,u,l):f===d?o=p.call(n,"_triageMustache",u,l):o=f,s.buffer.push(v(o))}),attributeBindings:["value","selected"],init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},selected:Ember.computed(function(){var e=t(this,"content"),i=n(this,"parentView.selection");return n(this,"parentView.multiple")?i&&r(i,e)>-1:e==i}).property("content","parentView.selection").volatile(),labelPathDidChange:Ember.observer(function(){var e=n(this,"parentView.optionLabelPath");if(!e)return;Ember.defineProperty(this,"label",Ember.computed(function(){return n(this,e)}).property(e).cacheable())},"parentView.optionLabelPath"),valuePathDidChange:Ember.observer(function(){var e=n(this,"parentView.optionValuePath");if(!e)return;Ember.defineProperty(this,"value",Ember.computed(function(){return n(this,e)}).property(e).cacheable())},"parentView.optionValuePath")})}(),function(){}(),function(){Ember.Handlebars.bootstrap=function(e){var t='script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]';Ember.ENV.LEGACY_HANDLEBARS_TAGS&&(t+=', script[type="text/html"]'),Ember.$(t,e).each(function(){var e=Ember.$(this),t=e.attr("type"),n=e.attr("type")==="text/x-raw-handlebars"?Ember.$.proxy(Handlebars.compile,Handlebars):Ember.$.proxy(Ember.Handlebars.compile,Ember.Handlebars),r=e.attr("data-template-name")||e.attr("id"),i=n(e.html()),s,o,u,a,f;if(r)Ember.TEMPLATES[r]=i,e.remove();else{if(e.parents("head").length!==0)throw new Ember.Error("Template found in <head> without a name specified. Please provide a data-template-name attribute.\n"+e.html());o=e.attr("data-view"),s=o?Ember.getPath(o):Ember.View,u=e.attr("data-element-id"),a=e.attr("data-tag-name"),f={template:i},u&&(f.elementId=u),a&&(f.tagName=a),s=s.create(f),s._insertElementLater(function(){e.replaceWith(this.$()),e=null})}})},Ember.$(document).ready(function(){Ember.Handlebars.bootstrap(Ember.$(document))})}(),function(){}(),Ember.TEMPLATES["editor/templates/action_scale_template"]=Ember.Handlebars.compile('<div {{bindAttr style="divWrapperStyle"}}>\n    <div {{bindAttr style="divStyle"}}></div>\n  </div>\n  \n  {{#if hasFrames}}\n    <div class="left">\n      Preview frames:\n    </div>\n    <div class="left">\n      <button class="btn btn-mini" title="prev frame" {{action "prevFrame"}}><i class="icon-chevron-left"></i></button>\n      <button class="btn btn-mini" title="next frame" {{action "nextFrame"}}><i class="icon-chevron-right"></i></button>\n    </div>\n  {{/if}}\n  \n  <div style="clear:both;">\n    <div class="slider p-slider left"></div>\n    <div class="scale left">to {{observer.scale}}% of original size</div>\n  </div>'),Ember.TEMPLATES["editor/templates/action_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace">\n      <span class="label">help:</span>\n  \n      {{#if App.actionController.isAction}}\n  \n        This panel allows you to create a new <strong>action</strong>. Actions let you define what happens to your object. You start by selecting the type of action. Then step by step other options will be added until your action is complete and ready to save. There are a lot of possibilities, read the headlines and help texts to know more.\n  \n      {{else}}\n  \n        This panel allows you to create a new <strong>trigger</strong>. Triggers let you define when something happens in your game. You start by selecting the type of trigger. Then step by step other options will be added until your trigger is complete and ready to save. There are a lot of possibilities, read the headlines and help texts to know more.\n  \n      {{/if}}\n  \n    </div>\n  \n  {{/if}}\n  \n  <div class="actionContent">\n  \n    {{view Ember.ContainerView currentViewBinding="App.actionController.optionViews"}}\n  \n  </div>\n  \n  <div class="clear form-actions" style="margin:0;padding:17px 15px 18px">\n    <button class="btn" {{action "cancel" target="App.gameController"}}> \n      <i class="icon-arrow-left"></i> cancel </button>\n    \n    {{#if App.actionController.showSaveButton}}\n      \n      <button class="btn btn-success right" {{action "save" target="App.actionController"}}>\n        <i class="icon-ok icon-white"></i> apply </button>\n      <div class="actionstring right"> {{App.actionController.action.string}} </div>\n      \n    {{/if}}\n  </div>'),Ember.TEMPLATES["editor/templates/bounding_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace">\n      <span class="label">help:</span>\n  \n      Change the <strong>shape</strong> of your object. The shape defines within which area the object is clickable and when it collides with other objects. You can choose between <strong>box</strong> and <strong>circle</strong>. As default the area of the graphic is used. Use your mouse to click and drag in order to define the new shape below.\n  \n    </div>\n  \n  {{/if}}\n  \n  <div class="content">\n    <div class="btn-group element" data-toggle="buttons-radio">\n      <button id="rectButton" class="btn" {{action "useBox"}}> box </button>\n      <button id="circleButton" class="btn" {{action "useCircle"}}> circle </button>\n    </div>\n  \n    <div class="element clear" style="margin: 13px 0 10px;">\n  \n      {{view BoundingPlacementView \n        observerBinding="this"\n        typeBinding="type"\n        gameObjectBinding="gameObject"\n      }}\n  \n    </div>\n  </div>\n  \n  <div class="form-actions" style="margin:0;padding:17px 15px 18px">\n    <button class="btn" {{action "cancel" target="App.gameController"}}> \n      <i class="icon-arrow-left"></i> cancel </button>\n    <button class="btn btn-success right" {{action "save"}}><i class="icon-ok icon-white"></i> apply </button>\n    <div class="boundingMessage right">{{message}}</div>\n  </div>'),Ember.TEMPLATES["editor/templates/frame_template"]=Ember.Handlebars.compile('<div style="\n    height: {{unbound wrapperHeight}}px;\n  ">\n  \n  <ul class="frames" style="\n    background-image:url(\'{{unbound graphic.imagePath}}\');\n    background-repeat:no-repeat;\n    width:{{unbound wrapperWidth}}px;\n    height:{{unbound graphic.frameHeight}}px;\n  ">\n    \n    {{#each frames}}\n    \n      {{#view SelectView\n        contentBinding = "this"\n        controllerBinding = "observer"\n        selectFunctionBinding = "observer.decide"\n      }}\n      \n        <li class="frame" {{action "select"}} style="\n          width:{{unbound content.frameWidth}}px;\n          height:{{unbound content.frameHeight}}px;" onclick="">\n          {{content.number}}\n        </li>\n      \n      {{/view}}\n    \n    {{/each}}\n    \n    {{#if selected}}\n      <div {{bindAttr style="divStyle"}}></div>\n    {{/if}}\n    \n  </ul>\n    \n  </div>'),Ember.TEMPLATES["editor/templates/game_object_template"]=Ember.Handlebars.compile('<div class="graphic gameObject" onclick="">\n  \n      <div {{bindAttr style="content.graphic.divStyle"}}></div>\n  \n      <div class="name"> {{content.name}} </div>\n  \n      <div class="movehandle" style="position:absolute;bottom:2px;left:-2px;height:14px"></div>\n  \n  </div>'),Ember.TEMPLATES["editor/templates/graphic_template"]=Ember.Handlebars.compile('<button class="frame_graphic graphic" style="\n    width:{{unbound App.libraryController.thumbSizeWidth}}px;\n    height:{{unbound App.libraryController.thumbSizeHeight}}px;\n  ">\n  \n      <div  class="frame_graphic_element" data-frames="{{unbound "content.frameCount"}}"\n          {{bindAttr style="content.divStyle"}}>\n      </div>\n  \n      <div class="name"> {{content.name}} </div>\n  \n  </button>'),Ember.TEMPLATES["editor/templates/library_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace">\n      <span class="label">help:</span>\n  \n      {{#if App.libraryController.showBackground}}\n  \n        Select a <strong>background</strong> for your game. The background covers the whole game field and does not move. You can choose one of the backgrounds you painted, or look for ones other users made publicly available. Click on a background to see it below in full size. Then press the button at the bottom right to use it. \n    \n      {{else}}\n      \n        Select a <strong>graphic</strong> for your object. You can choose one of the graphics you painted, or look for graphics other users made publicly available. Click on a graphic to see it below in full size and with all its sprites. Then press the button at the bottom right to use this graphic.\n    \n      {{/if}}\n    \n    </div>\n  \n  {{/if}}\n  \n  <div class="content">\n    \n    <div class="libraryControls form-inline">\n      <div class="btn-group left" data-toggle="buttons-radio">\n  \n        <button id="ownButton" class="btn ttip" title="show your own paintings" {{action "showOwns" target="App.libraryController"}}>\n          <i class="icon-user"></i> own</button>\n        <button id="publicButton" class="btn ttip" title="show all available paintings" {{action "showPublics" target="App.libraryController"}}>\n          <i class="icon-globe"></i> public</button>\n  \n      </div>\n  \n      {{#unless App.libraryController.showBackground}}\n  \n        <div class="btn-group left ttip" title="size filter" data-toggle="buttons-radio">\n  \n          <button id="smallButton" class="btn" {{action "showSmall"}}>small</button>\n          <button id="mediumButton" class="btn" {{action "showMedium"}}>medium</button>\n          <button id="largeButton" class="btn" {{action "showLarge"}}>large</button>\n  \n        </div>\n  \n      {{/unless}}\n  \n      <div class="pull-right ttip" title="search by name">\n        <input type="text" class="graphicSearchField">\n        <button id="searchButton" class="btn" {{action "search" target="App.libraryController"}}>\n          <i class="icon-search"></i>\n        </button>\n      </div>\n  \n    </div>\n  \n    <div class="clear"></div>\n  \n    {{view GraphicsView}}\n  \n    <div class="clear"></div>\n  \n    <div class="libraryPagination">\n  \n      <button id="previousButton" class="btn" {{action "previous" target="App.libraryController"}}>\n        <i class="icon-arrow-left"></i></button>\n  \n      <span class="libraryPage">{{App.libraryController.page}} / {{App.libraryController.pages}}</span>\n  \n      <button id="nextButton" class="btn" {{action "next" target="App.libraryController"}}>\n        <i class="icon-arrow-right"></i></button>\n  \n    </div>\n  \n  </div>\n  \n  {{#if App.libraryController.graphic}}\n  \n    <div class="graphicPreview">\n      <div class="previewImage" {{bindAttr style="App.libraryController.graphic.widthStyle"}}>\n        <img {{bindAttr alt="App.libraryController.graphic.name"}}\n          {{bindAttr src="App.libraryController.graphic.imagePath"}} />\n      </div>\n    </div>\n  \n  {{/if}}\n  \n  <div class="form-actions" style="margin:0;padding:17px 15px 18px">\n    <button class="btn" {{action "cancel" target="App.gameController"}}> \n      <i class="icon-arrow-left"></i> cancel </button>\n      \n      {{#if App.libraryController.graphic}}\n      \n        <button class="btn btn-success right" {{action "selectGraphic" target="App.libraryController"}}>\n          <i class="icon-ok icon-white"></i> ok </button>\n        <div class="actionstring right"> use: {{App.libraryController.graphic.name}} </div>\n      \n      {{/if}}\n      \n  </div>'),Ember.TEMPLATES["editor/templates/main_template"]=Ember.Handlebars.compile('<div class="editor_content">\n  \n    <div class="helpButton" title="help option" data-content="Check to enable help messages, tooltips and popovers like this. Keep this option on, as long as you are not familiar with this editor." data-placement="left">\n      <label class="checkbox">\n        {{view Ember.Checkbox checkedBinding="App.showhelp"}} show help\n      </label>\n    </div>\n  \n    <h2 class="page-header">game<span>stage</span></h2>\n    \n    {{#if App.showhelp}}\n    \n      <div class="help bottomSpace">\n        <span class="label">help:</span>\n        This is the <strong>stage</strong> of the game editor. The buttons and elements on top let you change your game, the bar below lets you test if it works the way you want. The green button at the right bottom will lead you to a final panel for publishing your game.\n        <br /><strong>Tip:</strong> You can move objects around by dragging them.\n      </div>\n    \n    {{/if}}\n  \n    <div class="topbar">\n  \n      <div id="trash" class="right ttip" {{action "trash"}} title="throw the game away"><i class="icon-trash"></i> trash game </div>\n  \n      <div id="objects" class="left ttip" {{action "showObjects" target="App.gameController"}}\n        title="see list of all objects in the game"> objects </div>\n          \n      <div id="background" class="left ttip" {{action "searchBackground" target="App.gameController"}}\n        title="select a background"> background </div>\n          \n      <div id="duration" class="pop" title="game duration" data-content="Use the slider to set the duration of the game from 5 to 30 seconds. If the time is over, the game is lost." data-placement="top">\n        <div id="durationLabel" class="left"><i class="icon-time"></i> duration</div>\n        <div id="slider" class="left p-slider"></div>\n        <div id="durationValue" class="left">{{App.game.displayDuration}}</div>\n      </div>\n      \n    </div>\n    \n    <div id="stage">\n    \n      {{view PlayerView \n        type="stage"\n        playerBinding="player"\n      }}\n    \n      <div class="bar btn-group">\n        <div class="btn play left ttip" {{action "play"}}><i class="icon-play"></i> play </div>\n        <div class="btn stop left ttip" {{action "stop"}}><i class="icon-stop"></i> stop </div>\n        \n        <div class="btn view right pop" {{action "debug"}} data-toggle="button" title="detail view" \n          data-content="Enable this to see information about the game objects like: collision area, counter value, movement target/direction, click/contact areas." data-placement="top">\n          <i class="icon-wrench"></i> \n          detail view \n        </div>\n        \n        <div class="timelineWrapper">\n          <canvas class="timeline playerTimeline"></canvas>\n        </div>\n      </div>\n    \n    </div>\n    \n    <div style="height:100px">\n      \n      <div class="ptn-success right ttip" title="prepare your game for publishing" data-placement="bottom" {{action "finalize" target="App.gameController"}}> \n      finalize game </div>\n      \n    </div>\n    \n    {{view OverlayView}}\n  \n  </div>'),Ember.TEMPLATES["editor/templates/objects_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace" style="margin-bottom:10px">\n      <span class="label">help:</span>\n  \n      The list on the left shows you all objects in your game. Click on one to select it. On the right you then see the selected object. At the top you can change name, graphic and shape. Beneath is the list of behaviors, which define how the object reacts to player input and events in the game.\n      <br /><strong> Tip: </strong> You can drag objects up and down in the list to change their ordering in the game.\n  \n    </div>\n  \n  {{/if}}\n  \n  <table>\n  \n    <tr>\n  \n      <td class="objectsLeft" valign="top">\n  \n        {{view GameObjectsView\n          contentBinding = "App.gameObjectsController.content"\n          observerBinding = "App.gameObjectsController"\n        }}\n  \n        <div class="clear"></div>\n  \n        <button class="btn pop" title="new object" data-content="Objects are the actors in your game. They have a certain graphic and position on the field. You can give them behaviours to make them move, play animations and react to player input." {{action "searchGraphic" target="App.gameController"}}>\n          <i class="icon-plus"></i> object </button>\n  \n      </td>\n  \n      <td class="objectsRight" valign="top">\n  \n        {{#if App.gameObjectsController.current}}\n  \n          {{#view GameObjectView contentBinding = "App.gameObjectsController.current"}}\n  \n            <div class="gameObjectThumb left">\n              <div {{bindAttr style="content.graphic.divStyle"}}></div>\n            </div>\n  \n            <div class="left" style="margin-left:15px">\n  \n              <h5 style="margin: 5px 0 10px"> settings </h5>\n  \n              <div class="form-horizontal ttip" title="change the name of the object" style="margin-bottom:9px">\n  \n                <span style="margin-right:5px"> name: </span>\n  \n                {{view Ember.TextField valueBinding="content.name" maxlength="10"}}\n  \n              </div>\n  \n              <div class="btn-group">\n  \n                <button class="btn ttip" title="change the graphic of the object" {{action "changeArt"}}><i class="icon-picture"></i> change graphic </button>\n                <button class="btn ttip" title="change the clickable and collidable shape" {{action "bounding"}}><i class="icon-fullscreen"></i> change shape </button>\n                <button class="btn ttip" title="duplicate this object with all its behaviors" {{action "duplicate"}}><i class="icon-retweet"></i> duplicate </button>\n                <button class="btn ttip" title="remove this object from your game" {{action "remove"}}><i class="icon-trash"></i> delete </button>\n  \n              </div>\n        \n            </div>\n        \n            <div class="clear"></div>\n  \n          {{/view}}\n    \n          <h5 style="margin: 15px 0"> behaviour </h5>\n          \n          {{#if App.showhelp}}\n          \n            <div class="help bottomSpace">\n              <span class="label">help:</span>\n              All <strong> start actions </strong> get executed as soon as the game starts.\n            </div>\n          \n          {{/if}}\n  \n          <ul id="behaviours">\n            {{#view BehaviourView \n              contentBinding = "App.behaviourController.startBehaviour"\n              controllerBinding = "App.behaviourController"\n            }}\n              <li class="behaviour">\n  \n                <div class="head" >\n  \n                    <div class="headtitle">\n                      <i class="icon-chevron-down hide"></i>\n                      <i class="icon-chevron-up"></i>\n                      start actions\n                    </div>\n  \n                </div>\n  \n                <div class="body">\n  \n                  <div class="title"> on start </div>\n  \n                  <div class="list" >\n  \n                    {{view UiActionView\n                      contentBinding= "content.actions"\n                      behaviourIDBinding= "content.ID"\n                    }}\n  \n                    <button class="btn" {{action "addAction"}}><i class="icon-plus"></i> action </button>\n  \n                  </div>\n  \n                  <div class="clear"></div>\n  \n                </div>\n  \n              </li>\n            {{/view}}\n  \n            {{#if App.showhelp}}\n  \n              <div class="help bottomSpace">\n                <span class="label">help:</span>\n                <strong> Behaviours </strong> consist of one or more <strong>triggers</strong> and one or more <strong>actions</strong>. A <strong>trigger</strong> checks the state of an object and decides when something happens. An <strong>action</strong> changes the state of an object and defines what happens in your game. \n                <br /><strong> Important: </strong> If all triggers of a behavior apply, then all actions of it will be executed. \n                <br /><strong> Tip: </strong> You can drag triggers and actions from one behavior to another.\n  \n              </div>\n            \n            {{/if}}\n  \n            {{#each App.behaviourController}}\n              {{#view BehaviourView \n                contentBinding = "this"\n                controllerBinding = "App.behaviourController"\n              }}\n  \n                <li class="behaviour">\n  \n                  <div class="head">\n  \n                    <div class="btn-group right">\n                      <button class="btn" {{action "duplicate"}}><i class="icon-retweet"></i> duplicate </button>\n                      <button class="btn" {{action "remove"}}><i class="icon-trash"></i> delete </button>\n                    </div>\n  \n                    <div class="headtitle">\n                      <i class="icon-chevron-down hide"></i>\n                      <i class="icon-chevron-up"></i>\n                      behaviour {{_parentView.contentIndex}}\n                    </div>\n  \n                  </div>\n  \n                  <div class="body clear">\n  \n                    <div class="title"> if </div>\n  \n                    <div class="list">\n  \n                      {{view UiTriggerView\n                        contentBinding= "content.triggers"\n                        behaviourIDBinding= "content.ID"\n                      }}\n  \n                      <button class="btn" style="margin-bottom:8px" {{action "addTrigger"}}>\n                        <i class="icon-plus"></i> trigger </button>\n  \n                    </div>\n  \n                    <div class="clear"></div>\n  \n                    <div class="title"> then </div>\n  \n                    <div class="list">\n  \n                      {{view UiActionView\n                        contentBinding= "content.actions"\n                        behaviourIDBinding= "content.ID"\n                      }}\n  \n                      <button class="btn" {{action "addAction"}}><i class="icon-plus"></i> action </button>\n  \n                    </div>\n  \n                    <div class="clear"></div>\n  \n                  </div>\n  \n                </li>\n              {{/view}}\n            {{/each}}\n          </ul>\n  \n          <div class="clear"></div>\n  \n          <button class="btn pop" title="new behaviour" data-content="Behaviours are the logic elements in your game. They define how an object reacts to player input and event in the game. They consist of triggers and actions." {{action "createBehaviour" target="App.behaviourController"}}>\n            <i class="icon-plus"></i> behaviour </button>\n    \n        {{else}}\n  \n          <p>Select an Object on the left.</p>\n    \n        {{/if}}\n  \n      </td>\n  \n    </tr>\n    \n  </table>\n  \n  <button id="done" class="btn btn-success ttip" title="go back to stage" data-placement="bottom" {{action "hideOverlay" target="App.mainView"}}> done </button>'),Ember.TEMPLATES["editor/templates/overlay_template"]=Ember.Handlebars.compile('<div class="overlayWrapper">\n  \n    <div class="overlay">\n  \n      <h5 class="overlayhead">{{heading}}</h5>\n  \n      <div class="closeButton" {{action "hideOverlay" target="App.mainView"}}> &times; </div>\n  \n      {{view Ember.ContainerView currentViewBinding="showView"}}\n  \n      <div class="clear"></div>\n  \n    </div>\n  \n    <div style="height:100px"></div>\n  \n    <div id="fog" {{action "hideOverlay" target="App.mainView"}}></div>\n  \n  </div>'),Ember.TEMPLATES["editor/templates/placement_template"]=Ember.Handlebars.compile('<canvas class="placement"></canvas>\n  \n  {{#if isPath}}\n    <div>\n      <button class="btn" {{ action "clearPath" }}><i class="icon-trash"></i>clear</button>\n    </div>\n  {{/if}}\n  \n  {{#if isDirection}}\n    <div>\n       {{view Ember.TextField valueBinding="{{directionAngle}}" size="3" placeholder="angle" maxlength="3" class="span1"}}\n    </div>\n  {{/if}}'),Ember.TEMPLATES["editor/templates/placing_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace">\n      <span class="label">help:</span>\n  \n      Set <strong>position</strong> and <strong>name</strong> of your new object. Use your mouse to drag the new object to your desired position on the game field. You can change this position later on the stage. Enter the name of your new object in the text field below. You can change the name later in the objects panel.\n  \n    </div>\n  \n  {{/if}}\n  \n  <div class="content">\n  \n    <div class="element clear" style="margin: 13px 0 10px;">\n  \n      {{view ObjectPlacementView\n        observerBinding="this"\n        graphicBinding="graphic"\n      }}\n  \n    </div>\n  </div>\n  \n  <div class="form-actions" style="margin:0;padding:17px 15px 18px">\n    <button class="btn" {{action "cancel" target="App.gameController"}}> \n      <i class="icon-arrow-left"></i> cancel </button>\n    <button class="btn btn-success right" {{action "save"}}><i class="icon-ok icon-white"></i> add object </button>\n    <div class="placingName right">name: {{view Ember.TextField valueBinding="name" maxlength="10"}}</div>\n  </div>'),Ember.TEMPLATES["editor/templates/player_template"]=Ember.Handlebars.compile('<div id="player">\n  \n  {{#if showHTML}}\n  \n    <canvas id="playerCanvas" class="testCanvas" width="640" height="390"></canvas>\n  \n    <div class="playerUI">\n      \n      <div class="loadScreen">&nbsp;&nbsp;&nbsp;loading...</div>\n      \n      <div class="endBg"></div>\n      <div class="winScreen endScreen">You win!</div>\n      <div class="loseScreen endScreen">You lose!</div>\n      \n      <div class="titleScreen">\n        <div class="playButton"></div>\n        <div class="titleBar">\n          <div class="titleBg"></div>\n          <div class="titleText">\n            <strong>{{App.game.title}}</strong>\n            <span>by {{App.username}}</span>\n            <i class="icon-chevron-up icon-white"></i>\n            <h2>Instructions</h2>\n            <div class="instruction">{{App.game.instructions}}</div>\n            <div class="noticeMouse">\n              <img alt="mouse move" src="/assets/mouse_move.png" />\n              <img alt="mouse click" src="/assets/mouse_click.png" />\n              <br /><small>use your mouse to play</small>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class="errorScreen">\n        <h2>An error occurred while loading the game.</h2>\n      </div>\n    \n    </div>\n    \n    <div class="playerBar">\n      <canvas class="playerTimeline"></canvas>\n      <div class="playerTimeWrapper">\n        <div class="playerTime">00:00</div>\n      </div>\n      <div class="playerLogo"></div>\n    </div>\n  \n  {{else}}\n  \n    <canvas id="playerCanvas" class="stageCanvas"></canvas>\n  \n  {{/if}}\n  \n  </div>'
),Ember.TEMPLATES["editor/templates/publish_template"]=Ember.Handlebars.compile('{{#if App.showhelp}}\n  \n    <div class="help withSpace">\n      <span class="label">help:</span>\n  \n      <strong>Publish</strong> your game. Use the panels on the left to give your game a title and a short instruction. The checklist below tells you what else you need in order to publish. On the right you see how your game will finally look. You need to win your game before publishing to assure that it\'s not too hard. Take a snapshot of your game for the gallery by using the button \'take snapshot\'.\n      <br /><strong>Important:</strong> As soon as your game is published you can\'t make any changes.\n  \n    </div>\n  \n  {{/if}}\n  \n  <div class="content">\n    <div class="titlePanel left">\n      <div class="pop" title="title" data-content="Provide a name for your game. This can be anything, really.">\n        <h4>title</h4>\n        {{view Ember.TextField valueBinding="App.game.title" size="10" placeholder="game title" maxlength="42"}}\n      </div>\n  \n      <div class="pop" title="instrucions" data-content="Tell your players how to play your game. Be aware that your players might have no idea how your game works.">\n        <h4>instructions</h4>\n        {{view Ember.TextArea valueBinding="App.game.instructions" placeholder="game instructions" maxlength="100"}}\n      </div>\n  \n      <div class="pop" title="tags" data-content="Tags are used to make your game searchable. Provide words that describe your game.">\n        <h4>tags</h4>\n        <ul id="game-tags" ></ul>\n      </div>\n  \n      <h4>checklist</h4>\n      <ul id="check-list"></ul>\n  \n    </div>\n  \n    <div class="left" style="margin-bottom:15px">\n      {{view PlayerView\n        type="test"\n        playerBinding="player"\n        showHTML="true"\n        corsSave="true"\n      }}\n    </div>\n  </div>\n  \n  <div class="clear form-actions" style="margin:0;padding:17px 15px 18px">\n    \n    <button class="btn" {{action "cancel" target="App.gameController"}} style="margin-top:6px"> \n      <i class="icon-arrow-left"></i> cancel </button>\n    \n    <button {{action "takeSnapshot"}} class="btn" style="margin-top:6px">\n      <i class="icon-camera"></i> take snapshot (key s) </button>\n    \n    <div {{action "publish"}} class="ptn-success right">publish game</div>\n  </div>\n  \n  <ul id="snapshots" class="thumbnails"></ul>'),Ember.TEMPLATES["editor/templates/question_template"]=Ember.Handlebars.compile('<div class="question">{{content}}</div>\n  \n  {{#if help}}\n    {{#if App.showhelp}}\n      <div class="help withSpace">\n        <span class="label">help:</span>\n        {{help}}\n      </div>\n    {{/if}}\n  {{/if}}'),Ember.TEMPLATES["editor/templates/ui_action_template"]=Ember.Handlebars.compile('<div class="left movehandle"></div>\n  \n  <button class="btn right ttip" title="delete" {{action "remove"}}><i class="icon-trash"></i></button>\n  <button class="btn right ttip" title="edit" {{action "edit"}}><i class="icon-wrench"></i></button>\n  \n  <div class="text">{{content.string}}</div>'),Ember.TEMPLATES["paint/templates/color_picker_template"]=Ember.Handlebars.compile('<div id="colorpicker">\n  \n    <div id="colorfield" class="left"></div>\n    \n    <ul id="lastColorList" class="ttipBottom left" title="Last used colors">\n      <li class="lastColorItem"></li>\n      <li class="lastColorItem"></li>\n      <li class="lastColorItem"></li>\n      <li class="lastColorItem"></li>\n      <li class="lastColorItem"></li>\n      <li class="lastColorItem"></li>\n    </ul>\n    \n    {{view Ember.TextField valueBinding="color" id="colortext" class="left"}}\n    \n    <canvas id="colorselect" class="left"></canvas>\n    \n    <button {{action "pipetteTool" target="App.paintController"}} class="pipette selectable ttipBottom left" title="Pick color"></button>\n  \n  </div>'),Ember.TEMPLATES["paint/templates/paint_size_template"]=Ember.Handlebars.compile('<div id="paint-size-wrapper">\n    \n    <h2 class="page-header">select<span>imagetype</span></h2>\n    \n    <div class="row" style="margin-top:20px">\n      \n      <div class="span3">\n  \n        <p>Select the type of image you want to paint on the right.</p>\n  \n        <h4 style="margin-top:50px">background</h4>\n  \n        <p>A background covers the whole field and is not moveable.</p>\n  \n        <h4 style="margin-top:50px">graphic</h4>\n  \n        <p>Graphics are used for movable game objects. They can have multiple frames for different states or animation.</p>\n  \n        <div class="form-inline object_size_form">\n          Set size:\n          <input type="text" class="objWidth sizeInput ttip span1" value="128" title="width" size="3" maxlength="3"> x \n          <input type="text" class="objHeight sizeInput ttip span1" value="128" size="2" title="height" size="3" maxlength="3"> px\n        </div>\n  \n      </div>\n  \n      <div class="sizeWrapper span9">\n      \n        <div id="background" class="paint-type" data-type="background">\n          <p>background 640 x 390</p>\n        </div>\n  \n        <div id="object" class="paint-type pop" data-type="object" title="Sprite size" data-content="Drag the handle at the corner to set your desired image size.">\n      \n          <div id="canvas-size"></div>\n      \n          <p>graphic {{width}} x {{height}}</p>\n      \n        </div>\n  \n      </div>\n    \n    </div>\n    \n    <div {{action "start"}} id="startPainting" class="ptn-success">start painting a new object</div>\n  \n    \n  </div>'),Ember.TEMPLATES["paint/templates/paint_template"]=Ember.Handlebars.compile('<h2 class="page-header">paint<span>{{type}}</span> <small>{{width}}x{{height}}</small></h2>\n  \n  <div id="paint-wrapper">\n  \n    <div id="sprites-area" class="right">\n    \n      <div class="btn-group" data-toggle="buttons-radio">\n        \n        <div id="spritesButton" class="btn active" {{action "showSprites"}}>frames</div>\n        <div id="playerButton" class="btn" {{action "showAnimation"}}>animation</div>\n        \n      </div>\n    \n      {{#if isSprites}}\n    \n        {{view SpritesView id="sprites-area-scroll"}}\n    \n        <div>\n          <button style="float:right; margin-right:5px" {{action "copySprite"}} class="duplicate ttipBottom" title="duplicate sprite"></button>\n          \n          <div style="float:right" class="piece"></div>\n          \n          <button style="float:right" {{action "removeSprite"}} class="remove ttipBottom" title="remove sprite"></button>\n          \n          <div style="float:right" class="piece"></div>\n          \n          <button style="float:right" {{action "addSprite"}} class="add ttipBottom" title="add new sprite"></button>\n          \n          <div class="piece" style="margin-left:0"></div>\n        </div>\n      \n      {{else}}\n      \n        <div id="sprites-area-scroll">\n          \n          <canvas id="playerCanvas" class="spriteView selected" {{bindAttr width="width"}} {{bindAttr height="height"}}></canvas>\n          \n        </div>\n      \n        <div>\n          <div style="float:right; margin-right: 10px;">\n            <input style="text-align:right" type="text" id="playDelay" value="300" size="2" class="span1 ttip" title="Set animation speed (milliseconds)">ms\n          </div>\n          <button style="float:right" {{action "start" target="App.spritePlayer"}} id="playButton"></button>\n          <button style="float:right" {{action "stop" target="App.spritePlayer"}} id="stopButton"></button>\n          <div class="hide">\n            <input type="checkbox" value="1" id="replayLoop" class="ttip" title="Loop the animation"> Loop\n          </div>\n          <div class="piece" style="margin-left:0"></div>\n        </div>\n      \n      {{/if}}\n    \n    </div>\n  \n    <div class="tool-bar">\n      \n      <button {{action "pencilTool" target="App.paintController"}} class="pencil selectable ttip" title="Draw with pencil"></button>\n      <button {{action "eraseTool" target="App.paintController"}} class="eraser selectable ttip" title="Erase area"></button>\n      <button {{action "fillTool" target="App.paintController"}} class="fill selectable ttip" title="Fill area"></button>\n      <button id="loadFileButton" class="loadfile selectable ttip" title="Load file from hard drive"></button>\n      <form style="display:none;">\n        <input type="file" id="file" accept="image/*" />\n        <input type="reset" id="reset" />\n      </form>\n      <button {{action "selectTool" target="App.paintController"}} class="select selectable ttip" title="select area"></button>\n      \n      <div class="piece"></div>\n      \n      <button {{action "drawLineTool" target="App.paintController"}}  class="lineTool selectable ttip" title="Draw line"></button>\n      <button {{action "drawRectTool" target="App.paintController"}} class="rectangle selectable ttip" title="Draw rectangle"></button>\n      <button {{action "drawCircleTool" target="App.paintController"}} class="circle selectable ttip" title="Draw circle"></button>\n      <button {{action "drawRectFillTool" target="App.paintController"}} class="rectanglefill selectable ttip" title="Draw filled rectangle"></button>\n      <button {{action "drawCircleFillTool" target="App.paintController"}} class="circlefill selectable ttip" title="Draw filled circle"></button>\n      \n      <div class="piece"></div>\n      \n      <button {{action "flipVertical" target="App.paintController"}} class="flipv ttip" title="Flip sprite vertically"></button>\n      <button {{action "flipHorizontal" target="App.paintController"}} class="fliph ttip" title="Flip sprite horizontally"></button>\n      <button {{action "rotateLeft" target="App.paintController"}} class="rotl ttip" title="Rotate sprite left"></button>\n      <button {{action "rotateRight" target="App.paintController"}} class="rotr ttip" title="Rotate sprite right"></button>\n         \n      <div class="piece"></div>\n      \n      <button {{action "undoTool" target="App.paintController"}} class="undo ttip" title="Undo"></button>\n      <button {{action "redoTool" target="App.paintController"}} class="redo ttip" title="Redo"></button>\n  \n      <div class="piece"></div>\n  \n      <button {{action "clearTool" target="App.paintController"}} class="clearTool ttip" title="Clear current sprite"></button>\n      \n      <div class="clear"></div>\n    \n    </div>\n    \n    <div id="zoom-canvas-area">\n      \n      <div id="mouse-area">\n      \n        <div id="paint-area">\n      \n          <canvas id="patternCanvas"></canvas>\n      \n          <canvas id="screenCanvas"></canvas>\n      \n          <canvas id="toolCanvas"></canvas>\n      \n        </div>\n      \n      </div>\n    \n    </div>\n  \n    <div class="tool-bar">\n      \n      <div class="sliderWrapper">\n        <span style="margin-left:6px"><i class="icon-search"></i></span>\n        <div id="zoomSlider" class="p-slider"></div>\n        <div id="zoomValue"> {{App.paintController.zoom}}x </div>\n      </div>\n      \n      <div class="piece"></div>\n      \n      <div class="sliderWrapper">\n        <span><i class="icon-pencil"></i></span>\n        <div id="sizeSlider" class="p-slider"></div>\n        <div id="sizeValue"> {{App.paintController.size}}px </div>\n      </div>\n      \n      <div class="piece"></div>\n      \n      {{#if App.paintController.notBackground}}\n      \n        <div {{action "toggleBackground"}} class="toggleBgButton ttipBottom" title="Toggle the background pattern"></div>\n      \n        <div class="piece"></div>\n      \n      {{/if}}\n      \n      {{view ColorPickerView class = "right"}}\n  \n      <div class="clear"></div>\n  \n    </div>\n  \n  </div>\n  \n  <div class="well" style="overflow:auto">\n  \n    <button class="btn left btn-danger" title="Delete all and go back to size selection" {{action "goToTypeSelection" target="App.paintController"}}><i class="icon-arrow-left icon-white"></i> cancel</button>\n    \n    <div class="ptn-success right" {{action "save" target="App.paintController"}}>save image</div>\n    \n    <div class="right" style="margin-right:14px">\n  \n      <input type="text" style="margin-bottom:4px" id="imageName" placeholder="image name" class="ttipBottom" title="Name of the image">\n  \n      <label class="checkbox" style="margin:0">\n        <input type="checkbox" checked="checked" id="makePublic"  class="pop" title="Publish your work" data-content="Check if you want to share this drawing with others"> make public\n      </label>\n  \n    </div>\n  \n  </div>');if(document.domain!=="localhost"){var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-32425368-1"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()}var ActionController=Ember.Object.extend({mode:"action",isAction:function(){return this.mode==="action"}.property("mode"),action:null,actionCopy:null,actionIDs:["moveInDirection","moveInRandom","moveInLocation","moveInObject","moveToLocation","moveToObject","jumpToLocation","jumpToObject","jumpToArea","moveRoam","moveSwap","moveStop","moveAlongPath","scaleSize","flipObject","artToFrame","artPlay","artStop","artChange","gameWin","gameLose","counterSet","counterUp","counterDown"],triggerIDs:["clickObject","clickArea","touchObject","touchArea","overlapObject","overlapArea","timeExact","timeRandom","counterEqualsNumber","counterEqualsObject","counterGreaterNumber","counterGreaterObject","counterSmallerNumber","counterSmallerObject","gameWasWon","gameWasLost","gameStart"],deprecatedIDs:["gameEnd","clickSelf","gameIsWon","gameIsLost"],behaviourBinding:"App.behaviourController.current",actionOption:null,triggerOption:null,optionViews:null,choices:[],showSaveButton:!1,init:function(){var e;for(e=0;e<this.actionIDs.length;e++)this.choices.addObject(Choice.create({ID:this.actionIDs[e]}));for(e=0;e<this.triggerIDs.length;e++)this.choices.addObject(Choice.create({ID:this.triggerIDs[e]}));this.set("actionOption",ButtonOption.create({name:"action",question:"Select the type of action",buttons:["move","transform","graphic","counter","game"],decisions:[ButtonOption.create({name:"move",question:"What type of movement?",buttons:["directional","move to","jump to","roam","swap","follow path","stop"],decisions:[ButtonOption.create({name:"moveIn",question:"How should it move directional?",help:"Directional movement lets the object move in a certain direction. It will not stop by itself.",buttons:["in direction","random direction","to location","to object"],decisions:[DirectionOption.create({name:"moveInDirection",question:"Drag it to set the direction",help:"The arrow shows you in which direction the object will move",child:SpeedOption.create({name:"moveInDirectionSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveInDirection"})})}),SpeedOption.create({name:"moveInRandomSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveInRandom"})}),LocationOption.create({name:"moveInLocation",help:'The object will not stop when it reaches that location. Use "move to" if you want that',question:"Drag it to the location in which direction it should move",child:SpeedOption.create({name:"moveInLocationSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveInLocation"})})}),ObjectOption.create({name:"moveInObject",question:"Choose the object in which direction it should move",help:'The direction is set once when this action is executed and will not change. If the object should follow the target use "move to".',showOthers:!0,decision:SpeedOption.create({name:"moveInObjectSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveInObject"})})})]}),ButtonOption.create({name:"moveTo",question:"Where should it move?",help:"This option provides movements that will stop when the target is reached.",buttons:["to location","to object"],decisions:[LocationOption.create({name:"moveToLocation",question:"Drag it to the location where it should move",child:SpeedOption.create({name:"moveToLocationSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveToLocation"})})}),ObjectOption.create({name:"moveToObject",question:"Choose to which other object it should move",help:'The object will move to the target object and follow if it moves. If it should not follow use "move directional".',showOthers:!0,decision:OffsetOption.create({name:"moveToOffset",question:"Drag the object to define the offset",help:"The offset allows you to prevent objects from overlapping.",child:SpeedOption.create({name:"moveToObjectSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveToObject"})})})})]}),ButtonOption.create({name:"jumpTo",question:"Where should it jump?",help:"This option provides movements that change the position of your object right away.",buttons:["to location","to object","to area"],decisions:[LocationOption.create({name:"jumpToLocation",question:"Drag it to the location where it should jump",child:SaveOption.create({choiceID:"jumpToLocation"})}),ObjectOption.create({name:"jumpToObject",question:"Choose to which other object it should jump",showOthers:!0,decision:OffsetOption.create({name:"jumpToOffset",question:"Drag the object to define the offset",child:SaveOption.create({choiceID:"jumpToObject"})})}),AreaOption.create({name:"jumpToArea",question:"Select the area where it should randomly jump",help:"The object will jump to any random position within the area.",decision:SaveOption.create({choiceID:"jumpToArea"})})]}),AreaOption.create({name:"roam",question:"Select the area where it should roam in",help:"This option makes it possible to have an object moving freely within a certain area.",decision:ModeOption.create({name:"roamMode",question:"Which type of roaming?",help:"Each mode has a different type of movement. Try them to see the differences.",buttons:["wiggle","reflect","insect","bounce"],modes:["wiggle","reflect","insect","bounce"],decision:SpeedOption.create({name:"roamSpeed",question:"Set the speed of the movement",child:SaveOption.create({choiceID:"moveRoam"})})})}),ObjectOption.create({name:"moveSwap",question:"Choose the object to swap position",help:"The two objects will instantly switch their positions.",showOthers:!0,decision:SaveOption.create({choiceID:"moveSwap"})}),PathOption.create({name:"moveAlongPath",question:"Click on the area to set the path, which the object should follow",help:"The object will always start from its current location. Then it will move to the tip of the first arrow and so on.",child:ModeOption.create({name:"pathPlayMode",question:"Choose the play mode",buttons:["once","circular","ping-pong"],modes:["once","circular","ping-pong"],decision:SpeedOption.create({name:"moveAlongPathSpeed",question:"Set the speed of the animation",child:SaveOption.create({choiceID:"moveAlongPath"})})})}),SaveOption.create({choiceID:"moveStop"})]}),ButtonOption.create({name:"transform",question:"What type of transformation?",help:"You can change the appeareance of a game object. Select scale if you want to change the objects size or flip to mirror it in a direction.",buttons:["scale","flip"],decisions:[ScaleOption.create({name:"scaleToSize",question:"How much should it scale?",child:SpeedOption.create({name:"scaleSpeed",question:"Set the speed of the scaling",child:SaveOption.create({choiceID:"scaleSize"})})}),ModeOption.create({name:"flipMode",question:"Choose the flipping transformation mode",buttons:["horizontally","vertically","both directions"],modes:["horizontally","vertically","both"],decision:SaveOption.create({choiceID:"flipObject"})})]}),ButtonOption.create({name:"art",question:"What should the graphic do?",help:"This option lets you manipulate the graphic this object displays.",buttons:["to frame","play","stop","change"],decisions:[FrameOption.create({name:"toFrame",question:"Choose the frame it should display",help:"You can select up to the maximum of 8 frames, though your graphic might not have as much. This is one way of hiding your object.",decision:SaveOption.create({choiceID:"artToFrame"})}),FrameOption.create({name:"play",question:"Choose the start frame of the animation",help:"You can select up to the maximum of 8 frames, though your graphic might not have as much. The start frame can be bigger than the end frame. You can use empty frames as well.",decision:FrameOption.create({name:"play2",mode:"frame2",question:"Choose the end frame of your animation",decision:ModeOption.create({name:"playMode",question:"Choose the animation mode",buttons:["loop","ping-pong","once"],modes:["loop","ping-pong","once"],decision:SpeedOption.create({name:"playSpeed",question:"Set the speed of the animation",child:SaveOption.create({choiceID:"artPlay"})})})})}),SaveOption.create({choiceID:"artStop"}),ArtOption.create({name:"artChange",question:"Search in the libray for your graphic",help:"This option allows you to change the graphic of an object during the game. The object will then have the shape of the new graphic, unless you defined a different shape.",decision:SaveOption.create({choiceID:"artChange"})})]}),ButtonOption.create({name:"counter",question:"Which actions should the counter perform?",help:"Every object has a counter. At the start of the game it is 0. This counter can be manipulated and compared to numbers and other counters.",buttons:["count up","count down","set to value"],decisions:[SaveOption.create({choiceID:"counterUp"}),SaveOption.create({choiceID:"counterDown"}),CounterOption.create({name:"counterSet",question:"Set counter to which value?",child:SaveOption.create({choiceID:"counterSet"})})]}),ButtonOption.create({name:"game",question:"Choose what should happen to the game",help:"This option lets you end the game in win or loss. The game will continue for a bit, allowing you to show your congratulations to the player as well.",buttons:["win","lose"],decisions:[SaveOption.create({choiceID:"gameWin"}),SaveOption.create({choiceID:"gameLose"})]})]})),this.set("triggerOption",ButtonOption.create({name:"trigger",question:"Select the type of trigger",buttons:["click","contact","time","counter","game"],decisions:[ButtonOption.create({name:"click",question:"Click on what?",help:"Clicking is the only way for the player to interact with the game.",buttons:["object","area"],decisions:[ObjectOption.create({name:"clickObject",question:"Choose the object to trigger the click",help:"The click is triggered if it's within the object's shape",decision:SaveOption.create({choiceID:"clickObject"})}),AreaOption.create({name:"clickArea",question:"Select the area to trigger the click",help:"The click is triggered if it's within the area.",decision:SaveOption.create({choiceID:"clickArea"})})]}),ButtonOption.create({name:"contact",question:"Trigger a touch or overlapping?",help:"A touch is only triggered once when the two shapes have first contact. Overlap is triggered all the time while the two shapes have contact.",buttons:["touch","overlap"],decisions:[ObjectOption.create({name:"touch",question:"Choose the object to trigger the touch",decision:ButtonOption.create({name:"touch",question:"Touches what?",buttons:["object","area"],decisions:[Object2Option.create({name:"touchObject",question:"Choose the second object to trigger the touch",decision:SaveOption.create({choiceID:"touchObject"})}),AreaOption.create({name:"touchArea",question:"Select the area to trigger the touch",decision:SaveOption.create({choiceID:"touchArea"})})]})}),ObjectOption.create({name:"overlap",question:"Choose the object to trigger the overlap",decision:ButtonOption.create({name:"overlap",question:"Overlaps what?",buttons:["object","area"],decisions:[Object2Option.create({name:"overlapObject",question:"Choose the second object to trigger the overlap",decision:SaveOption.create({choiceID:"overlapObject"})}),AreaOption.create({name:"overlapArea",question:"Select the area to trigger the overlap",decision:SaveOption.create({choiceID:"overlapArea"})})]})})]}),ButtonOption.create({name:"time",question:"Trigger at an excact time or randomly in a range?",buttons:["exactly","randomly"],decisions:[TimeOption.create({name:"timeExact",question:"Drag the handle to the time in the game",help:"This option will only trigger once in the game, exactly when the specified percent of the game has passed.",child:SaveOption.create({choiceID:"timeExact"})}),TimeOption.create({name:"timeRandom",mode:"random",question:"Drag the handles to set the time range",help:"This option will only trigger once in the game, somewhere randomly between the specified percents.",child:SaveOption.create({choiceID:"timeRandom"})})]}),ObjectOption.create({name:"counter",question:"Choose the object to compare",decision:ButtonOption.create({name:"counter",question:"Compare objects number to what?",help:"Every object has a counter. At the start of the game it is 0. You can compare it to numbers and other counters.",buttons:["a number","other object counter"],decisions:[ButtonOption.create({name:"counterCompareToNumber",question:"Objects number should be ...?",buttons:["greater","smaller","equal"],decisions:[CounterOption.create({name:"counterGreaterNumber",question:"Greater than which number?",child:SaveOption.create({choiceID:"counterGreaterNumber"})}),CounterOption.create({name:"counterSmallerNumber",question:"Smaller than which number?",child:SaveOption.create({choiceID:"counterSmallerNumber"})}),CounterOption.create({name:"counterEqualsNumber",question:"Equal to which number?",child:SaveOption.create({choiceID:"counterEqualsNumber"})})]}),Object2Option.create({name:"counterCompareToObject",question:"Choose the object to compare with:",decision:ButtonOption.create({name:"counterCompareToObjectType",question:"Trigger, when objects number is ...?",buttons:["greater","smaller","equal"],decisions:[SaveOption.create({choiceID:"counterGreaterObject"}),SaveOption.create({choiceID:"counterSmallerObject"}),SaveOption.create({choiceID:"counterEqualsObject"})]})})]})}),ButtonOption.create({name:"game",question:"Trigger which game state?",help:"The game ends as soon as the time is over or a certain action was executed. But it will continue playing for a bit, allowing you to show your congratulations to the player using this trigger.",buttons:["is won","is lost"],decisions:[SaveOption.create({choiceID:"gameWasWon"}),SaveOption.create({choiceID:"gameWasLost"}),SaveOption.create({choiceID:"gameStart"})]})]}))},start:function(){this.actionOption.setParents(null),this.triggerOption.setParents(null),this.actionOption.setChoices(),this.triggerOption.setChoices()},reset:function(e,t){e=e||(t.decisions[0].name==="action"?"action":"trigger"),this.set("action",t?t.clone():ActionTriggerModel.create()),this.set("actionCopy",t),this.set("mode",e),this.set("showSaveButton",!1),this.set("optionViews",Ember.ContainerView.create({destroy:function(){App.actionController.action.isSearching?App.actionController.action.set("isSearching",!1):this._super()}})),t?t.choice.option.reInsert(this.action):e==="action"?this.actionOption.insert(this.action):this.triggerOption.insert(this.action)},updateDepth:function(e){var t=this.optionViews.get("childViews"),n=this.action.decisions,r=n.indexOf(e)+1;if(n.length===r)return;this.action.set("decisions",n.splice(0,r));while(t.length>r*2)t[t.length-1].removeFromParent(),this.set("showSaveButton",!1)},addOption:function(e,t){this.optionViews.get("childViews").pushObject(QuestionView.create({content:e.question,help:e.help})),this.optionViews.get("childViews").pushObject(t)},selectGraphic:function(e){var t=this.optionViews.get("childViews");t[t.length-1].observer.decide(e)},getChoice:function(e){var t=this.choices.findProperty("ID",e);return t||console.error("Unknown choice name: "+e),t},save:function(){this.mode==="action"?this.behaviour.addAction(this.action,this.actionCopy):this.behaviour.addTrigger(this.action,this.actionCopy),App.mainView.show("objectsView")}}),BehaviourController=Ember.ArrayController.extend({contentBinding:"App.gameObjectsController.current.behaviours",startBehaviourBinding:"App.gameObjectsController.current.startBehaviour",current:null,createBehaviour:function(){var e=BehaviourModel.create();this.set("current",e),this.addObject(e)},duplicateBehaviour:function(e){this.addObject(e.clone())},parseBehaviour:function(e,t){var n=BehaviourModel.create(),r,i,s;for(s=0;s<t.actions.length;s++){r=ActionTriggerModel.create().parse(t.actions[s]);if(!r)return!1;n.addAction(r)}for(s=0;s<t.triggers.length;s++){i=ActionTriggerModel.create().parse(t.triggers[s]);if(!i)return!1;n.addTrigger(i);if(t.triggers[s].ID==="gameStart")return e.set("startBehaviour",n),!0}return e.behaviours.addObject(n),!0},getBehaviour:function(e){var t;return this.startBehaviour.ID===e?t=this.startBehaviour:t=this.content.findProperty("ID",e),t||console.error("no behaviour with ID: "+e),t},moveAction:function(e,t,n,r){this.getBehaviour(n).insertAction(r,this.getBehaviour(e).removeAction(t))},moveTrigger:function(e,t,n,r){this.getBehaviour(n).insertTrigger(r,this.getBehaviour(e).removeTrigger(t))}}),GameController=Ember.Object.extend({gameBinding:"App.game",cancelView:null,cancel:function(){this.cancelView?App.mainView.show(this.cancelView):App.mainView.hideOverlay()},showObjects:function(){App.mainView.show("objectsView",!0)},searchGraphic:function(){App.libraryController.reset(!1,this.selectGraphic),App.mainView.show("libraryView",!0),this.set("cancelView","objectsView")},selectGraphic:function(e){App.mainView.placingView.set("graphic",e),App.mainView.show("placingView",!0)},createObject:function(e,t,n){App.gameObjectsController.createObject(e,t,n),App.mainView.show("objectsView")},searchArtGraphic:function(){App.libraryController.reset(!1,this.selectArtGraphic),App.mainView.show("libraryView",!0),this.set("cancelView","actionView")},selectArtGraphic:function(e){App.actionController.selectGraphic(e),App.mainView.show("actionView"),this.set("cancelView","objectsView")},searchBackground:function(){App.libraryController.reset(!0,this.selectBackground),App.mainView.show("libraryView",!0),this.set("cancelView",null)},selectBackground:function(e){this.game.setBackground(e),this.cancel()},searchChangeGraphic:function(){App.libraryController.reset(!1,this.selectChangeGraphic),App.mainView.show("libraryView",!0),this.set("cancelView","objectsView")},selectChangeGraphic:function(e){App.gameObjectsController.current.set("graphic",e),App.mainView.show("objectsView"),this.set("cancelView",null)},addTrigger:function(){App.actionController.reset("trigger"),App.mainView.show("actionView",!0),this.set("cancelView","objectsView")},addAction:function(){App.actionController.reset("action"),App.mainView.show("actionView",!0),this.set("cancelView","objectsView")},editAction:function(e){App.actionController.reset(null,e),App.mainView.show("actionView",!0),this.set("cancelView","objectsView")},setBoundingArea:function(){App.mainView.show("boundingView",!0),this.set("cancelView","objectsView")},finalize:function(){App.mainView.show("publishView",!0)},publishGame:function(e){var t=this.game.getData(),n=t.graphics.map(function(e){return e.ID});console.log(t.title,t.instructions,t.version,JSON.stringify(t),JSON.stringify(n),$("#game-tags").tagit("assignedTags").join(",")),Notifier.showLoader("Creating game! Please wait a few seconds ..."),$.ajax({url:"games/",type:"POST",data:{game:{title:t.title,instruction:t.instructions,version:t.version,data:JSON.stringify(t),preview_image_data:e,tags:$("#game-tags").tagit("assignedTags").join(" ")},graphic_ids:n},statusCode:{200:function(e){console.log(e),Storage.write("game",null),window.location=e.responseText,Notifier.hideLoader()},400:function(e){console.log(e),Notifier.hideLoader(),alert(e.responseText)},401:function(e){console.log(e),Notifier.hideLoader(),alert("not logged in: "+e.responseText)},500:function(e){console.log(e),Notifier.hideLoader(),alert("internal server error: "+e.responseText)}}})},loadGame:function(e){var t=App.game,n,r;if(!e.gameObjects||!e.gameObjects.length)return!1;t.set("title",e.title),t.set("instructions",e.instructions),e.duration&&t.set("duration",e.duration);if(e.graphics)for(n=0;n<e.graphics.length;n++)App.libraryController.loadGraphic(e.graphics[n]);e.backgroundID&&t.setBackground(App.libraryController.getGraphic(e.backgroundID));if(e.gameObjects){for(n=e.gameObjects.length-1;n>=0;n--)App.gameObjectsController.parseObject(e.gameObjects[n]);for(n=0;n<e.gameObjects.length;n++)if(!
App.gameObjectsController.parseBehaviour(e.gameObjects[n]))return App.mainView.trash(null,!0),Notifier.add("Your unfinished game could not be loaded due to compatibility issues with our new version","error").notify(),!1;App.game.gameObjectCounter=App.gameObjectsController.getMaxID()+1}return App.mainView.$("#slider").slider("value",[t.duration]),t.version!==e.version&&Notifier.add("Your unfinished game has an older version, some parts might be broken","error").notify(),!0},clear:function(){App.game.setProperties({gameObjects:[],gameObjectCounter:1,title:"",instructions:"",duration:15,background:null})}}),GameObjectsController=Ember.ArrayController.extend({contentBinding:"App.game.gameObjects",current:null,selected:null,select:function(e){this.set("current",e)},selectID:function(e,t){var n=this.getObject(e);n&&(this.set("current",n),t&&n.position.copy(t))},createObject:function(e,t,n){var r=GameObjectModel.create({name:n,graphic:e,position:t.clone()});this.select(r),this.addObject(r)},duplicateObject:function(e){var t=e.clone();this.select(t),this.addObject(t)},parseObject:function(e){var t=e.boundingArea;t&&(t.radius?t=(new Circle).copy(t):t=(new Area).copy(t)),this.addObject(GameObjectModel.create({ID:e.ID,name:e.name,graphic:App.libraryController.getGraphic(e.graphicID),position:new Vector(e.position.x,e.position.y),boundingArea:t}))},parseBehaviour:function(e){var t,n=this.getObject(e.ID);this.select(n),n.set("behaviours",[]);for(t=0;t<e.behaviours.length;t++)if(!App.behaviourController.parseBehaviour(n,e.behaviours[t]))return!1;return!0},getObject:function(e){return this.content.findProperty("ID",e)},removeGameObject:function(e){var t,n,r;for(n=0;n<this.content.length;n++){t=this.content[n],t.startBehaviour.removeGameObject(e);for(r=0;r<t.behaviours.length;r++)t.behaviours[r].removeGameObject(e)}this.removeObject(e)},getMaxID:function(){return this.content.reduce(function(e,t,n,r){return{ID:Math.max(t.ID,e.ID)}}).ID},others:function(){return this.content.without(this.current)}.property("current"),subset:function(){return this.content.without(this.selected)}.property("selected"),moveObject:function(e,t){var n=this.content[e];this.content.removeAt(e),this.content.insertAt(t,n)}}),LibraryController=Ember.ArrayController.extend({graphic:null,showBackground:!1,showOwn:!0,content:[],display:[],selectFunction:null,size:null,sizes:[{name:"all",max:256,min:0},{name:"small",max:64,min:0},{name:"medium",max:128,min:64},{name:"large",max:256,min:128}],page:1,maxPage:0,perPage:14,graphicCount:123,pages:function(){return Math.ceil(this.graphicCount/this.perPage)}.property("graphicCount","perPage"),reset:function(e,t){this.set("showBackground",e),this.set("selectFunction",t),this.set("perPage",e?10:14),this.set("size",this.sizes[0]),this.clear()},clear:function(){this.set("page",1),this.set("graphic",null)},width:function(){return this.showBackground?905:813}.property("showBackground"),thumbSizeWidth:function(){return this.showBackground?160:96}.property("showBackground"),thumbSizeHeight:function(){return(this.showBackground?98:96)+20}.property("showBackground"),graphicSaved:function(e){this.appendGraphics([e]),App.gameController.searchGraphic()},loadGraphics:function(){var e,t=this;this.showBackground?this.showOwn?e="users/current/graphics/backgrounds?":e="graphics/public?backgrounds=true&":(e=this.showOwn?"users/current/graphics":"graphics/public",e+="?min_size="+this.size.min+"&max_size="+this.size.max+"&"),e+="page="+this.page,$.ajax({url:e,type:"GET",success:function(e){e&&(typeof e=="string"&&(e=JSON.parse(e)),t.appendGraphics(e.graphics,e.size))}})},search:function(){var e=$(".graphicSearchField").val();if(!e.length)return!1;var t="/graphics/search",n=this;this.set("content",[]),$.ajax({url:t,type:"GET",data:{term:e,background:this.showBackground},success:function(e){e&&(typeof e=="string"&&(e=JSON.parse(e)),n.appendGraphics(e.graphics,e.size))}})},appendGraphics:function(e,t){var n=[],r;for(var i=0;i<e.length;i++)r=this.parseGraphic(e[i]),r&&n.push(r);this.set("display",n),this.set("graphicCount",t),this.updateButtons()},parseGraphic:function(e){var t=this.content.findProperty("ID",e.id);return t?t:e.id?(t=GraphicModel.create(),this.extendGraphic(t,e),this.addObject(t),t):null},loadGraphic:function(e){var t=GraphicModel.create({ID:e.ID,imagePath:e.url,frameWidth:e.frameWidth,frameHeight:e.frameHeight,frameCount:e.frameCount}),n=this;this.addObject(t),$.ajax({url:"/graphics/"+e.ID,type:"GET",success:function(e){e&&(typeof e=="string"&&(e=JSON.parse(e)),n.extendGraphic(t,e))}})},getGraphic:function(e){return this.content.findProperty("ID",e)},extendGraphic:function(e,t){var n=t;e.setProperties({ID:n.id,name:n.name,userName:n.user_name,imagePath:n.url,isBackground:n.background,isPublic:n.public,isOwn:n.is_own,frameCount:n.frame_count,frameWidth:n.frame_width,frameHeight:n.frame_height})},showOwns:function(){this.showOwn||(this.set("showOwn",!0),this.clear(),this.loadGraphics())},showPublics:function(){this.showOwn&&(this.set("showOwn",!1),this.clear(),this.loadGraphics())},setSize:function(e){this.size!==this.sizes[e]&&(this.set("size",this.sizes[e]),this.clear(),this.loadGraphics())},next:function(){this.page<Math.ceil(this.graphicCount/this.perPage)&&(this.set("page",this.page+1),this.set("graphic",null),this.loadGraphics())},previous:function(){this.page>1&&(this.set("page",this.page-1),this.set("graphic",null),this.loadGraphics())},select:function(e){this.set("graphic",e)},selectGraphic:function(){this.selectFunction.call(App.gameController,this.graphic)},updateButtons:function(){this.page===1?$("#previousButton").addClass("disabled"):$("#previousButton").removeClass("disabled"),this.page===Math.ceil(this.graphicCount/this.perPage)?$("#nextButton").addClass("disabled"):$("#nextButton").removeClass("disabled")}}),ActionTriggerModel=Ember.Object.extend({decisions:null,choice:null,parentGameObject:null,init:function(){this.set("decisions",this.decisions||[]),this.set("parentGameObject",App.gameObjectsController.current)},addDecision:function(e){this.decisions.addObject(e)},setChoice:function(e){this.set("choice",App.actionController.getChoice(e))},setMode:function(e){this.set("mode",e)},setObject:function(e){this.set("gameObject",e)},setObject2:function(e){this.set("gameObject2",e)},setLocation:function(e){this.set("location",e)},setArea:function(e){this.set("area",e)},setOffset:function(e){this.set("offset",e)},setFrame:function(e,t){this.set(e,t)},setGraphic:function(e){this.set("graphic",e)},setTime:function(e,t){this.set("time",e),this.set("time2",t)},speed:2,speeds:["very slow","slow","medium","fast","very fast"],setSpeed:function(e){this.set("speed",e)},speedName:function(){return this.speeds[this.speed]}.property("speed"),getSpeedName:function(){return this.speeds[this.speed]},setScale:function(e){this.set("scale",e)},angle:function(){return this.location.angle().toFixed(2)},setPath:function(e){this.set("path",e)},setCounter:function(e){this.set("counter",e)},string:function(){return this.choice?this.choice.string(this.parentGameObject.name,this):"no choice"}.property("choice","gameObject","gameObject2","parentGameObject.name","location","offset","area","frame","frame2","graphic","mode","speed","scale","time","time2","path","counter","flipObject"),clone:function(){return ActionTriggerModel.create({decisions:this.decisions.concat(),choice:this.choice,gameObject:this.gameObject===this.parentGameObject?App.gameObjectsController.current:this.gameObject,gameObject2:this.gameObject2===this.parentGameObject?App.gameObjectsController.current:this.gameObject2,location:this.location?this.location.clone():null,offset:this.offset?this.offset.clone():null,area:this.area?this.area.clone():null,frame:this.frame,frame2:this.frame2,graphic:this.graphic,time:this.time,time2:this.time2,mode:this.mode,speed:this.speed,scale:this.scale,counter:this.counter,path:this.path?this.path.clone():null})},parse:function(e){var t=e;return this.setProperties({choice:App.actionController.getChoice(t.ID),gameObject:t.objectID?App.gameObjectsController.getObject(t.objectID):null,gameObject2:t.object2ID?App.gameObjectsController.getObject(t.object2ID):null,location:t.location?(new Vector).copy(t.location):t.angle?(new Vector(1,0)).rotateSelf(t.angle):null,offset:t.offset?(new Vector).copy(t.offset):null,area:t.area?(new Area).copy(t.area):null,frame:t.frame,frame2:t.frame2,graphic:t.graphicID?App.libraryController.getGraphic(t.graphicID):null,time:t.time,time2:t.time2,mode:t.mode,speed:t.speed,scale:t.scale,path:t.path?(new Path).copy({points:t.path}):null,counter:t.counter}),this.choice?(this.set("decisions",this.choice.getDecisions()),this):!1},getData:function(e){var t={ID:this.choice.ID},n,r;try{for(n=0;n<this.decisions.length;n++){r=this.decisions[n].type;switch(r){case"empty":break;case"button":break;case"save":break;case"object":t.objectID=this.gameObject.ID;break;case"object2":t.object2ID=this.gameObject2.ID;break;case"location":t.location=this.location.getData();break;case"direction":t.angle=this.angle();break;case"path":t.path=this.path.getData();break;case"area":t.area=this.area.getData();break;case"offset":t.offset=this.offset.getData();break;case"frame":t.frame=this.frame,this.frame2&&(t.frame2=this.frame2);break;case"art":t.graphicID=this.graphic.ID,e.push(this.graphic);break;case"time":t.time=this.time,this.time2&&(t.time2=this.time2);break;case"speed":t.speed=this.speed;break;case"mode":t.mode=this.mode;break;case"counter":t.counter=this.counter;break;case"scale":t.scale=this.scale;break;case"flip":t.mode=this.mode;break;default:console.error("unknown optionType: "+r)}}}catch(i){return null}return t}}),BehaviourModel=Ember.Object.extend({ID:null,triggers:null,actions:null,open:!0,init:function(){this.ID=App.game.behaviourCounter++,this.set("triggers",[]),this.set("actions",[]),this.set("open",!0)},clone:function(){var e=BehaviourModel.create();for(var t=0;t<this.actions.length;t++)e.addAction(this.actions[t].clone());for(var t=0;t<this.triggers.length;t++)e.addTrigger(this.triggers[t].clone());return e},addAction:function(e,t,n){var r;n=n||this.actions,t?(r=n.indexOf(t),n.removeAt(r),n.insertAt(r,e)):n.addObject(e),e.set("parent",this)},addTrigger:function(e,t){this.addAction(e,t,this.triggers)},getData:function(e){var t,n,r,i;if(this.triggers.length&&this.actions.length){t={triggers:[],actions:[]};for(n=0;n<this.triggers.length;n++)r=this.triggers[n].getData(),r&&t.triggers.push(r);for(n=0;n<this.actions.length;n++)i=this.actions[n].getData(e),i&&t.actions.push(i)}return t},removeGameObject:function(e){var t=this.actions.filterProperty("gameObject",e),n=this.triggers.filterProperty("gameObject",e),r;n=n.concat(this.triggers.filterProperty("gameObject2",e));for(r=0;r<t.length;r++)this.actions.removeObject(t[r]);for(r=0;r<n.length;r++)this.triggers.removeObject(n[r])},insertAction:function(e,t){t.set("parent",this),this.actions.insertAt(e,t)},removeAction:function(e){var t=this.actions[e];return this.actions.removeAt(e),t},insertTrigger:function(e,t){t.set("parent",this),this.triggers.insertAt(e,t)},removeTrigger:function(e){var t=this.triggers[e];return this.triggers.removeAt(e),t}}),GameModel=Ember.Object.extend({version:4,title:"",instructions:"",background:null,gameObjects:[],gameObjectCounter:1,behaviourCounter:1,duration:15,setBackground:function(e){this.set("background",e)},setDuration:function(e){this.set("duration",e)},getData:function(){var e={version:this.version},t=[],n;e.title=this.title,e.instructions=this.instructions,e.duration=this.duration,this.background&&(e.backgroundID=this.background.ID,t.push(this.background));if(this.gameObjects.length){e.gameObjects=[];for(n=this.gameObjects.length-1;n>=0;n--)e.gameObjects.push(this.gameObjects[n].getData(t))}if(t.length){t=t.uniq(),e.graphics=[];for(n=0;n<t.length;n++)e.graphics.push(t[n].getData())}return e},checkWin:function(e){var t,n,r,i,s;if(e.gameObjects)for(s=0;s<e.gameObjects.length;s++){t=e.gameObjects[s];for(r=0;r<t.behaviours.length;r++){n=t.behaviours[r];for(i=0;i<n.actions.length;i++)if(n.actions[i].ID==="gameWin")return!0}}return!1},displayDuration:function(){return"00:"+(this.duration<10?"0":"")+this.duration}.property("duration")}),GameObjectModel=Ember.Object.extend({name:null,ID:null,position:null,graphic:null,behaviours:null,startBehaviour:null,boundingArea:null,init:function(){var e=ActionTriggerModel.create();e.set("type","start"),e.setChoice("gameStart"),this.ID=this.ID||App.game.gameObjectCounter++,this.set("behaviours",[BehaviourModel.create()]),this.set("startBehaviour",BehaviourModel.create()),this.startBehaviour.addTrigger(e)},setBoundingArea:function(e){this.set("boundingArea",e)},clone:function(){var e=GameObjectModel.create({name:incrementString(this.name),graphic:this.graphic,position:(new Vector(30,30)).addSelf(this.position),boundingArea:this.boundingArea?this.boundingArea.clone():null});return App.gameObjectsController.set("current",e),e.set("behaviours",this.cloneBehaviours()),e.set("startBehaviour",this.startBehaviour.clone()),e},cloneBehaviours:function(){var e=[];for(var t=0;t<this.behaviours.length;t++)e.push(this.behaviours[t].clone());return e},getData:function(e){var t={ID:this.ID,name:this.name,graphicID:this.graphic.ID,position:this.position.getData(),behaviours:[]},n,r;e.push(this.graphic),n=this.startBehaviour.getData(e),n&&t.behaviours.push(n);for(r=0;r<this.behaviours.length;r++)n=this.behaviours[r].getData(e),n&&t.behaviours.push(n);return this.boundingArea&&(t.boundingArea=this.boundingArea.getData()),t}}),GraphicModel=Ember.Object.extend({ID:null,name:null,userName:null,imagePath:null,isBackground:!1,isPublic:!1,isOwn:!1,frameCount:1,frameWidth:0,frameHeight:0,divStyle:function(){var e=this,t,n,r,i;return e.isBackground?"background-image:url("+e.imagePath+");background-size:160px 98px;width:160px;height:98px;":(t=96/Math.max(e.frameWidth,e.frameHeight),t<1?(r=e.frameWidth*t,i=e.frameHeight*t):(r=e.frameWidth<96?e.frameWidth:96,i=e.frameHeight<96?e.frameHeight:96),n={x:Math.floor((96-r)*.5),y:Math.floor((96-i)*.5)},"background-image:url("+e.imagePath+");"+"width:"+r+"px;height:"+i+"px;"+"background-size:"+r*e.frameCount+"px "+i+"px;"+"position:absolute;top:"+n.y+"px;left:"+n.x+"px;")}.property("frameWidth","frameHeight"),widthStyle:function(){return"width: "+this.frameWidth*this.frameCount+"px"}.property("frameWidth"),getData:function(){return{ID:this.ID,frameWidth:this.frameWidth,frameHeight:this.frameHeight,frameCount:this.frameCount,url:this.imagePath}}}),Choice=Ember.Object.extend({ID:null,option:null,setOption:function(e){this.set("option",e)},getDecisions:function(){return this.option.getDecisions([])},string:function(e,t){var n=e,r=t;try{switch(this.ID){case"moveInDirection":return n="move in direction "+Math.floor(r.angle()*-1/Math.PI*180)+"Ë",n+" - "+r.getSpeedName();case"moveInRandom":return"move in random direction - "+r.getSpeedName();case"moveInObject":return"move in direction of "+r.gameObject.name+" - "+r.getSpeedName();case"moveInLocation":return"move in direction of location "+r.location.string()+" - "+r.getSpeedName();case"moveAlongPath":return"move "+r.mode+" along path - "+r.getSpeedName();case"moveToLocation":return"move to location "+r.location.string()+" - "+r.getSpeedName();case"moveToObject":return n="move to "+r.gameObject.name+" - "+r.getSpeedName(),n+(r.offset.norm()?" - offset "+r.offset.string():"");case"jumpToLocation":return"jump to location "+r.location.string();case"jumpToObject":return n="jump to "+r.gameObject.name,n+(r.offset.norm()?" - offset "+r.offset.string():"");case"jumpToArea":return"jump to area "+r.area.string();case"moveRoam":return n="roam in "+r.mode+" mode within area "+r.area.string(),n+" - "+r.getSpeedName();case"moveSwap":return"swap position with "+r.gameObject.name;case"moveStop":return"stop moving";case"scaleSize":return"scale to "+r.scale+"% - "+r.getSpeedName();case"flipObject":return"flip object "+r.mode;case"artToFrame":return"display frame "+r.frame;case"artPlay":return n=r.mode==="loop"?" loop ":r.mode==="once"?" play once ":" play ping-pong ",n+" from frame "+r.frame+" to "+r.frame2+" - "+r.getSpeedName();case"artStop":return"stop the animation";case"artChange":return"change art to "+r.graphic.name;case"gameWin":return"win the game";case"gameLose":return"lose the game";case"counterUp":return"increase counter";case"counterDown":return"decrease counter";case"counterSet":return"set counter to "+r.counter;case"clickObject":return"click on "+r.gameObject.name;case"clickArea":return"click in area "+r.area.string();case"touchObject":return r.gameObject.name+" touches "+r.gameObject2.name;case"touchArea":return r.gameObject.name+" touches area "+r.area.string();case"overlapObject":return r.gameObject.name+" overlaps "+r.gameObject2.name;case"overlapArea":return r.gameObject.name+" overlaps area "+r.area.string();case"timeExact":return"after "+r.time+"%";case"timeRandom":return"sometime between "+r.time+"-"+r.time2+"%";case"gameWasWon":return"game is won";case"gameWasLost":return"game is lost";case"gameStart":return"start";case"counterGreaterNumber":return r.gameObject.name+"'s counter is greater than "+t.counter;case"counterSmallerNumber":return r.gameObject.name+"'s counter is smaller than "+t.counter;case"counterEqualsNumber":return r.gameObject.name+"'s counter is equal to "+t.counter;case"counterGreaterObject":return r.gameObject.name+"'s counter is greater than "+r.gameObject2.name+"'s counter";case"counterSmallerObject":return r.gameObject.name+"'s counter is smaller than "+r.gameObject2.name+"'s counter";case"counterEqualsObject":return r.gameObject.name+"'s counter is equal to "+r.gameObject2.name+"'s counter";default:console.error("Unknown choice name: "+this.ID)}}catch(i){return"broken"}}}),Option=Ember.Object.extend({name:null,question:null,type:"empty",action:null,decision:null,decisions:[],child:null,parent:null,insert:function(e){this.set("action",e),App.actionController.updateDepth(this.parent),this.doInsert(),e.addDecision(this),this.child&&this.child.insert(e)},doInsert:function(){},reInsert:function(e){this.set("action",e),this.parent&&this.parent.reInsert(e),this.doInsert(!0)},setParents:function(e){var t;this.set("parent",e);if(this.decisions.length)for(t=0;t<this.decisions.length;t++)this.decisions[t].setParents(this);else this.decision?this.decision.setParents(this):this.child&&this.child.setParents(this)},setChoices:function(){var e;if(this.decisions.length)for(e=0;e<this.decisions.length;e++)this.decisions[e].setChoices();else this.decision?this.decision.setChoices():this.child&&this.child.setChoices()},getDecisions:function(e){return this.parent&&this.parent.getDecisions(e),e.addObject(this),e}}),ButtonOption=Option.extend({type:"button",buttons:[],doInsert:function(e){var t=this.buttons.map(function(e){return{name:e}}),n=this.action.decisions,r;e?(this.type==="mode"?r=this.modes.indexOf(this.action.mode):(r=n.indexOf(this)+1,r=this.decisions.indexOf(n[r])),t[r].select=!0):this.type==="mode"&&this.action.setMode(null),App.actionController.addOption(this,ButtonView.create({observer:this,content:t}))},decide:function(e){var t=this.buttons.indexOf(e);this.decisions[t].insert(this.action)}}),ModeOption=ButtonOption.extend({type:"mode",modes:[],decide:function(e){var t=this.buttons.indexOf(e);this.action.mode||this.decision.insert(this.action),this.action.setMode(this.modes[t])}}),ObjectOption=Option.extend({type:"object",showOthers:!1,doInsert:function(e){e&&App.gameObjectsController.set("selected",this.action.gameObject),App.actionController.addOption(this,GameObjectsView.create({observer:this,contentBinding:"App.gameObjectsController."+(this.showOthers?"others":"content"),active:e?this.action.gameObject:App.gameObjectsController.current}))},decide:function(e){this.action.setObject(e),App.gameObjectsController.set("selected",e),this.decision.insert(this.action)}}),Object2Option=Option.extend({type:"object2",doInsert:function(e){App.actionController.addOption(this,GameObjectsView.create({observer:this,contentBinding:"App.gameObjectsController.subset",active:e?this.action.gameObject2:App.gameObjectsController.current}))},decide:function(e){this.action.setObject2(e),this.decision.insert(this.action)}}),LocationOption=Option.extend({type:"location",doInsert:function(e){App.actionController.addOption(this,LocationPlacementView.create({observer:this.action,object:App.gameObjectsController.current})),e||this.action.setLocation(App.gameObjectsController.current.position.clone())}}),DirectionOption=Option.extend({type:"direction",doInsert:function(e){App.actionController.addOption(this,DirectionPlacementView.create({observer:this.action,object:App.gameObjectsController.current})),e||this.action.setLocation(new Vector(100,0))}}),AreaOption=Option.extend({type:"area",doInsert:function(e){App.actionController.addOption(this,AreaPlacementView.create({observer:this})),e||this.action.setArea(null)},decide:function(e){this.action.area||this.decision.insert(this.action),this.action.setArea(e)}}),PathOption=Option.extend({type:"path",doInsert:function(e){App.actionController.addOption(this,PathPlacementView.create({observer:this.action,object:App.gameObjectsController.current}))}}),OffsetOption=Option.extend({type:"offset",doInsert:function(e){App.actionController.addOption(this,OffsetPlacementView.create({observer:this.action,object:App.gameObjectsController.current,object2:this.action.gameObject})),e||this.action.setOffset(new Vector(0,0))}}),SpeedOption=Option.extend({type:"speed",doInsert:function(e){App.actionController.addOption(this,SpeedView.create({observer:this.action,speed:e?this.action.speed:2})),e||this.action.setSpeed(2)}}),FrameOption=Option.extend({type:"frame",frame:0,mode:"frame",doInsert:function(e){App.actionController.addOption(this,FrameView.create({observer:this,graphic:App.gameObjectsController.current.graphic})),e||this.action.setFrame(this.mode,null)},decide:function(e){this.action[this.mode]||this.decision.insert(this.action),this.set("frame",e.number),this.action.setFrame(this.mode,e.number)}}),ArtOption=Option.extend({type:"art",graphic:null,doInsert:function(e){this.set("graphic",e?this.action.graphic:null),App.actionController.addOption(this,ArtView.create({observer:this}))},decide:function(e){this.set("graphic",e),this.action.setGraphic(e),this.decision.insert(this.action)}}),TimeOption=Option.extend({type:"time",mode:"exact",doInsert:function(e){e||this.action.setTime(randInt(20,45),this.mode==="random"?randInt(60,85):0),App.actionController.addOption(this,TimeView.create({observer:this.action,type:this.mode,min:this.action.time,max:this.action.time2}))}}),SaveOption=Option.extend({type:"save",name:"save",choiceID:null,doInsert:function(){this.action.setChoice(this.choiceID),App.actionController.set("showSaveButton",!0)},setChoices:function(){var e=App.actionController.getChoice(this.choiceID);e.setOption(this)}}),CounterOption=Option.extend({type:"counter",doInsert:function(e){App.actionController.addOption(this,CounterView.create({observer:this.action,value:e?this.action.counter:""})),e||this.action.setCounter(0)}}),ScaleOption=Option.extend({type:"scale",doInsert:function(e){App.actionController.addOption(this,ScaleView.create({observer:this.action,graphic:App.gameObjectsController.current.graphic,scale:e?this.action.scale:100})),e||this.action.setScale(100)}}),ActionView=Ember.View.extend({templateName:"editor/templates/action_template",actionBinding:"App.actionController.action",heading:function(){return App.actionController.mode+" editor"}.property("App.actionController.mode"),didInsertElement:function(){App.updateHelp()}}),QuestionView=Ember.View.extend({content:"",help:"",classNames:["clear","questionview"],templateName:"editor/templates/question_template"}),ButtonView=Ember.CollectionView.extend({content:[],observer:null,classNames:["buttonview","optionview"],attributeBindings:["data-toggle"],"data-toggle":"buttons-radio",preSelect:-1,itemViewClass:Ember.View.extend({tagName:"button",classNames:["btn"],template:Ember.Handlebars.compile("{{content.name}}"),didInsertElement:function(){this._parentView.observer.name==="trigger"?this.$().addClass("btn-primary"):this._parentView.observer.name==="action"&&this.$().addClass("btn-danger"),this.content.select&&this.$().addClass("active")},click:function(){this._parentView.observer.decide(this.content.name)}})}),GameObjectsView=Ember.CollectionView.extend({observer:null,active:null,tagName:"ul",classNames:["graphics","gameobjectsview","optionview"],emptyView:Ember.View.extend({tagName:"div",classNames:["noObject"],template:Ember.Handlebars.compile("No objects to select")}),itemViewClass:Ember.View.extend({tagName:"li",templateName:"editor/templates/game_object_template",didInsertElement:function(){var e=this;this.addObserver("App.gameObjectsController.current",function(){e.content===App.gameObjectsController.current&&e.selectSelf()}),this.content===this._parentView.active&&this.selectSelf()},click:function(){this.selectSelf(),this._parentView.observer.select?this._parentView.observer.select(this.content):this._parentView.observer.decide(this.content)},selectSelf:function(){var e=this._parentView._childViews,t;for(var t=0;t<e.length;t++)e[t].$().removeClass("selected");this.$().addClass("selected")}})}),TimeView=Ember.View.extend({tagName:"div",classNames:["timeview","optionview"],template:Ember.Handlebars.compile('<div class="time">{{time}}<span class="smallInfo">{{timeInSeconds}}</span></div><div class="slider p-slider"></div><div class="time">{{time2}}<span class="smallInfo">{{time2InSeconds}}</span></div>'),observer:null,type:null,min:0,max:0,timeInSeconds:0,didInsertElement:function(){var e=this,t=this.type==="random",n=t?[this.min,this.max]:[this.min];this.setTime(n[0],n[1]),this.$(".slider").slider({range:t,values:n,slide:function(t,n){e.setTime(n.values[0],n.values[1])}})},setTime:function(e,t){this.set("time",e+"%"),this.set("timeInSeconds",this.getTimeInSeconds(e)),t&&(this.set("time2",t+"%"),this.set("time2InSeconds",this.getTimeInSeconds(t))),this.observer.setTime(e,t)},getTimeInSeconds:function(e){return(e*App.game.get("duration")/100).toFixed(1)+" Sec."}}),FrameView=Ember.View.extend({observer:null,graphic:null,classNames:["frameview","optionview"],templateName:"editor/templates/frame_template",frames:null,init:function(){this._super(),this.set("frames",[]);for(var e=1;e<=8;e++)this.frames.addObject({number:e,observer:this.observer,frameWidth:this.graphic.frameWidth,frameHeight:this.graphic.frameHeight})},selected:function(){return this.observer.frame}.property("observer.frame"),divStyle:function(){var e=this.graphic.frameWidth,t=Math.floor(this.graphic.frameHeight*.1),n=(this.observer.frame-1)*e;return"width:"+e+"px;height:"+t+"px;background-color:black;margin-left:"+n+"px;"}.property("observer.frame"),wrapperWidth:function(){return this.graphic.frameWidth*8}.property("graphic"),wrapperHeight:function(){return this.graphic.frameHeight+20}.property("graphic")}),SpeedView=Ember.View.extend({tagName:"div",classNames:["speedview","optionview"],template:Ember.Handlebars.compile('<div class="slider p-slider left"></div><div class="speed left">{{observer.speedName}}</div>'),observer:null,speed:2,didInsertElement:function(){var e=this.observer;this.$(".slider").slider({value:this.speed,min:0,max:4,slide:function(t,n){e.setSpeed(n.value)}}),this.$(".slider").addTouch()}}),ArtView=Ember.View.extend({tagName:"div",classNames:["artview","optionview"],observer:null,template:Ember.Handlebars.compile('<div {{bindAttr style="divStyle"}}></div><button class="btn" {{action "searchGraphic"}}> search </button>'),divStyle:function(){var e=this.observer.graphic;return e?"width:"+e.frameWidth+"px;height:"+e.frameHeight+"px;border:1px solid gray;background-image:url("+e.imagePath+")":"width:128px;height:128px;border:1px solid gray;"}.property("observer.graphic"),searchGraphic:function(){App.actionController.action.set("isSearching",!0),App.gameController.searchArtGraphic()}}),CounterView=Ember.TextField.extend({classNames:["counterview","optionview"],placeholder:"number",observer:null,didInsertElement:function(){var e=this;this.addObserver("value",function(){e.observer.setCounter(parseInt(e.get("value"))||0)})}}),ScaleView=Ember.View.extend({tagName:"div",classNames:["scaleview","optionview"],templateName:"editor/templates/action_scale_template",observer:null,scale:100,graphic:null,currentFrame:0,divWrapperStyle:function(){var e=this.graphic,t=e.frameWidth*150/100,n=e.frameHeight*150/100;return"width:"+t+"px;height:"+n+"px;border:1px solid gray"}.property(),divStyle:function(){var e=this.graphic;if(e){var t=this.observer.scale,n=e.frameWidth*t/100,r=e.frameHeight*t/100,i=-(this.get("currentFrame")*n);return"background-position:"+i+"px;margin:auto;width:"+n+"px;height:"+r+"px;background-image:url("+e.imagePath+");background-size:cover;background-repeat:no-repeat;"}}.property("observer.graphic","observer.scale","currentFrame"),didInsertElement:function(){var e=this.observer;this.$(".slider").slider({value:this.scale,min:10,max:150,step:10,slide:function(t,n){e.setScale(n.value)}}),this.$(".slider").addTouch()},nextFrame:function(){if(this.get("currentFrame")<this.graphic.frameCount-1){var e=this.currentFrame+1;this.set("currentFrame",e)}},prevFrame:function(){if(this.get("currentFrame")>0){var e=this.currentFrame-1;this.set("currentFrame",e)}},hasFrames:function(){return this.graphic.frameCount>1}.property()}),LibraryView=Ember.View.extend({templateName:"editor/templates/library_template",sizeBinding:"App.libraryController.size",heading:function(){return(App.libraryController.showBackground?"background":"graphics")+" library"}.property("App.libraryController.isBackground"),didInsertElement:function(){App.libraryController.showOwn?this.$("#ownButton").addClass("active"):this.$("#publicButton").addClass("active"),App.libraryController.loadGraphics(),this.$(".graphicSearchField").autocomplete({source:"/graphics/auto_complete?background="+App.libraryController.get("showBackground"),minLength:2}),App.updateHelp()},showSmall:function(e){this.size.name==="small"?(App.libraryController.setSize(0),this.$("#smallButton").removeClass("active"),e.stopPropagation()):App.libraryController.setSize(1)},showMedium:function(e){this.size.name==="medium"?(App.libraryController.setSize(0),this.$("#mediumButton").removeClass("active"),e.stopPropagation()):App.libraryController.setSize(2)},showLarge:function(e){this.size.name==="large"?(App.libraryController.setSize(0),this.$("#largeButton").removeClass("active"),e.stopPropagation()):App.libraryController.setSize(3)}}),GraphicsView=Ember.CollectionView.extend({tagName:"ul",classNames:["graphics"],contentBinding:"App.libraryController.display",emptyView:Ember.View.extend({tagName:"div",classNames:["noObject"],template:Ember.Handlebars.compile("No graphics to select")}),itemViewClass:Ember.View.extend({tagName:"li",templateName:"editor/templates/graphic_template",click:function(){App.libraryController.select(this.content),$.scrollTo($(".overlayWrapper").find(".libraryPagination"),{axies:"y",duration:500})}})}),MainView=Ember.View.extend({templateName:"editor/templates/main_template",gameBinding:"App.game",player:null,overlayView:null,init:function(){this._super(),this.libraryView=LibraryView.create({widthBinding:"App.libraryController.width"}),this.objectsView=ObjectsView.create({heading:"objects & behaviour",width:863}),this.actionView=ActionView.create({width:595}),this.publishView=PublishView.create({heading:"publish",width:910}),this.boundingView=BoundingView.create({heading:"bounding shape",width:645}),this.placingView=PlacingView.create({heading:"placing & name",width:450})},didInsertElement:function(){$.scrollTo($(".topbar"),{axies:"y",duration:700,offset:-30}),this.$("#slider").slider({min:5,max:30,step:5,value:App.game.duration,slide:function(e,t){App.game.setDuration(t.value)},change:function(e,t){App.mainView.updatePlayer()}})},show:function(e,t){var n=this.get(e);e==="libraryView"&&n===this.overlayView.showView&&n.didInsertElement(),e==="objectsView"&&this.save(),App.hideHelp(),this.overlayView.setWidth(n.width),this.overlayView.set("showView",n),this.overlayView.pushHeading(n.get("heading")),this.overlayView.set("isVisible",!0),$.scrollTo($(".overlayhead"),{axies:"y",duration:500,offset:-30})},hideOverlay:function(){this.overlayView.set("isVisible",!1),this.overlayView.set("headings",[]),this.updatePlayer(),App.hideHelp()},updatePlayer:function(){var e=this.player,t=App.game.getData();Storage.write("game",JSON.stringify(t)),e.parse(t,function(){App.gameObjectsController.current&&(e.selectObject=e.game.getGameObjectWithID(App.gameObjectsController.current.ID))})},save:function(
){Storage.write("game",JSON.stringify(App.game.getData()))},play:function(){this.player.fsm.start()},stop:function(){this.player.fsm.reset()},trash:function(e,t){if(t||confirm("Throw the game away?"))App.gameController.clear(),App.gameObjectsController.set("current",null),App.behaviourController.set("current",null),this.$("#slider").slider("value",[App.game.duration]),Storage.write("game",null)},debug:function(){this.player.debug()}}),OverlayView=Ember.View.extend({templateName:"editor/templates/overlay_template",isVisible:!1,headings:[],showView:null,didInsertElement:function(){var e=this;this.addObserver("showView.width",function(){e.setWidth(e.showView.width)}),App.mainView.set("overlayView",this)},pushHeading:function(e){this.headings.clear(),this.headings.pushObject(e)},popHeading:function(){this.headings.popObject()},heading:function(){return this.headings.join(" > ")}.property("headings.length"),currentHeading:function(){return this.headings.objectAt(this.headings.length-1)}.property("headings.length"),setWidth:function(e){this.$(".overlay").css({width:e+"px"})}}),BoundingView=Ember.View.extend({templateName:"editor/templates/bounding_template",gameObjectBinding:"App.gameObjectsController.current",type:"rect",area:null,didInsertElement:function(){this.gameObject.boundingArea?this.gameObject.boundingArea.radius?(this.$("#circleButton").addClass("active"),this.useCircle()):(this.$("#rectButton").addClass("active"),this.useBox()):this.type==="rect"?this.$("#rectButton").addClass("active"):this.$("#circleButton").addClass("active"),App.updateHelp()},useBox:function(){this.set("type","rect")},useCircle:function(){this.set("type","circle")},setArea:function(e){this.set("area",e.width||e.radius?e:null)},message:function(){return this.area?this.area.radius?"circle: "+this.area.string():"box: "+this.area.string():"use area of graphic"}.property("area"),save:function(){this.gameObject.setBoundingArea(this.area),App.gameController.cancel(),this.set("area",null)}}),PlacingView=Ember.View.extend({templateName:"editor/templates/placing_template",graphic:null,position:null,name:null,didInsertElement:function(){this.set("position",new Vector(320,195)),this.set("name",this.graphic.name),App.updateHelp()},save:function(){App.gameController.createObject(this.graphic,this.position,this.name)}}),RemoveView=Ember.View.extend({content:null,controller:null,remove:function(){this.get("controller").removeObject(this.get("content"))}}),SelectView=RemoveView.extend({selectFunction:null,collection:null,select:function(){this.selectFunction.call(this.controller,this.content)}}),ObjectsView=Ember.View.extend({templateName:"editor/templates/objects_template",didInsertElement:function(){this.makeSortable(),App.updateHelp(),$(".objectsLeft").addTouch(),$(".objectsRight").addTouch()},makeSortable:function(){function t(t,n){var r,i,s,o,u;return{connectWith:t,placeholder:"element",start:function(e,t){r=$(this).sortable("toArray").indexOf(t.item[0].id),o=parseInt($(this).attr("behaviourID"))},stop:function(e,t){i=$(this).sortable("toArray").indexOf(t.item[0].id),i>=0&&r!==i&&App.behaviourController[n](o,r,o,i)},receive:function(t,i){s=$(this).sortable("toArray").indexOf(i.item[0].id),u=parseInt($(this).attr("behaviourID")),$(this).sortable("cancel"),$(i.sender).sortable("cancel"),Ember.run.later(function(){App.behaviourController[n](o,r,u,s)},100),e.makeSortable()}}}var e=this;this.$(".actions").sortable("destroy"),this.$(".triggers").sortable("destroy"),this.$(".actions").sortable(t(".actions","moveAction")).disableSelection(),this.$(".triggers").sortable(t(".triggers","moveTrigger")).disableSelection(),this.$(".graphics").sortable({placeholder:"gameObject",start:function(e,t){pos=$(this).sortable("toArray").indexOf(t.item[0].id)},stop:function(e,t){pos2=$(this).sortable("toArray").indexOf(t.item[0].id),pos!==pos2&&App.gameObjectsController.moveObject(pos,pos2)}}).disableSelection()},refreshObserver:function(){var e=this;Ember.run.later(function(){e.makeSortable()},100)}.observes("App.behaviourController.content","App.behaviourController.content.length")}),UiActionTriggerView=Ember.CollectionView.extend({content:[],type:null,tagName:"ul",attributeBindings:["behaviourID"],itemViewClass:Ember.View.extend({tagName:"li",templateName:"editor/templates/ui_action_template",classNames:["element"],edit:function(){App.behaviourController.set("current",this.content.parent),App.gameController.editAction(this.content)},remove:function(){this.content.parent[this._parentView.type].removeObject(this.content)}})}),UiActionView=UiActionTriggerView.extend({classNames:["actions"],type:"actions"}),UiTriggerView=UiActionTriggerView.extend({classNames:["triggers"],type:"triggers"}),BehaviourView=SelectView.extend({didInsertElement:function(){var e=this.content;this.$(".headtitle").click(function(){$(this).parent().next().toggle(),$("i",this).toggleClass("hide"),e.set("open",!e.open)}),e.open||(this.$(".headtitle").trigger("click"),e.set("open",!1))},addTrigger:function(){App.behaviourController.set("current",this.get("content")),App.gameController.addTrigger()},addAction:function(){App.behaviourController.set("current",this.get("content")),App.gameController.addAction()},duplicate:function(){App.behaviourController.duplicateBehaviour(this.content),App.mainView.updatePlayer()},remove:function(){(!this.content.actions.length&&!this.content.triggers.length||confirm("Throw the behavior away?"))&&this._super()}}),GameObjectView=Ember.View.extend({content:null,remove:function(){confirm("Delete the game object?")&&(App.hideHelp(),App.gameObjectsController.removeGameObject(this.content),App.gameObjectsController.set("current",null),this.set("content",null))},duplicate:function(){App.gameObjectsController.duplicateObject(this.content)},changeArt:function(){App.gameController.searchChangeGraphic()},bounding:function(){App.gameController.setBoundingArea()}}),PlacementView=Ember.View.extend({templateName:"editor/templates/placement_template",classNames:["optionview"],observer:null,canvas:null,ctx:null,width:640,height:390,mouse:null,area:null,redraw:!1,increment:{x:96,y:60},scale:2,didInsertElement:function(){var e=this.$(".placement"),t=e[0].getContext("2d"),n=this;e.addTouch(),this.canvas=e[0],this.ctx=t,this.mouse=new Mouse(this,e[0]),this.mouse.handleDrag(),this.area=new Area,this.doDraw=function(){n.redraw||(n.redraw=!0,requestAnimationFrame(function(){n.draw(n.ctx),n.redraw=!1}))},this.initView(e[0],t)},initGame:function(e,t){var n=App.gameObjectsController.content,r=this.observer,i=this.increment,s,o;e.width=(640+i.x*2)*.5,e.height=(390+i.y*2)*.5,t.scale(.5,.5),t.translate(i.x,i.y),t.lineWidth=3,App.game.background&&(s=new Image,s.src=App.game.background.imagePath,s.onload=this.doDraw,this.background=s);if(n){this.gameObjects=[];for(o=0;o<n.length;o++)s=this.getImage(n[o]),this.object===n[o]?(this.object=s,this.gameObjects.unshift(s)):this.gameObjects.push(s)}},initSole:function(e,t){e.width=e.height=200,this.width=this.height=400,t.scale(.5,.5),t.lineWidth=3,this.increment={x:0,y:0}},getImage:function(e){var t=new Image;return t.src=e.graphic.imagePath,t.onload=this.doDraw,t.frameWidth=e.graphic.frameWidth,t.pos=e.position.clone(),t},drawGame:function(e){var t=this.increment,n;e.clearRect(-t.x,-t.y,this.width+2*t.x,this.height+2*t.y),this.background?e.drawImage(this.background,0,0):(e.fillStyle="#FFF",e.fillRect(0,0,this.width,this.height));for(n=this.gameObjects.length-1;n>=0;n--)this.drawImage(e,this.gameObjects[n])},drawObject:function(e,t){var n=this.object;e.fillStyle="#FFF",e.fillRect(0,0,this.width,this.height),this.object2&&this.drawImage(e,this.object2),this.drawImage(e,this.object,t)},drawImage:function(e,t,n){var r=t.frameWidth,i=t.height;e.drawImage(t,0,0,r,i,t.pos.x-r*.5,t.pos.y-i*.5,r,i),n&&(e.strokeStyle="#000",e.strokeRect(t.pos.x-r*.5,t.pos.y-i*.5,r,i))},mousedown:function(e){return},mousemove:function(e){return},mouseup:function(e){return}}),ObjectPlacementView=PlacementView.extend({initView:function(e,t){var n=new Image;this.initGame(e,t),n.src=this.graphic.imagePath,n.onload=this.doDraw,n.frameWidth=this.graphic.frameWidth,n.pos=this.observer.position,this.gameObjects.unshift(n),this.object=n},draw:function(e){this.drawGame(e),this.drawImage(e,this.object,!0)},mousedown:function(e){var t=this.object,n=this.area;n.set(t.pos.x-t.frameWidth*.5,t.pos.y-t.height*.5,t.frameWidth,t.height),n.contains(e.pos)||(e.dragging=!1)},mousemove:function(e){this.object.pos.addSelf(e.move),this.doDraw()}}),LocationPlacementView=ObjectPlacementView.extend({startPosition:null,initView:function(e,t){var n=this.observer;this.initGame(e,t),n.location&&(this.object.pos.copy(n.location),this.startPosition=n.parentGameObject.position)},draw:function(e){this.drawGame(e),this.drawStartLocation(e),this.drawImage(e,this.object,!0)},drawStartLocation:function(e){var t=this.object.frameWidth,n=this.object.height,r=this.startPosition.x-t*.5,i=this.startPosition.y-n*.5;e.strokeStyle="#CCC",e.dashedRect(r,i,t,n,5),e.save(),e.globalAlpha=.4,e.drawImage(this.object,0,0,t,n,r,i,t,n),e.restore()},mouseup:function(e){this.observer.setLocation(this.object.pos.clone())}}),DirectionPlacementView=ObjectPlacementView.extend({initView:function(e,t){this.initSole(e,t),this.object=this.getImage(this.object),this.object.pos.set(this.width*.5,this.height*.5).addSelf(this.observer.location)},draw:function(e){this.drawObject(e,!0),this.drawArrow(e)},drawArrow:function(e){var t=(new Vector(-this.width*.5,-this.height*.5)).addSelf(this.object.pos).angle();e.save(),e.translate(this.width*.5,this.height*.5),e.rotate(t),e.fillStyle=e.strokeStyle="#000",e.drawArrow(0,0,130,0),e.restore()},mouseup:function(e){this.observer.setLocation((new Vector(-this.width*.5,-this.height*.5)).addSelf(this.object.pos))}}),OffsetPlacementView=ObjectPlacementView.extend({initView:function(e,t){this.initSole(e,t),this.object=this.getImage(this.object),this.object.pos.set(this.width*.5,this.height*.5).addSelf(this.observer.offset),this.object2=this.getImage(this.object2),this.object2.pos.set(this.width*.5,this.height*.5)},draw:function(e){this.drawObject(e,!0)},mouseup:function(e){this.observer.setOffset((new Vector(-this.width*.5,-this.height*.5)).addSelf(this.object.pos))}}),AreaPlacementView=PlacementView.extend({area:null,initView:function(e,t){var n=this.observer;this.initGame(e,t),n.action&&n.action.area&&(this.area.copy(n.action.area),this.area.done=!0)},draw:function(e){this.drawGame(e),this.area.draw(e)},mousedown:function(e){var t=this.area;t.contains(e.pos)||(t.set(e.pos.x,e.pos.y,0,0),t.done=!1,this.doDraw())},mousemove:function(e){var t=this.area;t.done?t.move(e.move):t.resize(e.pos),this.doDraw()},mouseup:function(e){var t=this.area;t.adjust(),t.done=!0,this.observer.decide(t.clone())}}),BoundingPlacementView=AreaPlacementView.extend({type:"rect",gameObject:null,initView:function(e,t){var n=this;this.type==="circle"&&(this.area=new Circle),this.addObserver("type",function(){n.setBoundingType()}),this.width=this.gameObject.graphic.frameWidth+50,this.height=this.gameObject.graphic.frameHeight+50,e.width=this.width*2,e.height=this.height*2,t.scale(2,2),t.lineWidth=1,this.object=this.getImage(this.gameObject),this.object.pos.set(this.width*.5,this.height*.5),this.gameObject.boundingArea&&(this.area=this.gameObject.boundingArea.clone(),this.area.x+=this.width*.5,this.area.y+=this.height*.5,this.area.done=!0,this.sendArea()),this.scale=.5,this.increment={x:0,y:0}},draw:function(e){this.drawObject(e),img=this.object,w=img.frameWidth,h=img.height,e.strokeStyle="#AAA",e.dashedRect(img.pos.x-w*.5,img.pos.y-h*.5,w,h,7),e.strokeStyle="#000",this.area.draw(e)},setBoundingType:function(){this.type==="circle"&&!this.area.radius?this.area=new Circle:this.type==="rect"&&!this.area.width&&(this.area=new Area),this.sendArea(),this.doDraw()},sendArea:function(){var e=this.area.clone(),t=this.object;e.x-=t.pos.x,e.y-=t.pos.y,e.adjust(),this.observer.setArea(e)},mouseup:function(e){var t=this.area;t.adjust(),t.done=!0,this.sendArea()}}),PathPlacementView=PlacementView.extend({path:null,isPath:!0,initView:function(e,t){var n=this.observer;this.initGame(e,t),this.path=new Path,n.path&&this.path.copy(n.path),this.path.points[0]=this.object.pos.getData()},draw:function(e){this.drawGame(e),this.drawImage(e,this.object,!0),e.fillStyle=e.strokeStyle="#000",this.path.draw(e)},clearPath:function(){this.path=new Path([this.object.pos.getData()]),this.observer.setPath(this.path),this.doDraw()},mousedown:function(e){this.path.add({x:e.pos.x,y:e.pos.y}),this.observer.setPath(this.path),this.doDraw()}}),PlayerView=Ember.View.extend({templateName:"editor/templates/player_template",player:null,type:"stage",showHTML:!1,didInsertElement:function(){var e;this.type==="stage"?(e=new Stage,e.init($("#stage")),e.selectedObjectCallback=bind(App.gameObjectsController,App.gameObjectsController.selectID)):(e=new Player,e.init(this.$("#player"))),e.startRunloop(),e.parse(App.game.getData(),null,this.corsSave),this.set("player",e)},destroy:function(){this.player.terminate=!0,this._super()}}),PublishView=Ember.View.extend({templateName:"editor/templates/publish_template",player:null,values:null,checklist:null,hasLoaded:!1,snapshot:null,didInsertElement:function(){var e=this,t,n,r,i;$("#snapshots li").live("click",function(){e.setActiveSnapshot($(this))}),$(document).keydown(function(t){if(!$("input, textarea").is(":focus"))switch(t.keyCode){case 83:e.takeSnapshot()}}),$("#game-tags").tagit({itemName:"tags",singleField:!0}),this.set("snapshot",null),this.checklist=this.$("#check-list"),this.checklist.html(""),this.values={hasObjects:{status:App.gameController.game.gameObjects.length>0,fail:"Game has no objects",success:"Game has objects"},hasBackground:{status:App.gameController.game.background!==null,fail:"Game has no background",success:"Game has a background"},hasTitle:{status:App.gameController.game.title.length,fail:"Game has no title",success:"Game has a title"},hasInstructions:{status:App.gameController.game.instructions.length,fail:"Game has no instructions",success:"Game has instructions"},hasWinAction:{status:App.gameController.game.checkWin(App.gameController.game.getData()),fail:"Game has no win action",success:"Game has win action"},wasWon:{status:!1,fail:"Game was not won",success:"Game was won"},hasSnapshot:{status:!1,fail:"Game has no snapshot",success:"Game has a snapshot"}},this.addObserver("App.gameController.game.title",function(){e.checkValue("hasTitle",App.gameController.game.title.length>0)}),this.addObserver("App.gameController.game.instructions",function(){e.checkValue("hasInstructions",App.gameController.game.instructions.length>0)}),this.addObserver("snapshot",function(){e.checkValue("hasSnapshot",e.snapshot!==null)}),this.addObserver("player",function(){e.player.onWin=function(){e.checkValue("wasWon",!0)}});for(t in this.values)this.values.hasOwnProperty(t)&&(r=this.values[t].status,n=r?"label-success":"label-important",i=r?this.values[t].success:this.values[t].fail,this.checklist.append('<li id="'+t+'" class="label '+n+'">'+i+"</li>"));App.updateHelp()},checkValue:function(e,t){var n=this.values[e],r=this.checklist.find("#"+e);n.status=t,r.removeClass("label-important").removeClass("label-success"),r.addClass(t?"label-success":"label-important"),r.html(t?n.success:n.fail)},publish:function(){var e="You cannot publish your game because:\n",t=!1,n;for(n in this.values)this.values.hasOwnProperty(n)&&!this.values[n].status&&(e+="- "+this.values[n].fail+"\n",t=!0);t?alert(e):App.gameController.publishGame(this.snapshot)},takeSnapshot:function(){if(!this.player.loader.finishedLoading)return!1;var e=this.$(".testCanvas")[0],t=new Image,n,r=this;t.onload=function(){var e=document.createElement("canvas"),n=e.getContext("2d"),i=r.$("#snapshots li").length,s;e.width=210,e.height=130,n.translate(-0.5,-0.5),n.drawImage(t,5,0,630,390,0,0,210,130),t=e.toDataURL("image/png"),s='<li class="thumbnail"><img src="'+t+'" width="210" height="130" class="thumb"><br><span class="label"><input type="radio" value="" name="previewImage"> Screen '+i+"</span></li>",r.$("#snapshots").append(s),r.setActiveSnapshot(r.$("#snapshots").find("li").last())},t.src=e.toDataURL("image/png")},setActiveSnapshot:function(e){e.find('input[type="radio"]').attr("checked","checked"),this.$("#snapshots li").removeClass("active"),e.addClass("active"),this.set("snapshot",e.find("img").attr("src"))}});$(function(){$.extend($.support,{touch:"ontouchend"in document}),$.fn.addTouch=function(){return $.support.touch&&this.each(function(e,t){t.addEventListener("touchstart",iPadTouchHandler,!1),t.addEventListener("touchmove",iPadTouchHandler,!1),t.addEventListener("touchend",iPadTouchHandler,!1),t.addEventListener("touchcancel",iPadTouchHandler,!1)}),this}});var lastTap=null,tapValid=!1,tapTimeout=null,rightClickPending=!1,rightClickEvent=null,holdTimeout=null,cancelMouseUp=!1,Stats=function(){var e,t,n=0,r=2,i=0,s=Date.now(),o=s,u=s,a=0,f=1e3,l=0,c,h,p,d=[[16,16,48],[0,255,255]],v=0,m=1e3,g=0,y,b,w,E=[[16,48,16],[0,255,0]],S=!0;e=document.createElement("div"),e.style.cursor="pointer",e.style.width="80px",e.style.opacity="0.9",e.style.zIndex="10001",e.addEventListener("mousedown",function(e){e.preventDefault(),T()},!1),c=document.createElement("div"),c.style.textAlign="left",c.style.lineHeight="1.2em",c.style.backgroundColor="rgb("+Math.floor(d[0][0]/2)+","+Math.floor(d[0][1]/2)+","+Math.floor(d[0][2]/2)+")",c.style.padding="0 0 3px 3px",e.appendChild(c),h=document.createElement("div"),h.style.fontFamily="Helvetica, Arial, sans-serif",h.style.fontSize="9px",h.style.color="rgb("+d[1][0]+","+d[1][1]+","+d[1][2]+")",h.style.fontWeight="bold",h.innerHTML="FPS",c.appendChild(h),p=document.createElement("div"),p.style.position="relative",p.style.width="74px",p.style.height="30px",p.style.backgroundColor="rgb("+d[1][0]+","+d[1][1]+","+d[1][2]+")",c.appendChild(p);while(p.children.length<74)t=document.createElement("span"),t.style.width="1px",t.style.height="30px",t.style.cssFloat="left",t.style.backgroundColor="rgb("+d[0][0]+","+d[0][1]+","+d[0][2]+")",p.appendChild(t);y=document.createElement("div"),y.style.textAlign="left",y.style.lineHeight="1.2em",y.style.backgroundColor="rgb("+Math.floor(E[0][0]/2)+","+Math.floor(E[0][1]/2)+","+Math.floor(E[0][2]/2)+")",y.style.padding="0 0 3px 3px",y.style.display="none",e.appendChild(y),b=document.createElement("div"),b.style.fontFamily="Helvetica, Arial, sans-serif",b.style.fontSize="9px",b.style.color="rgb("+E[1][0]+","+E[1][1]+","+E[1][2]+")",b.style.fontWeight="bold",b.innerHTML="MS",y.appendChild(b),w=document.createElement("div"),w.style.position="relative",w.style.width="74px",w.style.height="30px",w.style.backgroundColor="rgb("+E[1][0]+","+E[1][1]+","+E[1][2]+")",y.appendChild(w);while(w.children.length<74)t=document.createElement("span"),t.style.width="1px",t.style.height=Math.random()*30+"px",t.style.cssFloat="left",t.style.backgroundColor="rgb("+E[0][0]+","+E[0][1]+","+E[0][2]+")",w.appendChild(t);var x=function(e,t){var n=e.appendChild(e.firstChild);n.style.height=t+"px"},T=function(){n=(n+1)%r,S&&(n==0?(c.style.display="block",y.style.display="none"):(c.style.display="none",y.style.display="block"))};return{domElement:e,switchMode:T,show:function(){n==0?c.style.display="block":y.style.display="block",S=!0},hide:function(){c.style.display="none",y.style.display="none",S=!1},toggle:function(){S?this.hide():this.show()},update:function(){s=Date.now(),v=s-o,m=Math.min(m,v),g=Math.max(g,v),b.textContent=v+" MS ("+m+"-"+g+")",x(w,Math.min(30,30-v/200*30)),o=s,i++,s>u+1e3&&(a=Math.round(i*1e3/(s-u)),f=Math.min(f,a),l=Math.max(l,a),h.textContent=a+" FPS ("+f+"-"+l+")",x(p,Math.min(30,30-a/100*30)),u=s,i=0)}}},TAU=2*Math.PI;!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},isHTML:function(e){return typeof e!="string"||e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function r(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var t=this,n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?r():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}}(window.jQuery),!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){s.trigger("closed").remove()}var r=e(this),i=r.attr("data-target"),s;i||(i=r.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),s=e(i),t&&t.preventDefault(),s.length||(s=r.hasClass("alert")?r:r.parent()),s.trigger(t=e.Event("close"));if(t.isDefaultPrevented())return;s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.on(e.support.transition.end,n):n()},e.fn.alert=function(t){return this.each(function(){var r=e(this),i=r.data("alert");i||r.data("alert",i=new n(this)),typeof t=="string"&&i[t].call(r)})},e.fn.alert.Constructor=n,e(function(){e("body").on("click.alert.data-api",t,n.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,r=n.data(),i=n.is("input")?"val":"html";e+="Text",r.resetText||n.data("resetText",n[i]()),n[i](r[e]||this.options[e]),setTimeout(function(){e=="loadingText"?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var r=e(this),i=r.data("button"),s=typeof n=="object"&&n;i||r.data("button",i=new t(this,s)),n=="toggle"?i.toggle():n&&i.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=n,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},to:function(t){var n=this.$element.find(".item.active"),r=n.parent().children(),i=r.index(n),s=this;if(t>r.length-1||t<0)return;return this.sliding?this.$element.one("slid",function(){s.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",e(r[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(t,n){var r=this.$element.find(".item.active"),i=n||r[t](),s=this.interval,o=t=="next"?"left":"right",u=t=="next"?"first":"last",a=this,f=e.Event("slide",{relatedTarget:i[0]});this.sliding=!0,s&&this.pause(),i=i.length?i:this.$element.find(".item")[u]();if(i.hasClass("active"))return;if(e.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(f);if(f.isDefaultPrevented())return;i.addClass(t),i[0].offsetWidth,r.addClass(o),i.addClass(o),this.$element.one(e.support.transition.end,function(){i.removeClass([t,o].join(" ")).addClass("active"),r.removeClass(["active",o].join(" ")),a.sliding=!1,setTimeout(function(){a.$element.trigger("slid")},0)})}else{this.$element.trigger(f);if(f.isDefaultPrevented())return;r.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return s&&this.cycle(),this}},e.fn.carousel=function(n){return this.each(function(){var r=e(this),i=r.data("carousel"),s=e.extend({},e.fn.carousel.defaults,typeof n=="object"&&n),o=typeof n=="string"?n:s.slide;i||r.data("carousel",i=new t(this,s)),typeof n=="number"?i.to(n):o?i[o]():s.interval&&i.cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e(function(){e("body").on("click.carousel.data-api","[data-slide]",function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=!i.data("modal")&&e.extend({},i.data(),n.data());i.carousel(s),t.preventDefault()})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,r,i;if(this.transitioning)return;t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),r=this.$parent&&this.$parent.find("> .accordion-group > .in");if(r&&r.length){i=r.data("collapse");if(i&&i.transitioning)return;r.collapse("hide"),i||r.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])},hide:function(){var t;if(this.transitioning)return;t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0)},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[e!==null?"addClass":"removeClass"]("collapse"),this},transition:function(t,n,r){var i=this,s=function(){n.type=="show"&&i.reset(),i.transitioning=0,i.$element.trigger(r)};this.$element.trigger(n);if(n.isDefaultPrevented())return;this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},e.fn.collapse=function(n){return this.each(function(){var r=e(this),i=r.data("collapse"),s=typeof n=="object"&&n;i||r.data("collapse",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e(function(){e("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n=e(this),r,i=n.attr("data-target")||t.preventDefault()||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),s=e(i).data("collapse")?"toggle":n.data();n[e(i).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(i).collapse(s)})})}(window.jQuery),!function(e){"use strict";function t(){n(e(r)).removeClass("open")}function n(t){var n=t.attr("data-target"),r;return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),r=e(n),r.length||(r=t.parent()),r}var r="[data-toggle=dropdown]",i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(r){var i=e(this),s,o;if(i.is(".disabled, :disabled"))return;return s=n(i),o=s.hasClass("open"),t(),o||(s.toggleClass("open"),i.focus()),!1},keydown:function(t){var r,i,s,o,u,a;if(!/(38|40|27)/.test(t.keyCode))return;r=e(this),t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;o=n(r),u=o.hasClass("open");if(!u||u&&t.keyCode==27)return r.click();i=e("[role=menu] li:not(.divider) a",o);if(!i.length)return;a=i.index(i.filter(":focus")),t.keyCode==38&&a>0&&a--,t.keyCode==40&&a<i.length-1&&a++,~a||(a=0),i.eq(a).focus()}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),typeof t=="string"&&r[t].call(n)})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api touchstart.dropdown.data-api",t),e("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",r,i.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",r+", [role=menu]",i.prototype.keydown)})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo
(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();var n=this;t=e.Event("hide"),this.$element.trigger(t);if(!this.isShown||t.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]!==e.target&&!t.$element.has(e.target).length&&t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){t.which==27&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(e){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r=n.attr("href"),i=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},i.data(),n.data());t.preventDefault(),i.modal(s).one("hide",function(){n.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,r){var i,s;this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):this.options.trigger!="manual"&&(i=this.options.trigger=="hover"?"mouseenter":"focus",s=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);if(!n.options.delay||!n.options.delay.show)return n.show();clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){n.hoverState=="in"&&n.show()},n.options.delay.show)},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!n.options.delay||!n.options.delay.hide)return n.hide();n.hoverState="out",this.timeout=setTimeout(function(){n.hoverState=="out"&&n.hide()},n.options.delay.hide)},show:function(){var e,t,n,r,i,s,o;if(this.hasContent()&&this.enabled){e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),s=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(s),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),n=this.getPosition(t),r=e[0].offsetWidth,i=e[0].offsetHeight;switch(t?s.split(" ")[1]:s){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-r/2};break;case"top":o={top:n.top-i,left:n.left+n.width/2-r/2};break;case"left":o={top:n.top+n.height/2-i/2,left:n.left-r};break;case"right":o={top:n.top+n.height/2-i/2,left:n.left+n.width}}e.css(o).addClass(s).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){r.off(e.support.transition.end).remove()},500);r.one(e.support.transition.end,function(){clearTimeout(t),r.remove()})}var n=this,r=this.tip();return r.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():r.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||typeof e.attr("data-original-title")!="string")&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title),e},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var r=e(this),i=r.data("tooltip"),s=typeof n=="object"&&n;i||r.data("tooltip",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-content")||(typeof n.content=="function"?n.content.call(t[0]):n.content),e},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(n){return this.each(function(){var r=e(this),i=r.data("popover"),s=typeof n=="object"&&n;i||r.data("popover",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";function t(t,n){var r=e.proxy(this.process,this),i=e(t).is("body")?e(window):e(t),s;this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=i.on("scroll.scroll-spy.data-api",r),this.selector=(this.options.target||(s=e(t).attr("href"))&&s.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t=this,n;this.offsets=e([]),this.targets=e([]),n=this.$body.find(this.selector).map(function(){var t=e(this),n=t.data("target")||t.attr("href"),r=/^#\w/.test(n)&&e(n);return r&&r.length&&[[r.position().top,n]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},process:function(){var e=this.$scrollElement.scrollTop()+this.options.offset,t=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=t-this.$scrollElement.height(),r=this.offsets,i=this.targets,s=this.activeTarget,o;if(e>=n)return s!=(o=i.last()[0])&&this.activate(o);for(o=r.length;o--;)s!=i[o]&&e>=r[o]&&(!r[o+1]||e<=r[o+1])&&this.activate(i[o])},activate:function(t){var n,r;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(r).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}},e.fn.scrollspy=function(n){return this.each(function(){var r=e(this),i=r.data("scrollspy"),s=typeof n=="object"&&n;i||r.data("scrollspy",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.attr("data-target"),i,s,o;r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));if(t.parent("li").hasClass("active"))return;i=n.find(".active a").last()[0],o=e.Event("show",{relatedTarget:i}),t.trigger(o);if(o.isDefaultPrevented())return;s=e(r),this.activate(t.parent("li"),n),this.activate(s,s.parent(),function(){t.trigger({type:"shown",relatedTarget:i})})},activate:function(t,n,r){function i(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var s=n.find("> .active"),o=r&&e.support.transition&&s.hasClass("fade");o?s.one(e.support.transition.end,i):i(),s.removeClass("in")}},e.fn.tab=function(n){return this.each(function(){var r=e(this),i=r.data("tab");i||r.data("tab",i=new t(this)),typeof n=="string"&&i[n]()})},e.fn.tab.Constructor=t,e(function(){e("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){var n;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(n=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,n?this.process(n):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){var t=[],n=[],r=[],i;while(i=e.shift())i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(i):r.push(i):t.push(i);return t.concat(n,r)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,r){return t=e(n.options.item).attr("data-value",r),t.find("a").html(n.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(t){var n=this.$menu.find(".active").removeClass("active"),r=n.next();r.length||(r=e(this.$menu.find("li")[0])),r.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),n=t.prev();n.length||(n=this.$menu.find("li").last()),n.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(e){var t=this;setTimeout(function(){t.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(n){return this.each(function(){var r=e(this),i=r.data("typeahead"),s=typeof n=="object"&&n;i||r.data("typeahead",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var n=e(this);if(n.data("typeahead"))return;t.preventDefault(),n.typeahead(n.data())})})}(window.jQuery),!function(e){"use strict";var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var t=e(document).height(),n=this.$window.scrollTop(),r=this.$element.offset(),i=this.options.offset,s=i.bottom,o=i.top,u="affix affix-top affix-bottom",a;typeof i!="object"&&(s=o=i),typeof o=="function"&&(o=i.top()),typeof s=="function"&&(s=i.bottom()),a=this.unpin!=null&&n+this.unpin<=r.top?!1:s!=null&&r.top+this.$element.height()>=t-s?"bottom":o!=null&&n<=o?"top":!1;if(this.affixed===a)return;this.affixed=a,this.unpin=a=="bottom"?r.top-n:null,this.$element.removeClass(u).addClass("affix"+(a?"-"+a:""))},e.fn.affix=function(n){return this.each(function(){var r=e(this),i=r.data("affix"),s=typeof n=="object"&&n;i||r.data("affix",i=new t(this,s)),typeof n=="string"&&i[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),function(e,t,n){function r(e,t,n,r){if("d"!=n){var i=d.exec(t),s="auto"===e.css(n)?0:e.css(n),s="string"==typeof s?a(s):s;"string"==typeof t&&a(t);var r=!0===r?0:s,o=e.is(":hidden"),u=e.translation();return"left"==n&&(r=parseInt(s,10)+u.x),"right"==n&&(r=parseInt(s,10)+u.x),"top"==n&&(r=parseInt(s,10)+u.y),"bottom"==n&&(r=parseInt(s,10)+u.y),!i&&"show"==t?(r=1,o&&e.css({display:"block",opacity:0})):!i&&"hide"==t&&(r=0),i?(e=parseFloat(i[2]),i[1]&&(e=("-="===i[1]?-1:1)*e+parseInt(r,10)),e):r}}function i(t,n,r,i,o,f,l,h){var p=t.data(y),p=p&&!u(p)?p:e.extend(!0,{},m),d=o;if(-1<e.inArray(n,c)){var v=p.meta,g=a(t.css(n))||0,b=n+"_o",d=o-g;v[n]=d,v[b]="auto"==t.css(n)?0+d:g+d||0,p.meta=v,l&&0===d&&(d=0-v[b],v[n]=d,v[b]=0)}return t.data(y,s(t,p,n,r,i,d,f,l,h))}function s(e,t,n,r,i,s,o,u,a){var f=!1,o=!0===o&&!0===u,t=t||{};t.original||(t.original={},f=!0),t.properties=t.properties||{},t.secondary=t.secondary||{};for(var u=t.meta,l=t.original,c=t.properties,p=t.secondary,d=h.length-1;0<=d;d--){var v=h[d]+"transition-property",m=h[d]+"transition-duration",g=h[d]+"transition-timing-function",n=o?h[d]+"transform":n;f&&(l[v]=e.css(v)||"",l[m]=e.css(m)||"",l[g]=e.css(g)||""),p[n]=o?(!0===a||!0===N&&!1!==a)&&T?"translate3d("+u.left+"px, "+u.top+"px, 0)":"translate("+u.left+"px,"+u.top+"px)":s,c[v]=(c[v]?c[v]+",":"")+n,c[m]=(c[m]?c[m]+",":"")+r+"ms",c[g]=(c[g]?c[g]+",":"")+i}return t}function o(e){for(var t in e)if(("width"==t||"height"==t)&&("show"==e[t]||"hide"==e[t]||"toggle"==e[t]))return!0;return!1}function u(e){for(var t in e)return!1;return!0}function a(e){return g=e.match(/\D+$/),parseFloat(e.replace(/px/i,""))}function f(t,n,r){var i=-1<e.inArray(t,l);return("width"==t||"height"==t)&&n===parseFloat(r.css(t))&&(i=!1),i}var l="top,right,bottom,left,opacity,height,width".split(","),c=["top","right","bottom","left"],h=["","-webkit-","-moz-","-o-"],p=["avoidTransforms","useTranslate3d","leaveTransforms"],d=/^([+-]=)?([\d+-.]+)(.*)$/,v=/([A-Z])/g,m={secondary:{},meta:{top:0,right:0,bottom:0,left:0}},g="px",y="jQe",b=null,w=!1,E=(document.body||document.documentElement).style,S=void 0!==E.WebkitTransition?"webkitTransitionEnd":void 0!==E.OTransition?"oTransitionEnd":"transitionend",x=void 0!==E.WebkitTransition||void 0!==E.MozTransition||void 0!==E.OTransition||void 0!==E.transition,T="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,N=T;e.expr&&e.expr.filters&&(b=e.expr.filters.animated,e.expr.filters.animated=function(t){return e(t).data("events")&&e(t).data("events")[S]?!0:b.call(this,t)}),e.extend({toggle3DByDefault:function(){return N=!N},toggleDisabledByDefault:function(){return w=!w}}),e.fn.translation=function(){if(!this[0])return null;var e=window.getComputedStyle(this[0],null),t={x:0,y:0};if(e)for(var n=h.length-1;n>=0;n--){var r=e.getPropertyValue(h[n]+"transform");if(r&&/matrix/i.test(r)){e=r.replace(/^matrix\(/i,"").split(/, |\)$/g),t={x:parseInt(e[4],10),y:parseInt(e[5],10)};break}}return t},e.fn.animate=function(n,s,a,l){var n=n||{},d=typeof n.bottom=="undefined"&&typeof n.right=="undefined",v=e.speed(s,a,l),m=this,b=0,E=function(){b--,b===0&&typeof v.complete=="function"&&v.complete.apply(m[0],arguments)};return(typeof n.avoidCSSTransitions!="undefined"?n.avoidCSSTransitions:w)===!0||!x||u(n)||o(n)||v.duration<=0||e.fn.animate.defaults.avoidTransforms===!0&&n.avoidTransforms!==!1?t.apply(this,arguments):this[v.queue===!0?"queue":"each"](function(){var s=e(this),o=e.extend({},v),a=function(){var e=s.data(y)||{original:{}},t={};if(n.leaveTransforms!==!0){for(var r=h.length-1;r>=0;r--)t[h[r]+"transform"]="";if(d&&typeof e.meta!="undefined")for(var r=0,i;i=c[r];++r)t[i]=e.meta[i+"_o"]+g}s.unbind(S).css(e.original).css(t).data(y,null),n.opacity==="hide"&&s.css({display:"none",opacity:""}),E.call(s)},l={bounce:"cubic-bezier(0.0, 0.35, .5, 1.3)",linear:"linear",swing:"ease-in-out",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},m={},l=l[o.easing||"swing"]?l[o.easing||"swing"]:o.easing||"swing",w;for(w in n)if(e.inArray(w,p)===-1){var x=e.inArray(w,c)>-1,T=r(s,n[w],w,x&&n.avoidTransforms!==!0);n.avoidTransforms!==!0&&f(w,T,s)?i(s,w,o.duration,l,x&&n.avoidTransforms===!0?T+g:T,x&&n.avoidTransforms!==!0,d,n.useTranslate3d===!0):m[w]=n[w]}s.unbind(S);if((w=s.data(y))&&!u(w)&&!u(w.secondary)){b++,s.css(w.properties);var N=w.secondary;setTimeout(function(){s.bind(S,a).css(N)})}else o.queue=!1;return u(m)||(b++,t.apply(s,[m,{duration:o.duration,easing:e.easing[o.easing]?o.easing:e.easing.swing?"swing":"linear",complete:E,queue:o.queue}])),!0})},e.fn.animate.defaults={},e.fn.stop=function(t,r,i){return x?(t&&this.queue([]),this.each(function(){var s=e(this),o=s.data(y);if(o&&!u(o)){var a,f={};if(r){f=o.secondary;if(!i&&typeof o.meta.left_o!==void 0||typeof o.meta.top_o!==void 0){f.left=typeof o.meta.left_o!==void 0?o.meta.left_o:"auto",f.top=typeof o.meta.top_o!==void 0?o.meta.top_o:"auto";for(a=h.length-1;a>=0;a--)f[h[a]+"transform"]=""}}else if(!u(o.secondary)){var l=window.getComputedStyle(s[0],null);if(l)for(var c in o.secondary)if(o.secondary.hasOwnProperty(c)){c=c.replace(v,"-$1").toLowerCase(),f[c]=l.getPropertyValue(c);if(!i&&/matrix/i.test(f[c])){a=f[c].replace(/^matrix\(/i,"").split(/, |\)$/g),f.left=parseFloat(a[4])+parseFloat(s.css("left"))+g||"auto",f.top=parseFloat(a[5])+parseFloat(s.css("top"))+g||"auto";for(a=h.length-1;a>=0;a--)f[h[a]+"transform"]=""}}}s.unbind(S).css(o.original).css(f).data(y,null)}else n.apply(s,[t,r])}),this):n.apply(this,[t,r])}}(jQuery,jQuery.fn.animate,jQuery.fn.stop),function(e,t,n){e.fn.jScrollPane=function(r){function i(r,i){function K(t){var i,o,a,w,E,x,T=!1,C=!1;s=t;if(u===n)E=r.scrollTop(),x=r.scrollLeft(),r.css({overflow:"hidden",padding:0}),f=r.innerWidth()+R,l=r.innerHeight(),r.width(f),u=e('<div class="jspPane" />').css("padding",q).append(r.children()),h=e('<div class="jspContainer" />').css({width:f+"px",height:l+"px"}).append(u).appendTo(r);else{r.css("width",""),T=s.stickToBottom&&yt(),C=s.stickToRight&&bt(),w=r.innerWidth()+R!=f||r.outerHeight()!=l,w&&(f=r.innerWidth()+R,l=r.innerHeight(),h.css({width:f+"px",height:l+"px"}));if(!w&&U==p&&u.outerHeight()==d){r.width(f);return}U=p,u.css("width",""),r.width(f),h.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}u.css("overflow","auto"),t.contentWidth?p=t.contentWidth:p=u[0].scrollWidth,d=u[0].scrollHeight,u.css("overflow",""),v=p/f,m=d/l,g=m>1,y=v>1,!y&&!g?(r.removeClass("jspScrollable"),u.css({top:0,width:h.width()-R}),Et(),Tt(),Ct(),st()):(r.addClass("jspScrollable"),i=s.maintainPosition&&(S||N),i&&(o=mt(),a=gt()),Q(),Y(),et(),i&&(dt(C?p-f:o,!1),pt(T?d-l:a,!1)),xt(),wt(),At(),s.enableKeyboardNavigation&&Nt(),s.clickOnTrack&&it(),kt(),s.hijackInternalLinks&&Lt()),s.autoReinitialise&&!I?I=setInterval(function(){K(s)},s.autoReinitialiseDelay):!s.autoReinitialise&&I&&clearInterval(I),E&&r.scrollTop(0)&&pt(E,!1),x&&r.scrollLeft(0)&&dt(x,!1),r.trigger("jsp-initialised",[y||g])}function Q(){g&&(h.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),C=h.find(">.jspVerticalBar"),k=C.find(">.jspTrack"),w=k.find(">.jspDrag"),s.showArrows&&(M=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",nt(0,-1)).bind("click.jsp",St),_=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",nt(0,1)).bind("click.jsp",St),s.arrowScrollOnHover&&(M.bind("mouseover.jsp",nt(0,-1,M)),_.bind("mouseover.jsp",nt(0,1,_))),tt(k,s.verticalArrowPositions,M,_)),A=l,h.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){A-=e(this).outerHeight()}),w.hover(function(){w.addClass("jspHover")},function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",St),w.addClass("jspActive");var n=t.pageY-w.position().top;return e("html").bind("mousemove.jsp",function(e){ut(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",ot),!1}),G())}function G(){k.height(A+"px"),S=0,L=s.verticalGutter+k.outerWidth(),u.width(f-L-R);try{C.position().left===0&&u.css("margin-left",L+"px")}catch(e){}}function Y(){y&&(h.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),D=h.find(">.jspHorizontalBar"),P=D.find(">.jspTrack"),x=P.find(">.jspDrag"),s.showArrows&&(j=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",nt(-1,0)).bind("click.jsp",St),F=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",nt(1,0)).bind("click.jsp",St),s.arrowScrollOnHover&&(j.bind("mouseover.jsp",nt(-1,0,j)),F.bind("mouseover.jsp",nt(1,0,F))),tt(P,s.horizontalArrowPositions,j,F)),x.hover(function(){x.addClass("jspHover")},function(){x.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",St),x.addClass("jspActive");var n=t.pageX-x.position().left;return e("html").bind("mousemove.jsp",function(e){ft(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",ot),!1}),H=h.innerWidth(),Z())}function Z(){h.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){H-=e(this).outerWidth()}),P.width(H+"px"),N=0}function et(){if(y&&g){var t=P.outerHeight(),n=k.outerWidth();A-=t,e(D).find(">.jspCap:visible,>.jspArrow").each(function(){H+=e(this).outerWidth()}),H-=n,l-=n,f-=t,P.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),G(),Z()}y&&u.width(h.outerWidth()-R+"px"),d=u.outerHeight(),m=d/l,y&&(B=Math.ceil(1/v*H),B>s.horizontalDragMaxWidth?B=s.horizontalDragMaxWidth:B<s.horizontalDragMinWidth&&(B=s.horizontalDragMinWidth),x.width(B+"px"),T=H-B,lt(N)),g&&(O=Math.ceil(1/m*A),O>s.verticalDragMaxHeight?O=s.verticalDragMaxHeight:O<s.verticalDragMinHeight&&(O=s.verticalDragMinHeight),w.height(O+"px"),E=A-O,at(S))}function tt(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function nt(e,t,n){return function(){return rt(e,t,this,n),this.blur(),!1}}function rt(t,n,r,i){r=e(r).addClass("jspActive");var u,a,f=!0,l=function(){t!==0&&o.scrollByX(t*s.arrowButtonSpeed),n!==0&&o.scrollByY(n*s.arrowButtonSpeed),a=setTimeout(l,f?s.initialDelay:s.arrowRepeatFreq),f=!1};l(),u=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(u,function(){r.removeClass("jspActive"),a&&clearTimeout(a),a=null,i.unbind(u)})}function it(){st(),g&&k.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageY-i.top-S,a,f=!0,h=function(){var e=r.offset(),n=t.pageY-e.top-O/2,i=l*s.scrollPagePercent,c=E*i/(d-l);if(u<0)S-c>n?o.scrollByY(-i):ut(n);else{if(!(u>0)){p();return}S+c<n?o.scrollByY(i):ut(n)}a=setTimeout(h,f?s.initialDelay:s.trackClickRepeatFreq),f=!1},p=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",p)};return h(),e(document).bind("mouseup.jsp",p),!1}}),y&&P.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),u=t.pageX-i.left-N,a,l=!0,h=function(){var e=r.offset(),n=t.pageX-e.left-B/2,i=f*s.scrollPagePercent,c=T*i/(p-f);if(u<0)N-c>n?o.scrollByX(-i):ft(n);else{if(!(u>0)){d();return}N+c<n?o.scrollByX(i):ft(n)}a=setTimeout(h,l?s.initialDelay:s.trackClickRepeatFreq),l=!1},d=function(){a&&clearTimeout(a),a=null,e(document).unbind("mouseup.jsp",d)};return h(),e(document).bind("mouseup.jsp",d),!1}})}function st(){P&&P.unbind("mousedown.jsp"),k&&k.unbind("mousedown.jsp")}function ot(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),w&&w.removeClass("jspActive"),x&&x.removeClass("jspActive")}function ut(e,t){if(!g)return;e<0?e=0:e>E&&(e=E),t===n&&(t=s.animateScroll),t?o.animate(w,"top",e,at):(w.css("top",e),at(e))}function at(e){e===n&&(e=w.position().top),h.scrollTop(0),S=e;var t=S===0,i=S==E,s=e/E,o=-s*(d-l);if(z!=t||X!=i)z=t,X=i,r.trigger("jsp-arrow-change",[z,X,W,V]);ct(t,i),u.css("top",o),r.trigger("jsp-scroll-y",[-o,t,i]).trigger("scroll")}function ft(e,t){if(!y)return;e<0?e=0:e>T&&(e=T),t===n&&(t=s.animateScroll),t?o.animate(x,"left",e,lt):(x.css("left",e),lt(e))}function lt(e){e===n&&(e=x.position().left),h.scrollTop(0),N=e;var t=N===0,i=N==T,s=e/T,o=-s*(p-f);if(W!=t||V!=i)W=t,V=i,r.trigger("jsp-arrow-change",[z,X,W,V]);ht(t,i),u.css("left",o),r.trigger("jsp-scroll-x",[-o,t,i]).trigger("scroll")}function ct(e,t){s.showArrows&&(M[e?"addClass":"removeClass"]("jspDisabled"),_[t?"addClass":"removeClass"]("jspDisabled"))}function ht(e,t){s.showArrows&&(j[e?"addClass":"removeClass"]("jspDisabled"),F[t?"addClass":"removeClass"]("jspDisabled"))}function pt(e,t){var n=e/(d-l);ut(n*E,t)}function dt(e,t){var n=e/(p-f);ft(n*T,t)}function vt(t,n,r){var i,o,u,a=0,c=0,p,d,v,m,g,y;try{i=e(t)}catch(w){return}o=i.outerHeight(),u=i.outerWidth(),h.scrollTop(0),h.scrollLeft(0);while(!i.is(".jspPane")){a+=i.position().top,c+=i.position().left,i=i.offsetParent();if(/^body|html$/i.test(i[0].nodeName))return}p=gt(),v=p+l,a<p||n?g=a-s.verticalGutter:a+o>v&&(g=a-l+o+s.verticalGutter),g&&pt(g,r),d=mt(),m=d+f,c<d||n?y=c-s.horizontalGutter:c+u>m&&(y=c-f+u+s.horizontalGutter),y&&dt(y,r)}function mt(){return-u.position().left}function gt(){return-u.position().top}function yt(){var e=d-l;return e>20&&e-gt()<10}function bt(){var e=p-f;return e>20&&e-mt()<10}function wt(){h.unbind(J).bind(J,function(e,t,n,r){var i=N,u=S;return o.scrollBy(n*s.mouseWheelSpeed,-r*s.mouseWheelSpeed,!1),i==N&&u==S})}function Et(){h.unbind(J)}function St(){return!1}function xt(){u.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){vt(e.target,!1)})}function Tt(){u.find(":input,a").unbind("focus.jsp")}function Nt(){function a(){var e=N,r=S;switch(t){case 40:o.scrollByY(s.keyboardSpeed,!1);break;case 38:o.scrollByY(-s.keyboardSpeed,!1);break;case 34:case 32:o.scrollByY(l*s.scrollPagePercent,!1);break;case 33:o.scrollByY(-l*s.scrollPagePercent,!1);break;case 39:o.scrollByX(s.keyboardSpeed,!1);break;case 37:o.scrollByX(-s.keyboardSpeed,!1)}return n=e!=N||r!=S,n}var t,n,i=[];y&&i.push(D[0]),g&&i.push(C[0]),u.focus(function(){r.focus()}),r.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(r){if(r.target!==this&&(!i.length||!e(r.target).closest(i).length))return;var s=N,o=S;switch(r.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:t=r.keyCode,a();break;case 35:pt(d-l),t=null;break;case 36:pt(0),t=null}return n=r.keyCode==t&&s!=N||o!=S,!n}).bind("keypress.jsp",function(e){return e.keyCode==t&&a(),!n}),s.hideFocus?(r.css("outline","none"),"hideFocus"in h[0]&&r.attr("hideFocus",!0)):(r.css("outline",""),"hideFocus"in h[0]&&r.attr("hideFocus",!1))}function Ct(){r.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function kt(){if(location.
hash&&location.hash.length>1){var t,n,r=escape(location.hash.substr(1));try{t=e("#"+r+', a[name="'+r+'"]')}catch(i){return}t.length&&u.find(r)&&(h.scrollTop()===0?n=setInterval(function(){h.scrollTop()>0&&(vt(t,!0),e(document).scrollTop(h.position().top),clearInterval(n))},50):(vt(t,!0),e(document).scrollTop(h.position().top)))}}function Lt(){if(e(document.body).data("jspHijack"))return;e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(n){var r=this.href.substr(0,this.href.indexOf("#")),i=location.href,s,o,u,f,l,c;location.href.indexOf("#")!==-1&&(i=location.href.substr(0,location.href.indexOf("#")));if(r!==i)return;s=escape(this.href.substr(this.href.indexOf("#")+1)),o;try{o=e("#"+s+', a[name="'+s+'"]')}catch(h){return}if(!o.length)return;u=o.closest(".jspScrollable"),f=u.data("jsp"),f.scrollToElement(o,!0),u[0].scrollIntoView&&(l=e(t).scrollTop(),c=o.offset().top,(c<l||c>l+e(t).height())&&u[0].scrollIntoView()),n.preventDefault()})}function At(){var e,t,n,r,i,s=!1;h.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=mt(),t=gt(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(u){if(!s)return;var a=u.originalEvent.touches[0],f=N,l=S;return o.scrollTo(e+n-a.pageX,t+r-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(r-a.pageY)>5,f==N&&l==S}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function Ot(){var e=gt(),t=mt();r.removeClass("jspScrollable").unbind(".jsp"),r.replaceWith($.append(u.children())),$.scrollTop(e),$.scrollLeft(t),I&&clearInterval(I)}var s,o=this,u,f,l,h,p,d,v,m,g,y,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z=!0,W=!0,X=!1,V=!1,$=r.clone(!1,!1).empty(),J=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";q=r.css("paddingTop")+" "+r.css("paddingRight")+" "+r.css("paddingBottom")+" "+r.css("paddingLeft"),R=(parseInt(r.css("paddingLeft"),10)||0)+(parseInt(r.css("paddingRight"),10)||0),e.extend(o,{reinitialise:function(t){t=e.extend({},s,t),K(t)},scrollToElement:function(e,t,n){vt(e,t,n)},scrollTo:function(e,t,n){dt(e,n),pt(t,n)},scrollToX:function(e,t){dt(e,t)},scrollToY:function(e,t){pt(e,t)},scrollToPercentX:function(e,t){dt(e*(p-f),t)},scrollToPercentY:function(e,t){pt(e*(d-l),t)},scrollBy:function(e,t,n){o.scrollByX(e,n),o.scrollByY(t,n)},scrollByX:function(e,t){var n=mt()+Math[e<0?"floor":"ceil"](e),r=n/(p-f);ft(r*T,t)},scrollByY:function(e,t){var n=gt()+Math[e<0?"floor":"ceil"](e),r=n/(d-l);ut(r*E,t)},positionDragX:function(e,t){ft(e,t)},positionDragY:function(e,t){ut(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:s.animateDuration,easing:s.animateEase,queue:!1,step:r})},getContentPositionX:function(){return mt()},getContentPositionY:function(){return gt()},getContentWidth:function(){return p},getContentHeight:function(){return d},getPercentScrolledX:function(){return mt()/(p-f)},getPercentScrolledY:function(){return gt()/(d-l)},getIsScrollableH:function(){return y},getIsScrollableV:function(){return g},getContentPane:function(){return u},scrollToBottom:function(e){ut(E,e)},hijackInternalLinks:e.noop,destroy:function(){Ot()}}),K(i)}return r=e.extend({},e.fn.jScrollPane.defaults,r),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){r[this]=r[this]||r.speed}),this.each(function(){var t=e(this),n=t.data("jsp");n?n.reinitialise(r):(n=new i(t,r),t.data("jsp",n))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(e){function r(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(i=n.wheelDelta/120),n.detail&&(i=-n.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),(e.event.dispatch||e.event.handle).apply(this,r)}var t=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var n=t.length;n;)e.event.fixHooks[t[--n]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],r,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e){function n(e){return typeof e=="object"?e:{top:e,left:e}}var t=e.scrollTo=function(t,n,r){e(window).scrollTo(t,n,r)};t.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},t.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,n=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!n)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||r.compatMode=="BackCompat"?r.body:r.documentElement})},e.fn.scrollTo=function(r,i,s){return typeof i=="object"&&(s=i,i=0),typeof s=="function"&&(s={onAfter:s}),r=="max"&&(r=9e9),s=e.extend({},t.defaults,s),i=i||s.duration,s.queue=s.queue&&s.axis.length>1,s.queue&&(i/=2),s.offset=n(s.offset),s.over=n(s.over),this._scrollable().each(function(){function d(e){u.animate(c,i,s.easing,e&&function(){e.call(this,r,s)})}if(r==null)return;var o=this,u=e(o),a=r,l,c={},p=u.is("html,body");switch(typeof a){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(a)){a=n(a);break}a=e(a,this);if(!a.length)return;case"object":if(a.is||a.style)l=(a=e(a)).offset()}e.each(s.axis.split(""),function(e,n){var r=n=="x"?"Left":"Top",i=r.toLowerCase(),f="scroll"+r,v=o[f],m=t.max(o,n);if(l)c[f]=l[i]+(p?0:v-u.offset()[i]),s.margin&&(c[f]-=parseInt(a.css("margin"+r))||0,c[f]-=parseInt(a.css("border"+r+"Width"))||0),c[f]+=s.offset[i]||0,s.over[i]&&(c[f]+=a[n=="x"?"width":"height"]()*s.over[i]);else{var y=a[i];c[f]=y.slice&&y.slice(-1)=="%"?parseFloat(y)/100*m:y}s.limit&&/^\d+$/.test(c[f])&&(c[f]=c[f]<=0?0:Math.min(c[f],m)),!e&&s.queue&&(v!=c[f]&&d(s.onAfterFirst),delete c[f])}),d(s.onAfter)}).end()},t.max=function(t,n){var r=n=="x"?"Width":"Height",i="scroll"+r;if(!e(t).is("html,body"))return t[i]-e(t)[r.toLowerCase()]();var s="client"+r,o=t.ownerDocument.documentElement,u=t.ownerDocument.body;return Math.max(o[i],u[i])-Math.min(o[s],u[s])}}(jQuery),window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}()),function(e){e.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:!1,caseSensitive:!0,placeholderText:null,allowSpaces:!1,animate:!0,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_create:function(){var t=this;this.element.is("input")?(this.tagList=e("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.css("display","none")):this.tagList=this.element.find("ul, ol").andSelf().last(),this._tagInput=e('<input type="text" />').addClass("ui-widget-content"),this.options.tabIndex&&this._tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this._tagInput.attr("placeholder",this.options.placeholderText),this.options.tagSource=this.options.tagSource||function(t,n){var r=t.term.toLowerCase(),i=e.grep(this.options.availableTags,function(e){return e.toLowerCase().indexOf(r)===0});n(this._subtractArray(i,this.assignedTags()))},e.isFunction(this.options.tagSource)&&(this.options.tagSource=e.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(e('<li class="tagit-new"></li>').append(this._tagInput)).click(function(n){var r=e(n.target);r.hasClass("tagit-label")?t._trigger("onTagClicked",n,r.closest(".tagit-choice")):t._tagInput.focus()}),this.tagList.children("li").each(function(){e(this).hasClass("tagit-new")||(t.createTag(e(this).html(),e(this).attr("class")),e(this).remove())});if(this.options.singleField)if(this.options.singleFieldNode){var n=e(this.options.singleFieldNode),r=n.val().split(this.options.singleFieldDelimiter);n.val(""),e.each(r,function(e,n){t.createTag(n)})}else this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />');this._tagInput.keydown(function(n){if(n.which==e.ui.keyCode.BACKSPACE&&t._tagInput.val()===""){var r=t._lastTag();!t.options.removeConfirmation||r.hasClass("remove")?t.removeTag(r):t.options.removeConfirmation&&r.addClass("remove ui-state-highlight")}else t.options.removeConfirmation&&t._lastTag().removeClass("remove ui-state-highlight");if(n.which==e.ui.keyCode.COMMA||n.which==e.ui.keyCode.ENTER||n.which==e.ui.keyCode.TAB&&t._tagInput.val()!==""||n.which==e.ui.keyCode.SPACE&&t.options.allowSpaces!==!0&&(e.trim(t._tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||e.trim(t._tagInput.val()).charAt(0)=='"'&&e.trim(t._tagInput.val()).charAt(e.trim(t._tagInput.val()).length-1)=='"'&&e.trim(t._tagInput.val()).length-1!==0))n.preventDefault(),t.createTag(t._cleanedInput()),t._tagInput.autocomplete("close")}).blur(function(e){t.createTag(t._cleanedInput())}),(this.options.availableTags||this.options.tagSource)&&this._tagInput.autocomplete({source:this.options.tagSource,select:function(e,n){return t._tagInput.val()===""&&t.removeTag(t._lastTag(),!1),t.createTag(n.item.value),!1}})},_cleanedInput:function(){return e.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var t=this,n=[];return this.options.singleField?(n=e(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),n[0]===""&&(n=[])):this.tagList.children(".tagit-choice").each(function(){n.push(t.tagLabel(this))}),n},_updateSingleTagsField:function(t){e(this.options.singleFieldNode).val(t.join(this.options.singleFieldDelimiter))},_subtractArray:function(t,n){var r=[];for(var i=0;i<t.length;i++)e.inArray(t[i],n)==-1&&r.push(t[i]);return r},tagLabel:function(t){return this.options.singleField?e(t).children(".tagit-label").text():e(t).children("input").val()},_isNew:function(e){var t=this,n=!0;return this.tagList.children(".tagit-choice").each(function(r){if(t._formatStr(e)==t._formatStr(t.tagLabel(this)))return n=!1,!1}),n},_formatStr:function(t){return this.options.caseSensitive?t:e.trim(t.toLowerCase())},createTag:function(t,n){var r=this;t=e.trim(t);if(!this._isNew(t)||t==="")return!1;var i=e(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(t),s=e("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(n).append(i),o=e("<span></span>").addClass("ui-icon ui-icon-close"),u=e('<a><span class="text-icon">Ã</span></a>').addClass("tagit-close").append(o).click(function(e){r.removeTag(s)});s.append(u);if(this.options.singleField){var a=this.assignedTags();a.push(t),this._updateSingleTagsField(a)}else{var f=i.html();s.append('<input type="hidden" style="display:none;" value="'+f+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]" />')}this._trigger("onTagAdded",null,s),this._tagInput.val(""),this._tagInput.parent().before(s)},removeTag:function(t,n){n=n||this.options.animate,t=e(t),this._trigger("onTagRemoved",null,t);if(this.options.singleField){var r=this.assignedTags(),i=this.tagLabel(t);r=e.grep(r,function(e){return e!=i}),this._updateSingleTagsField(r)}n?t.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){t.remove()}).dequeue():t.remove()},removeAll:function(){var e=this;this.tagList.children(".tagit-choice").each(function(t,n){e.removeTag(n,!1)})}})}(jQuery),function(e){e.fn.disableSelection=function(){return this.attr("unselectable","on").css("user-select","none").on("selectstart",!1)}}(jQuery);var PaintController=Ember.ArrayController.extend({color:null,colorVals:null,zoom:1,size:10,width:0,height:0,content:[],sprite:null,tool:null,isBackground:!1,notBackground:function(){return!this.isBackground}.property("isBackground"),screenCtx:null,toolCtx:null,rect:null,init:function(){this.addObserver("color",bind(this,this.updateColor)),this.rect=new Area},initType:function(e,t,n){this.setProperties({isBackground:e,width:t,height:n}),this.content.clear(),this.set("zoom",e?1:2),this.addSprite()},initView:function(e,t){this.set("screenCtx",e),this.set("toolCtx",t),this.isBackground&&$("#sprites-area").hide(),this.setColor([0,0,0,255]),this.tool=App.pencilTool,$(".pencil").trigger("click"),this.initEvents()},initEvents:function(){this.toggleOnBeforeUnload(!0),$(document).keydown(function(e){e.keyCode===17||e.keyCode===91?this.isCtrl=!0:e.keyCode===16?this.isShift=!0:e.keyCode===90&&this.isCtrl&&this.isShift?App.paintController.redoTool():e.keyCode===90&&this.isCtrl?App.paintController.undoTool():e.keyCode===46?App.paintController.clearTool():e.keyCode===27&&App.paintController.resetTool()}),$(document).keyup(function(e){e.keyCode===17||e.keyCode===91?this.isCtrl=!1:e.keyCode===16&&(this.isShift=!1)}),!window.File&&!window.FileReader&&!window.FileList&&!window.Blob?$("#file").remove():($("#loadFileButton").click(function(){$("#file").trigger("click")}),$("#file").change(function(e){App.paintController.handleFile(e),$("#reset").trigger("click")}))},mousedown:function(e){this.tool.mousedown(e,this.screenCtx,this.toolCtx,this.size)&&this.saveSprite()},mousemove:function(e,t){var n=this.rect;n.dirty&&(this.toolCtx.clearRect(n.x,n.y,n.width,n.height),n.dirty=!1),t?this.tool.mousemove(e,this.screenCtx,this.toolCtx,this.size)&&this.saveSprite():e.x>=0&&e.y>=0&&e.x<=this.width&&e.y<=this.height&&this.tool.preview(e,this.toolCtx,this.size,n)},mouseup:function(e){this.tool.mouseup(e,this.screenCtx,this.toolCtx,this.size)&&this.saveSprite()},setSpriteModel:function(e){this.set("sprite",e),this.loadSprite()},addSprite:function(){this.add(null)},copySprite:function(){this.add(this.sprite.clone())},removeSprite:function(){var e=this.content.indexOf(this.sprite)||1;this.content.length>1&&(this.content.removeObject(this.sprite),this.setSpriteModel(this.content[e-1]))},add:function(e){var t=this.content.indexOf(this.sprite);this.content.length<8&&(e=e||SpriteModel.create(),this.set("sprite",e),this.content.insertAt(t+1,e))},moveSprite:function(e,t){var n=this.content[e];this.content.removeAt(e),this.content.insertAt(t,n)},saveSprite:function(){var e=this.width,t=this.height,n=this.zoom,r=this.screenCtx.getImageData(0,0,e,t),i,s,o,u;if(this.zoom!==1){i=this.screenCtx.getImageData(0,0,e*n,t*n);for(s=0;s<t;s++)for(o=0;o<e;o++)for(u=0;u<4;u++)r.data[(s*e+o)*4+u]=i.data[(s*e*n+o)*n*4+u]}this.sprite.save(r)},loadSprite:function(){var e=this.sprite.load(),t=this.screenCtx;if(!e)return;this.zoom===1?t.putImageData(e,0,0):(t.clearRect(0,0,this.width,this.height),t.putImageDataOverlap(e,0,0))},getTool:function(){return this.tool},setTool:function(e){this.resetTool(),$("#paint-area").css({cursor:"crosshair"}),this.set("tool",e)},resetTool:function(){this.tool.reset(this.screenCtx,this.toolCtx)&&this.saveSprite()},setSize:function(e){this.set("size",e)},setColor:function(e){this.set("colorVals",e),this.set("color",rgbToHex(e[0],e[1],e[2]))},updateColor:function(){var e=this.screenCtx,t=this.toolCtx;e.fillStyle=t.fillStyle=this.color,e.strokeStyle=t.strokeStyle="#555"},updateZoom:function(e){this.set("zoom",e),this.screenCtx.scale(e,e),this.toolCtx.scale(e,e),this.screenCtx.lineCap=this.toolCtx.lineCap="round",this.screenCtx.lineWidth=this.toolCtx.lineWidth=1,this.updateColor(),this.loadSprite()},handleFile:function(e){var t=new FileReader,n=e.target.files[0];if(!n||!n.type.match("image.*")){alert("You must select a valid image file!");return}t.onload=function(e){var t=new Image;t.onload=function(){App.paintController.handleImage(t)},t.src=e.target.result},t.readAsDataURL(n)},handleImage:function(e){var t=App.selectTool.area.clone();$(".select").trigger("click"),App.selectTool.loadImage(this.toolCtx,e,this.zoom,t)},selectTool:function(){this.setTool(App.selectTool)},pencilTool:function(){this.setTool(App.pencilTool),$("#paint-area").css({cursor:"none"})},eraseTool:function(){this.setTool(App.eraserTool),$("#paint-area").css({cursor:"none"})},drawRectTool:function(){App.drawTool.setDrawFunction("rect"),this.setTool(App.drawTool)},drawRectFillTool:function(){App.drawTool.setDrawFunction("fillrect"),this.setTool(App.drawTool)},drawCircleTool:function(){App.drawTool.setDrawFunction("circle"),this.setTool(App.drawTool)},drawCircleFillTool:function(){App.drawTool.setDrawFunction("fillcircle"),this.setTool(App.drawTool)},drawLineTool:function(){App.drawTool.setDrawFunction("line"),this.setTool(App.drawTool),$("#paint-area").css({cursor:"none"})},fillTool:function(){this.setTool(App.fillTool)},clearTool:function(){this.tool.imageData?this.tool.clearRect(this.toolCtx):(this.resetTool(),this.clear(this.screenCtx),this.clear(this.toolCtx)),this.saveSprite()},undoTool:function(){this.resetTool(),this.sprite.undo(),this.loadSprite()},redoTool:function(){this.resetTool(),this.sprite.redo(),this.loadSprite()},flipVertical:function(){this.tool.imageData?this.tool.flipVertical(this.toolCtx):this.transpose(1,-1,0,this.height,0)},flipHorizontal:function(){this.tool.imageData?this.tool.flipHorizontal(this.toolCtx):this.transpose(-1,1,this.width,0,0)},rotateLeft:function(){this.tool.imageData?this.tool.rotate(this.toolCtx,!0):this.transpose(1,1,0,0,-Math.PI/2)},rotateRight:function(){this.tool.imageData?this.tool.rotate(this.toolCtx,!1):this.transpose(1,1,0,0,Math.PI/2)},transpose:function(e,t,n,r,i){var s=this.screenCtx,o=this.sprite.load(),u=this.width,a=this.height;this.clear(s),s.save(),s.translate(n,r),s.scale(e,t),s.translate(Math.floor(u/2),Math.floor(a/2)),s.rotate(i),s.translate(-Math.floor(u/2),-Math.floor(a/2)),s.putImageDataOverlap(o,0,0),s.restore(),this.saveSprite()},clear:function(e){e.clearRect(0,0,this.width,this.height)},pipetteTool:function(){this.setTool(App.pipetteTool)},save:function(){var e=$("#imageName").val(),t=$("#makePublic").is(":checked")?1:0,n=this.content.length,r,i,s,o;this.resetTool();if(!e)return alert("Image has no name!"),!1;Notifier.showLoader("Saving your image ..."),r=document.createElement("canvas"),i=r.getContext("2d"),r.width=this.width*n,r.height=this.height,this.isBackground&&(i.fillStyle="#FFF",i.fillRect(0,0,this.width,this.height));for(o=0;o<n;o++)i.putImageDataOverlap(this.content[o].load(),o*this.width,0);s=r.toDataURL("image/png"),$.ajax({url:"/graphics",type:"post",data:{graphic:{name:e,image_data:s,frame_count:n,frame_width:this.width,frame_height:this.height,"public":t,background:this.isBackground}},success:function(e){App.paintController.toggleOnBeforeUnload(!1),App.paintController.goToTypeSelection(!1),Notifier.hideLoader()},error:function(){Notifier.hideLoader(),alert("there was an error saving your image")}})},goToTypeSelection:function(e){if(e||typeof e=="object")if(!confirm("Delete all and go back to type selection?"))return!1;this.toggleOnBeforeUnload(),App.paintView.remove(),App.paintSizeView.appendTo("#content")},toggleOnBeforeUnload:function(e){var t=e||!1;t?window.onbeforeunload=function(e){var t="Do you really want to leave the paint tool without saving your art?",e=e||window.event;return e&&(e.returnValue=t),t}:window.onbeforeunload=null}}),SpritePlayerController=Ember.ArrayController.extend({contentBinding:"App.paintController.content",ctx:null,index:0,playInterval:null,show:function(){this.ctx=$("#playerCanvas")[0].getContext("2d"),this.draw()},start:function(){$("#playButton").hide(),$("#stopButton").show(),this.content.length>1&&(this.playInterval=setInterval(bind(this,this.play),this.getDuration()))},play:function(){this.index++;if(this.index===this.content.length){if(!this.isLooping())return this.stop();this.index=0}this.draw()},draw:function(){this.content[this.index].draw(this.ctx)},stop:function(){$("#playButton").show(),$("#stopButton").hide(),clearInterval(this.playInterval),this.index=0,this.draw()},isLooping:function(){return!0},getDuration:function(){return parseInt($("#playDelay").val())||200}}),SpriteModel=Ember.Object.extend({ctx:null,stack:null,iterator:0,init:function(){this.stack=[],this.iterator=0},initView:function(e){this.set("ctx",e),this.stack.length||this.save(e.getImageData(0,0,App.paintController.width,App.paintController.height)),this.draw(),App.paintController.loadSprite()},clone:function(){var e=SpriteModel.create();return e.save(this.ctx.cloneImageData(this.load())),e},load:function(){return this.stack.length?this.stack[this.iterator-1]:null},save:function(e){this.stack[this.iterator]=e,this.stack.length<=100?this.iterator++:this.stack.shift(),this.ctx&&this.draw()},undo:function(){this.iterator>1&&(this.iterator--,this.draw())},redo:function(){this.iterator<this.stack.length&&(this.iterator++,this.draw())},draw:function(e){var t=this.load();e=e||this.ctx,t&&e&&e.putImageData(t,0,0)}}),ToolModel=Ember.Object.extend({mousedown:function(e,t,n,r){},mousemove:function(e,t,n,r){},mouseup:function(e,t,n,r){return!0},clear:function(e){e.clearRect(0,0,App.paintController.width,App.paintController.height)},reset:function(e,t){},preview:function(e,t,n,r){}}),PencilToolModel=ToolModel.extend({oldX:0,oldY:0,mousedown:function(e,t,n,r){this.oldX=e.x,this.oldY=e.y,t.fillRect(e.x-Math.floor(r/2),e.y-Math.floor(r/2),r,r)},mousemove:function(e,t,n,r){bresenham(function(e,n){t.fillRect(e-Math.floor(r/2),n-Math.floor(r/2),r,r)},e.x,e.y,this.oldX,this.oldY),this.oldX=e.x,this.oldY=e.y},preview:function(e,t,n,r){r.set(e.x-Math.floor(n/2),e.y-Math.floor(n/2),n,n),r.dirty=!0,t.fillRect(r.x,r.y,r.width,r.height)}}),EraserToolModel=ToolModel.extend({oldX:0,oldY:0,mousedown:function(e,t,n,r){this.oldX=e.x,this.oldY=e.y,t.clearRect(e.x-Math.floor(r/2),e.y-Math.floor(r/2),r,r)},mousemove:function(e,t,n,r){bresenham(function(e,n){t.clearRect(e-Math.floor(r/2),n-Math.floor(r/2),r,r)},e.x,e.y,this.oldX,this.oldY),this.oldX=e.x,this.oldY=e.y},preview:function(e,t,n,r){var i=App.paintController.zoom;r.set(e.x-Math.floor(n/2),e.y-Math.floor(n/2),n,n),r.dirty=!0,t.save(),t.setTransform(1,0,0,1,.5,.5),t.strokeRect(r.x*i,r.y*i,r.width*i-1,r.height*i-1),t.restore()}}),PipetteToolModel=ToolModel.extend({mouseup:function(e,t,n,r){var i=App.paintController.zoom,s=t.getImageData(e.x*i,e.y*i,1,1).data;App.paintController.setColor(s)}}),DrawToolModel=ToolModel.extend({oldX:0,oldY:0,area:null,circle:null,init:function(){this.area=new Area,this.circle=new Circle},mousedown:function(e,t,n,r){this.oldX=e.x,this.oldY=e.y,this.area.set(e.x,e.y,0,0),this.circle.set(e.x,e.y,0)},mousemove:function(e,t,n,r){this.clear(n),this.draw(n,e,r)},mouseup:function(e,t,n,r){return this.clear(n),this.draw(t,e,r),!0},draw:function(e,t,n){},drawRect:function(e,t,n){var r=this.area.setPosition(this.oldX,this.oldY);r.resize(t).adjust(),this.fill||this.area.width<=2*n||this.area.height<=2*n?e.fillRect(r.x,r.y,r.width,r.height):(e.fillRect(r.x,r.y,r.width,n),e.fillRect(r.x,r.y,n,r.height),e.fillRect(r.x+r.width-n,r.y,n,r.height),e.fillRect(r.x,r.y+r.height-n,r.width,n))},drawCircle:function(e,t,n){var r=Math.floor(n/2),i=function(t,n,r,i){t=Math.floor(t),r=Math.floor(r),n=Math.floor(n),e.fillRect(t,n,r-t,1)};this.fill?ellipse(i,t.x,t.y,this.oldX,this.oldY):n===1?ellipse(function(t,n,r,i){t=Math.floor(t),r=Math.floor(r),n=Math.floor(n),i=Math.floor(i),e.fillRect(t,n,1,1),e.fillRect(r,i,1,1)},t.x,t.y,this.oldX,this.oldY):ellipse(function(e,t,o,u){e=Math.floor(e),o=Math.floor(o),t=Math.floor(t),u=Math.floor(u),ellipse(i,e-r,t-r,e-r+n,t-r+n),ellipse(i,o-r,u-r,o-r+n,u-r+n)},t.x,t.y,this.oldX,this.oldY)},drawLine:function(e,t,n){bresenham(function(t,r){e.fillRect(t-Math.floor(n/2),r-Math.floor(n/2),n,n)},t.x,t.y,this.oldX,this.oldY)},setDrawFunction:function(e){switch(e){case"rect":this.draw=this.drawRect,this.fill=!1;break;case"fillrect":this.draw=this.drawRect,this.fill=!0;break;case"circle":this.draw=this.drawCircle,this.fill=!1;break;case"fillcircle":this.draw=this.drawCircle,this.fill=!0;break;case"line":this.draw=this.drawLine}},preview:function(e,t,n,r){this.draw===this.drawLine&&(r.set(e.x-Math.floor(n/2),e.y-Math.floor(n/2),n,n),r.dirty=!0,t.fillRect(r.x,r.y,r.width,r.height))}}),FillToolModel=ToolModel.extend({mousedown:function(e,t,n,r){var i=App.paintController.zoom,s=t.getImageData(e.x*i,e.y*i,1,1).data,o=App.paintController.colorVals,u=[0,0,0,0],a=n.cloneImageData(App.paintController.sprite.load()),f=a.width,l=a.height,c=[],h,p;if(this.compare(s,o)||e.x<0||e.x>=f||e.y<0||e.y>=l)return!1;this.setPixel(a,e.x,e.y,o),c.push(e.x,e.y);while(c.length)h=c.shift(),p=c.shift(),h+1<f&&this.compare(s,this.getPixel(a,h+1,p,u))&&(this.setPixel(a,h+1,p,o),c.push(h+1,p)),h-1>=0&&this.compare(s,this.getPixel(a,h-1,p,u))&&(this.setPixel(a,h-1,p,o),c.push(h-1,p)),p+1<l&&this.compare(s,this.getPixel(a,h,p+1,u))&&(this.setPixel(a,h,p+1,o),c.push(h,p+1)),p-1>=0&&this.compare(s,this.getPixel(a,h,p-1,u))&&(this.setPixel(a,h,p-1,o),c.push(h,p-1));return App.paintController.sprite.save(a),App.paintController.loadSprite(),!1},mouseup:function(e,t,n,r){return!1},compare:function(e,t){return e=e[0]+e[1]+e[2]+e[3],t=t[0]+t[1]+t[2]+t[3],Math.abs(e-t)<1},getPixel:function(e,t,n,r){var i=(n*e.width+t)*4;return r[0]=e.data[i],r[1]=e.data[i+1],r[2]=e.data[i+2],r[3]=e.data[i+3],r},setPixel:function(e,t,n,r){var i=(n*e.width+t)*4;e.data[i]=r[0],e.data[i+1]=r[1],e.data[i+2]=r[2],e.data[i+3]=r[3]}}),SelectToolModel=ToolModel.extend({area:null,area2:null,mouse:null,imageData:null,dragging:!1,init:function(){this.area=new Area,this.area2=new Area,this.mouse=new Vector},mousedown:function(e,t,n,r){var i=this.area,s=!1;return this.mouse.copy(e),i.contains(e)?this.dragging=!0:(s=this.reset(t,n),i.set(e.x,e.y,0,0),this.dragging=!1),s},mousemove:function(e,t,n,r){var i=this.area,s=App.paintController.zoom;this.clear(n),this.dragging?(i.move(this.mouse.subSelf(e).mulSelf(-1)),this.drawArea(n)):(i.resize(e),this.drawArea(n)),this.mouse.copy(e)},mouseup:function(e,t,n,r){var i=this.area,s=App.paintController.zoom;this.dragging=!1,i.adjust(),!this.imageData&&i.width&&i.height&&(this.imageData=t.getImageData(i.x*s,i.y*s,i.width*s,i.height*s),t.clearRect(i.x,i.y,i.width,i.height),this.drawArea(n))},reset:function(e,t){var n=App.paintController.zoom;this.clear(t);if(this.imageData)return e.save(),e.setTransform(1,0,0,1,0,0),e.putImageDataOverlap(this.imageData,this.area.x*n,this.area.y*n),e.restore(),this.imageData=null,this.area.set(0,0,0,0),!0},drawArea:function(e){var t=App.paintController.zoom,n=this.area2.copy(this.area).adjust();e.clearRect(n.x,n.y,n.width,n.height),this.imageData&&e.putImageData(this.imageData,n.x*t,n.y*t),e.save(),e.setTransform(1,0,0,1,.5,.5),e.strokeStyle="#FFF",e.strokeRect(n.x*t,n.y*t,n.width*t-1,n.height*t-1),e.strokeStyle="#000",e.dashedRect(n.x*t,n.y*t,n.width*t-1,n.height*t-1,5),e.restore()},flipVertical:function(e){this.flip(e,1,-1,0,this.imageData.height)},flipHorizontal:function(e){this.flip(e,-1,1,this.imageData.width,0)},flip:function(e,t,n,r,i){var s=document.createElement("canvas"),o=s.getContext("2d"),u=this.imageData;s.width=u.width,s.height=u.height,o.translate(r,i),o.scale(t,n),o.putImageDataOverlap(this.imageData,0,0),this.imageData=o.getImageData(0,0,u.width,u.height),this.drawArea(e)},rotate:function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),i=this.area,s=this.imageData,o;n.width=s.height,n.height=s.width,t?(r.rotate(-Math.PI/2),r.translate(-s.width,0)):(r.rotate(Math.PI/2),r.translate(0,-s.height)),r.putImageDataOverlap(this.imageData,0,0),this.imageData=r.getImageData(0,0,s.height,s.width),e.clearRect(i.x,i.y,i.width,i.height),o=i.width,i.width=i.height,i.height=o,this.drawArea(e)},clearRect:function(e){this.imageData=null,this.area.set(0,0,0,0),this.clear(e)},loadImage:function(e,t,n,r){var i=document.createElement("canvas"),s=i.getContext("2d"),o=t;r.width||r.height?(o=r,this.area.copy(r)):this.area.set(0,0,o.width,o.height),i.width=o.width*n,i.height=o.height*n,s.scale(n*o.width/t.width,n*o.height/t.height),s.drawImage(t,0,0),this.imageData=s.getImageData(0,0,o.width*n,o.height*n),this.drawArea(e)}});PixelDrawer=function(e){e?this.setCanvasContest(e):(this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.dataWidth=0,this.dataHeight=0)},PixelDrawer.prototype.setCanvasContext=function(e){this.canvas=e,this.context=e.getContext("2d")},PixelDrawer.prototype.putPixel=function(e,t,n){var r=this.checkIfParsedColor(n);this.colorPixel(e,t,r)},PixelDrawer.prototype.fillRect=function(e,t,n,r,i){var s=this.checkIfParsedColor(i),o=n-e,u=r-t;for(var a=0;a<Math.abs(o);a++)for(var f=0;f<Math.abs(u);f++)o>0?u>0?this.colorPixel(e+a,t+f,s):this.colorPixel(e+a,t-f,s):u>0?this.colorPixel(e-a,t+f,s):this.colorPixel(e-a,t-f,s)},PixelDrawer.prototype.drawRect=function(e,t,n,r,i,s){var o=this.checkIfParsedColor(i);this.drawLine(e,t,e,r,o,s),this.drawLine(e,r,n,r,o,s),this.drawLine(n,r,n,t,o,s),this.drawLine(n,t,e,t,o,s)},PixelDrawer.prototype.drawCircle=function(e,t,n,r,i,s){s==1?this.drawCircleWidth1px(e,t,n,r,i):this.drawCircleWidthDirtyHack(e,t,n,r,i,s)},PixelDrawer.prototype.drawCircleWidth1px=function(e,t,n,r,i){var s=this.checkIfParsedColor(i);n=Math.abs(n-e),r=Math.abs(r-t);var o=0,u=r,a=n*n,f=r*r,l=-(a/4+n%2+f),c=-(f/4+r%2+a),h=-(f/4+r%2),p=-a*u,d=2*f*o,v=-2*a*u,m=2*f,g=2*a;while(u>=0&&o<=n)this.colorPixel(e+o,t+u,s),(o!=0||u!=0)&&this.colorPixel(e-o,t-u,s),o!=0&&u!=0&&(this.colorPixel(e+o,t-u,s),this.colorPixel(e-o,t+u,s)),p+f*o<=l||p+a*u<=h?(o++,d+=m,p+=d):p-a*u>c?(u--,v+=g,p+=v):(o++,d+=m,p+=d,u--,v+=g,p+=v)},PixelDrawer.prototype.drawCircleWidthDirtyHack=function(e,t,n,r,i,s){var o=this.checkIfParsedColor(i);n=Math.abs(n-e),r=Math.abs(r-t);var u=0,a=r,f=n*n,l=r*r,c=-(f/4+n%2+l),h=-(l/4+r%2+f),p=-(l/4+r%2),d=-f*a,v=2*l*u,m=-2*f*a,g=2*l,y=2*f,b=Math.floor(s/2);while(a>=0&&u<=n)this.fillCircle(e+u,t+a,e+u+b,t+a+b,i),(u!=0||a!=0)&&this.fillCircle(e-u,t-a,e-u+b,t-a+b,o),u!=0&&a!=0&&(this.fillCircle(e+u,t-a,e+u+b,t-a+b,o),this.fillCircle(e-u,t+a,e-u+b,t+a+b,o)),d+l*u<=c||d+f*a<=p?(u++,v+=g,d+=v):d-f*a>h?(a--,m+=y,d+=m):(u++,v+=g,d+=v,a--,m+=y,d+=m)},PixelDrawer.prototype.fillCircle=function(e,t,n,r,i){var s=this.checkIfParsedColor(i);n=Math.abs(n-e),r=Math.abs(r-t);var o=0,u=r,a=1,f=n*n,l=r*r,c=-(f/4+n%2+l),h=-(l/4+r%2+f),p=-(l/4+r%2),d=-f*u,v=2*l*o,m=-2*f*u,g=2*l,y=2*f;while(u>=0&&o<=n)d+l*o<=c||d+f*u<=p?(o++,v+=g,d+=v,a+=2):d-f*u>h?(this.drawLine(e-o,t-u,e-o+a,t-u,s),u!=0&&this.drawLine(e-o,t+u,e-o+a,t+u,s),u--,m+=y,d+=m):(this.drawLine(e-o,t-u,e-o+a,t-u,s),u!=0&&this.drawLine(e-o,t+u,e-o+a,t+u,s),o++,v+=g,d+=v,u--,m+=y,d+=m,a+=2);r==0&&this.drawLine(e-n,t,e-n+2*n+1,t)},PixelDrawer.prototype.drawLine=function(e,t,n,r,i,s){s=s||1;var o=this.checkIfParsedColor(i),u=Math.abs(n-e),a=Math.abs(r-t),f=0,l=0;e<n?f=1:f=-1,t<r?l=1:l=-1;var c=u-a;for(;;){if(s==1)this.colorPixel(e,t,o);else{var h=Math.floor(s/2);this.fillRect(e-h,t-h,e+h,t+h,o)}if(e==n&&t==r)break;var p=2*c;p>-a&&(c-=a,e+=f),p<u&&(c+=u,t+=l)}},PixelDrawer.prototype.colorPixel=function(e,t,n){if(e>=0&&e<this.dataWidth&&t>=0&&t<this.dataHeight){var r=t*this.dataWidth*4+e*4;this.data[r]=n[0],this.data[r+1]=n[1],this.data[r+2]=n[2],this.data[r+3]=n[3]}},PixelDrawer.prototype.getPixelColor=function(e,t){var n=t*this.dataWidth*4+e*4;return[this.data[n],this.data[n+1],this.data[n+2],this.data[n+3]]},PixelDrawer.prototype.compareColor=function(e,t){return e[0]==e[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]?!0:!1},PixelDrawer.prototype.floodFill=function(e,t,n,r){n=this.checkIfParsedColor(n);var i=[];this.fillPixel(e,t,n,r,i);while(i.length>0)toFill=i.pop(),this.fillPixel(toFill[0],toFill
[1],n,r,i)},PixelDrawer.prototype.fillPixel=function(e,t,n,r,i){this.pixelNotColored(e,t,n,r)&&this.colorPixel(e,t,n),this.pixelNotColored(e,t-1,n,r)&&i.push([e,t-1]),this.pixelNotColored(e+1,t,n,r)&&i.push([e+1,t]),this.pixelNotColored(e,t+1,n,r)&&i.push([e,t+1]),this.pixelNotColored(e-1,t,n,r)&&i.push([e-1,t])},PixelDrawer.prototype.pixelNotColored=function(e,t,n,r){return e>=0&&e<this.dataWidth&&t>=0&&t<this.dataHeight&&this.compareColor(this.getPixelColor(e,t),r)&&!this.compareColor(this.getPixelColor(e,t),n)?!0:!1},PixelDrawer.prototype.floodFillRecursive=function(e,t,n,r){n=this.checkIfParsedColor(n),e>=0&&e<this.dataWidth&&t>=0&&t<this.dataHeight&&this.compareColor(this.getPixelColor(e,t),r)&&!this.compareColor(this.getPixelColor(e,t),n)&&(this.colorPixel(e,t,n),this.floodFill(e+1,t,n,r),this.floodFill(e-1,t,n,r),this.floodFill(e,t+1,n,r),this.floodFill(e,t-1,n,r))},PixelDrawer.prototype.parseColor=function(e){e.charAt(0)=="#"&&(e=e.substring(1));var t=[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16),parseInt(e.substr(6,2),16)];return t[3]||(t[3]=255),t},PixelDrawer.prototype.popImageData=function(){try{this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.data=this.imageData.data,this.dataWidth=this.imageData.width,this.dataHeight=this.imageData.height}catch(e){console.log("could not pop imageData, canvas was not set.")}},PixelDrawer.prototype.pushImageData=function(){this.imageData.data=this.data,this.context.putImageData(this.imageData,0,0)},PixelDrawer.prototype.checkIfParsedColor=function(e){return e instanceof Array?e:this.parseColor(e)};var ColorPickerView=Ember.View.extend({templateName:"paint/templates/color_picker_template",colorBinding:"App.paintController.color",colorValsBinding:"App.paintController.colorVals",imageData:null,width:180,height:28,down:!1,lastColors:[],isSelecting:!1,didInsertElement:function(){this.lastColors=[],this.$(".lastColorItem").css({"background-color":"#000000"});var e=this.$("#colorselect")[0],t=e.getContext("2d"),n=this,r=this.width,i=this.height,s;e.width=r,e.height=i,e.onselectstart=function(){return!1},s=t.createLinearGradient(0,0,r/12*11,0),s.addColorStop(0,"#C33"),s.addColorStop(1/6,"#DD2"),s.addColorStop(2/6,"#3C3"),s.addColorStop(.5,"#3CC"),s.addColorStop(4/6,"#33C"),s.addColorStop(5/6,"#B4B"),s.addColorStop(1,"#C33"),t.fillStyle=s,t.fillRect(0,0,r/12*11,i),t.fillStyle="#888",t.fillRect(r/12*11,0,r/12,i),s=t.createLinearGradient(0,0,0,i),s.addColorStop(.02,"#FFF"),s.addColorStop(.6,"rgba(255,255,255,0)"),s.addColorStop(.61,"rgba(0,0,0,0)"),s.addColorStop(1,"#000"),t.fillStyle=s,t.fillRect(0,0,r,i),this.set("imageData",t.getImageData(0,0,r,i).data),this.addObserver("color",function(){n.$("#colorfield").css("background-color",n.color),n.down||n.addLastUsedColor(n.colorVals)}),this.$("#colorselect").mousedown(function(e){n.set("down",!0),App.paintController.setColor(n.getColor(e,this))}),this.$("#colorselect").mousemove(function(e){n.down&&App.paintController.setColor(n.getColor(e,this))}),this.$("#colorselect").mouseout(function(e){n.set("down",!1)}),this.$("#colorselect").mouseup(function(e){n.set("down",!1),n.addLastUsedColor(n.colorVals)}),this.$(".lastColorItem").click(function(){var e=n.lastColors[$(this).index()+1];App.paintController.setColor(e||[0,0,0,255])})},addLastUsedColor:function(e){var t=this.$(".lastColorItem"),n=t.last().index(),r=this.lastColors,i,s,o;for(i=0;i<r.length;i++){o=!0;for(s=0;s<4;s++)if(r[i][s]!==e[s]){o=!1;break}if(o){r.splice(i,1);break}}r.unshift(e)>7&&r.pop();for(i=1;i<r.length;i++)$(t[i-1]).css("background-color","rgba("+r[i][0]+","+r[i][1]+","+r[i][2]+","+r[i][3]+")")},getColor:function(e,t){var n=$(t).offset(),r=this.width*4*Math.floor(e.pageY-n.top)+4*Math.floor(e.pageX-n.left),i=this.imageData;return r>=this.width*this.height*4?[0,0,0,255]:[i[r],i[r+1],i[r+2],i[r+3]]}}),PaintSizeView=Ember.View.extend({templateName:"paint/templates/paint_size_template",size:null,width:128,height:128,didInsertElement:function(){var e=this;this.set("width",128),this.set("height",128),$("#canvas-size").resizable({grid:1,minWidth:32,minHeight:32,maxWidth:256,maxHeight:256,handles:"se",resize:function(t,n){$(".objWidth").val(n.size.width),$(".objHeight").val(n.size.height),e.set("width",n.size.width),e.set("height",n.size.height)},stop:function(e,t){App.paintSizeView.setPaintType(t.helper.parent())}}),$("#canvas-size").addTouch(),$("#canvas-size .ui-icon").css({background:'url("/assets/paint/handle.png")',width:"30px",height:"30px"}),$(".sizeInput").change(function(){var t=clamp(parseInt($(".objWidth").val()),32,256),n=clamp(parseInt($(".objHeight").val()),32,256);$("#canvas-size").css({width:t+"px",height:n+"px"}),$(".objWidth").val(t),$(".objHeight").val(n),e.set("width",t),e.set("height",n)}),$(".paint-type").click(function(){App.paintSizeView.setPaintType($(this))}),$(".ttip").tooltip(),$(".ttipBottom").tooltip({placement:"bottom"}),$(".pop").popover({trigger:"hover"}),$(".popBottom").popover({placement:"bottom",trigger:"hover"})},setPaintType:function(e){var t=this.$("#startPainting"),n="start painting ";this.$(".paint-type").removeClass("type-selected"),e.addClass("type-selected"),e.attr("data-type")==="background"?n+="background":n+="graphic ("+this.width+"x"+this.height+")",t.html(n),t.css({display:"block"})},start:function(){var e=this.$(".type-selected").attr("data-type"),t,n,r,i=!1;e==="object"?(r=$("#canvas-size"),t=r.width(),n=r.height()):(t=640,n=390,i=!0),$(".pop").popover("destroy"),App.paintSizeView.remove(),App.paintController.initType(i,t,n),App.paintView.appendTo("#content")}}),PaintView=Ember.View.extend({templateName:"paint/templates/paint_template",widthBinding:"App.paintController.width",heightBinding:"App.paintController.height",zoomBinding:"App.paintController.zoom",sizeBinding:"App.paintController.size",screenCanvas:null,toolCanvas:null,patternCanvas:null,patternCtx:null,mouseDown:!1,bgToggleCounter:0,bgColors:['url("/assets/paint/pattern.png")',"#FFF","#000"],isSprites:!0,didInsertElement:function(){var e=this.$("#mouse-area"),t=this;this.set("screenCanvas",this.$("#screenCanvas")[0]),this.set("toolCanvas",this.$("#toolCanvas")[0]),this.set("patternCanvas",this.$("#patternCanvas")[0]),this.set("patternCtx",this.patternCanvas.getContext("2d")),e.disableSelection(),e.mousedown(function(e){App.paintController.mousedown(t.getMouse(e)),t.set("active",!0)}),e.mousemove(function(e){App.paintController.mousemove(t.getMouse(e),t.active)}),e.mouseup(function(e){App.paintController.mouseup(t.getMouse(e)),t.set("active",!1)}),$(".selectable").click(function(){$(".activeTool").tooltip("hide"),$(".selectable").removeClass("activeTool"),$(this).addClass("activeTool")}),App.paintController.initView(this.screenCanvas.getContext("2d"),this.toolCanvas.getContext("2d")),App.paintController.isBackground?(this.bgToggleCounter=1,this.resize()):(this.bgToggleCounter=2,this.toggleBackground()),$("#sizeSlider").slider({value:this.size,min:1,max:20,step:1,slide:function(e,t){App.paintController.setSize(t.value)}}),$("#zoomSlider").slider({value:this.zoom,min:1,max:4,step:1,slide:function(e,n){t.setZoom(n.value)}}),$("#zoom-canvas-area").addTouch(),$("#sprites-area-scroll").addTouch(),$(".tool-bar").addTouch(),$(".ttip").tooltip(),$(".ttipBottom").tooltip({placement:"bottom"}),$(".pop").popover({trigger:"hover"}),$(".popBottom").popover({placement:"bottom",trigger:"hover"}),this.makeSortable()},toggleBackground:function(e){this.bgToggleCounter=this.bgToggleCounter<this.bgColors.length-1?this.bgToggleCounter+1:0,$(".toggleBgButton").css("background",this.bgColors[this.bgToggleCounter]),this.resize()},showTypeSelection:function(){$("#paint-wrapper").hide(),$("#paint-size-wrapper").show()},resize:function(){var e=this.$("#zoom-canvas-area").height(),t=this.zoom,n=this.height*t,r=this.width*t,i=this.patternCtx,s=8*t,o,u;App.paintController.resetTool(),this.screenCanvas.width=this.toolCanvas.width=this.patternCanvas.width=r,this.screenCanvas.height=this.toolCanvas.height=this.patternCanvas.height=n,this.$("#paint-area").css({width:r,height:n,top:n>=e?"0%":"50%","margin-top":n>=e?0:-n/2}),this.$("#mouse-area").css({width:r>this.$("#zoom-canvas-area").width()?r:"100%",height:n>this.$("#zoom-canvas-area").height()?n:"100%"});if(this.bgToggleCounter===0){i.fillStyle="#FFF",i.fillRect(0,0,r,n),i.fillStyle="#CCC";for(o=Math.floor(r/s);o>=0;o--)for(u=Math.floor(n/s);u>=0;u--)(o%2&&!(u%2)||u%2&&!(o%2))&&i.fillRect(o*s,u*s,s,s)}else i.fillStyle=this.bgColors[this.bgToggleCounter],i.fillRect(0,0,r,n);App.paintController.updateZoom(this.zoom)},zoomIn:function(){this.zoom<4&&(this.set("zoom",this.zoom+1),this.resize())},zoomOut:function(){this.zoom>1&&(this.set("zoom",this.zoom-1),this.resize())},setZoom:function(e){this.set("zoom",e),this.resize()},getMouse:function(e){var t=$(this.toolCanvas).offset();return{x:Math.floor((e.pageX-t.left)/this.zoom),y:Math.floor((e.pageY-t.top)/this.zoom)}},showSprites:function(){this.set("isSprites",!0),App.spritePlayer.stop(),Ember.run.end(),this.makeSortable()},showAnimation:function(){this.set("isSprites",!1),Ember.run.end(),App.spritePlayer.show()},type:function(){return App.paintController.isBackground?"background":"graphic"}.property("App.paintController.isBackground"),makeSortable:function(){var e,t;this.$("#sprites-area-scroll").sortable({placeholder:"placeholder",start:function(t,n){e=$(this).sortable("toArray").indexOf(n.item[0].id)},stop:function(n,r){t=$(this).sortable("toArray").indexOf(r.item[0].id),e!==t&&App.paintController.moveSprite(e,t)}}).disableSelection()},addSprite:function(){App.paintController.addSprite(),Ember.run.end(),this.makeSortable()},copySprite:function(){App.paintController.copySprite(),Ember.run.end(),this.makeSortable()},removeSprite:function(){App.paintController.removeSprite(),Ember.run.end(),this.makeSortable()}}),SpritesView=Ember.CollectionView.extend({contentBinding:"App.paintController.content",itemViewClass:Ember.View.extend({tagName:"canvas",classNames:["spriteView"],didInsertElement:function(){if(this.$().length){var e=this.$()[0],t=this;e.width=App.paintController.width,e.height=App.paintController.height,this.content.initView(e.getContext("2d")),this.addObserver("App.paintController.sprite",function(){t.content===App.paintController.sprite&&t.selectSelf()}),this.content===App.paintController.sprite&&this.selectSelf()}},click:function(){this.selectSelf(),App.paintController.setSpriteModel(this.content)},selectSelf:function(){var e=this._parentView._childViews,t;for(var t=0;t<e.length;t++)e[t].$().removeClass("selected");this.$().addClass("selected")}})}),MoveAction=function(e,t,n){this.gameObject=t,this.speed=n,this.target=null,this.offset=new Vector,this.area=null,this.random=!1,this.direction=null,this.path=[],e==="moveIn"?this.execute=this.executeMoveIn:e==="moveTo"?this.execute=this.executeMoveTo:e=="moveAlongPath"?this.execute=this.executePath:e==="jumpTo"&&(this.execute=this.executeJumpTo)};MoveAction.prototype={execute:null,executeJumpTo:function(){this.area?this.gameObject.movement.jump(this.area):this.gameObject.movement.setPosition(this.target.add(this.offset))},executeMoveTo:function(){this.gameObject.movement.setTarget(this.target,this.offset,this.speed)},executePath:function(){this.gameObject.movement.followPath(this.path,this.mode,this.speed)},executeMoveIn:function(){var e;this.random?e=Math.random()*Math.PI*2:this.direction!==null?e=this.direction:e=this.target.sub(this.gameObject.movement.position).angle(),this.gameObject.movement.setDirection(e,this.speed)}};var RoamAction=function(e,t,n,r){this.execute=function(){e.movement.roam(t,n,r)}},SwapAction=function(e,t){this.execute=function(){var n=e.movement.position,r=t.movement.position,i=n.clone();e.movement.stop(),t.movement.stop(),n.copy(r),r.copy(i)}},StopAction=function(e){this.execute=function(){e.movement.stop()}},ScaleAction=function(e,t){this.scaleTo=e.scale,this.gameObject=t,this.originalWidth=this.gameObject.graphic.image.width,this.originalHeight=this.gameObject.graphic.image.height,this.scaleInterval=60,this.scaleTimeout=null;var n=[.0125,.0375,.0625,.25,.625];this.scaleSpeed=n[e.speed],this.deltaSize=this.scaleTo<100?-1:1,e.speed===4?this.execute=this.executeJumpScale:this.execute=this.executeMoveScale};ScaleAction.prototype={execute:null,executeJumpScale:function(){this.gameObject.graphic.scaleX=this.scaleTo/100,this.gameObject.graphic.scaleY=this.scaleTo/100},executeMoveScale:function(){var e=this,t=!1;this.deltaSize>0?this.gameObject.graphic.scaleX<this.scaleTo/100&&(this.scaleAnimate(),t=!0):this.gameObject.graphic.scaleX>this.scaleTo/100&&(this.scaleAnimate(),t=!0),t?this.scaleTimeout=setTimeout(function(){e.executeMoveScale()},this.scaleInterval):clearTimeout(this.scaleTimeout)},scaleAnimate:function(){this.gameObject.graphic.scaleX+=this.scaleSpeed*this.deltaSize,this.gameObject.graphic.scaleY+=this.scaleSpeed*this.deltaSize},adapatBoundingBox:function(){},calculateSizeByPercentage:function(e){return e===0?!1:Math.round(this.scaleTo*e/100)}};var FlipAction=function(e,t){this.mode=e.mode,this.gameObject=t};FlipAction.prototype={execute:function(){this.mode==="horizontally"?this.gameObject.graphic.flipDirectionX*=-1:this.mode==="vertically"?this.gameObject.graphic.flipDirectionY*=-1:this.mode==="both"&&(this.gameObject.graphic.flipDirectionX*=-1,this.gameObject.graphic.flipDirectionY*=-1)}};var ArtAction=function(e,t,n,r,i,s){this.gameObject=t,this.frame=n,this.frame2=r,this.mode=i,this.speed=s,this.graphic,e==="frame"?this.execute=this.executeFrame:e==="play"?this.execute=this.executePlay:e==="stop"?this.execute=this.executeStop:e==="change"&&(this.execute=this.executeChange)};ArtAction.prototype={execute:null,executeFrame:function(){this.gameObject.animation.setFrame(this.frame)},executePlay:function(){this.gameObject.animation.play(this.frame,this.frame2,this.mode,this.speed)},executeChange:function(){this.gameObject.setGraphic(this.graphic)},executeStop:function(){this.gameObject.animation.stop()}};var WinAction={execute:function(e){!e.isWon&&!e.isLost&&(e.isWon=!0,e.player.fsm.end())}},LoseAction={execute:function(e){!e.isWon&&!e.isLost&&(e.isLost=!0,e.player.fsm.end())}},CounterAction=function(e,t,n){this.gameObject=n,this.count=t,this.type=e,this.execute=this[e];if(!this[e])throw"Counter type is unknown: "+e};CounterAction.prototype={execute:null,up:function(){this.gameObject.counter++},down:function(){this.gameObject.counter--},set:function(){this.gameObject.counter=this.count}};var Animation=function(){this.frame=1,this.time=0,this.up=!0,this.plays=!1,this.speed};Animation.prototype={speeds:[400,250,150,90,40],getFrame:function(){return this.frame},setFrame:function(e){this.frame=e,this.stop()},play:function(e,t,n,r){if(this.plays&&e===this.start&&t===this.end&&n===this.mode&&this.speed===this.speeds[r])return;this.stop(),this.start=e,this.end=t,this.frame=e,this.up=e<t,this.mode=e!==t?n:"once",this.speed=this.speeds[r],this.plays=!0},stop:function(){this.time=0,this.plays=!1},update:function(e){if(this.plays){this.time+=e;if(this.time>=this.speed){this.time-=this.speed;if(this.mode==="loop")this.up?this.frame=this.frame+1>this.end?this.start:this.frame+1:this.frame=this.frame-1<this.end?this.start:this.frame-1;else if(this.mode==="ping-pong"){this.frame+=this.up?1:-1;if(this.frame===this.end||this.frame===this.start)this.up=!this.up}else this.frame!==this.end?this.frame+=this.up?1:-1:this.stop()}}}};var Behaviour=function(){this.triggers=[],this.actions=[]};Behaviour.prototype={check:function(e){var t=!0;for(var n=0;n<this.triggers.length;n++)if(!this.triggers[n].check(e)){t=!1;break}t&&this.actions.forEachApply("execute",e)},reset:function(){this.triggers.forEachApply("reset")},draw:function(e){this.triggers.forEachApply("draw",e)}};var Vector=function(e,t){return this.set(e||0,t||0)};Vector.prototype={set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.set(e.x,e.y)},clone:function(){return new Vector(this.x,this.y)},add:function(e){return new Vector(this.x+e.x,this.y+e.y)},addSelf:function(e){return this.x+=e.x,this.y+=e.y,this},sub:function(e){return new Vector(this.x-e.x,this.y-e.y)},subSelf:function(e){return this.x-=e.x,this.y-=e.y,this},mul:function(e){return new Vector(this.x*e,this.y*e)},mulSelf:function(e){return this.x*=e,this.y*=e,this},div:function(e){return e?new Vector(this.x/e,this.y/e):new Vector},divSelf:function(e){return e&&(this.x/=e,this.y/=e),this},dot:function(e){return this.x*e.x+this.y*e.y},normSquared:function(){return this.x*this.x+this.y*this.y},norm:function(){return Math.sqrt(this.normSquared())},normalize:function(){return this.div(this.norm())},normalizeSelf:function(){return this.divSelf(this.norm())},clamp:function(e){return this.normSquared()>e*e?this.normalize().mul(e):this},clampSelf:function(e){return this.normSquared()>e*e?this.normalizeSelf().mulSelf(e):this},angle:function(e){return e?Math.acos(this.dot(e)/this.norm()/e.norm()):Math.atan2(this.y,this.x)},rotate:function(e){return this.clone().rotateSelf(e)},rotateSelf:function(e){return e?this.set(Math.cos(e)*this.x-Math.sin(e)*this.y,Math.sin(e)*this.x+Math.cos(e)*this.y):this},string:function(){return"( "+this.x+" | "+this.y+" )"},log:function(){console.log(this.string())},getData:function(){return{x:this.x,y:this.y}},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}};var Game=function(e,t){this.player=e,this.mouse=e.mouse,this.background=null,this.duration=5e3,this.graphics=[],this.gameObjects=[],this.behaviours=[],this.startActions=[],this.isWon=!1,this.isLost=!1};Game.prototype={init:function(){},reset:function(){this.isWon=!1,this.isLost=!1,this.gameObjects.forEachApply("reset"),this.behaviours.forEachApply("reset")},start:function(){this.startActions.forEachApply("execute",this)},update:function(e){this.behaviours.forEachApply("check",this),this.gameObjects.forEachApply("update",e)},draw:function(e){var t;this.background?e.drawImage(this.background,0,0):(e.fillStyle="#FFF",e.fillRect(0,0,640,390)),e.debug&&this.behaviours.forEachApply("draw",e),e.fillStyle="#AAA",e.strokeStyle="#AAA",this.gameObjects.forEachApply("draw",e),e.debug&&e.fillCircle(this.mouse._pos.x,this.mouse._pos.y,3)},getGameObjectWithID:function(e){for(var t=0;t<this.gameObjects.length;t++)if(this.gameObjects[t].ID===e)return this.gameObjects[t];return console.error("no gameObject with ID "+e),null},getGraphicWithID:function(e){for(var t=0;t<this.graphics.length;t++)if(this.graphics[t].ID===e)return this.graphics[t];return console.error("no graphic with ID "+e),null},getGameObjectAt:function(e){for(var t=this.gameObjects.length-1;t>=0;t--)if(this.gameObjects[t].getGraphicArea().contains(e))return this.gameObjects[t];return null}};var GameObject=function(e,t){this.ID=e,this.name=t,this.startGraphic=null,this.graphic=null,this.movement=new Movement,this.animation=new Animation,this.counter=0};GameObject.prototype={reset:function(){this.setGraphic(this.startGraphic),this.movement.reset(),this.graphic.reset(),this.counter=0},update:function(e){this.movement.update(e),this.animation.update(e)},draw:function(e){var t=this.movement.position,n;e.save(),e.translate(t.x,t.y),this.graphic.draw(e,this.animation.getFrame()),e.restore(),e.debug&&(this.movement.draw(e),n=this.movement.getArea(),e.fillText(this.counter,n.x+2,n.y+17))},setGraphic:function(e){this.graphic=e,this.movement.setGraphicSize(e.frameWidth,e.frameHeight),this.animation.setFrame(1)},setStartGraphic:function(e){this.startGraphic=e,this.setGraphic(e)},getArea:function(){return this.movement.getArea()},getGraphicArea:function(){return this.getArea();var e,t,n,r},getPosition:function(){return this.movement.position}};var Graphic=function(e){this.ID=e,this.image=null,this.frameWidth=0,this.frameHeight=0,this.frameCount=1,this.scaleX=1,this.scaleY=1,this.flipDirectionX=1,this.flipDirectionY=1};Graphic.prototype={draw:function(e,t){var n=this.frameWidth,r=this.frameHeight;e.save(),e.scale(this.scaleX*this.flipDirectionX,this.scaleY*this.flipDirectionY),e.drawImage(this.image,(t-1)*n,0,n,r,-0.5*n,-0.5*r,n,r),e.restore()},checkSize:function(){var e=this.image;(this.frameWidth*this.frameCount!==e.width||this.frameHeight!==e.height)&&console.error("graphic size and image size is not the same",this,e.width,e.height)},reset:function(){this.scaleX=this.scaleY=1,this.flipDirectionX=this.flipDirectionY=1}};var Mouse=function(e,t){this.canvas=t,this.player=e,this.clicked=!1,this.dragging=!1,this._pos=new Vector,this.pos=new Vector,this.move=new Vector,this.area=new Area(0,0,640,390)};Mouse.prototype={unbind:function(){$(this.canvas).unbind("mousedown"),$(this.canvas).unbind("mousemove"),$(this.canvas).unbind("mouseup"),$(this.canvas).unbind("mousedown")},handleClick:function(){this.unbind(),$(this.canvas).mousedown(bind(this,this.click))},handleDrag:function(){this.unbind(),$(this.canvas).mousedown(bind(this,this.mousedown)),$(this.canvas).mousemove(bind(this,this.mousemove)),$(this.canvas).mouseup(bind(this,this.mouseup))},click:function(e){this.setMouse(e,this._pos),this.area.contains(this._pos)&&(this.pos.copy(this._pos),this.clicked=!0,this.player.click(this)),e.stopPropagation()},mousedown:function(e){this.setMouse(e,this.pos),this._pos.copy(this.pos),this.dragging=!0,this.player.mousedown(this),e.stopPropagation()},mousemove:function(e){this.dragging&&(this._pos.copy(this.pos),this.setMouse(e,this.pos),this.move.copy(this.pos).subSelf(this._pos),this.player.mousemove(this)),e.stopPropagation()},mouseup:function(e){this.setMouse(e,this.pos),this.dragging=!1,this.player.mouseup(this),e.stopPropagation()},setMouse:function(e,t){var n=$(this.canvas).offset(),r=this.player.increment;t.set(e.pageX-n.left,e.pageY-n.top),t.mulSelf(this.player.scale),t.x-=r.x+1,t.y-=r.y+1}};var Movement=function(){this.position=new Vector,this.startPosition=new Vector,this.area=new Area,this.boundingArea=null,this.target,this.direction,this.offset=new Vector,this.roamArea,this.roamMode,this.bounceStart,this.time,this.speed,this.path=[],this.pathCounter=0,this.pathMode=null,this.pathDirection=null};Movement.prototype={speeds:[.125,.375,1,2.5,6.25],reset:function(){this.position.copy(this.startPosition),this.stop()},setPosition:function(e){this.stop(),this.position.copy(e)},movePosition:function(e){this.stop(),this.position.copy(this.startPosition.addSelf(e))},setTarget:function(e,t,n){this.stop(),this.target=e,this.offset.copy(t),this.setSpeed(n)},setDirection:function(e,t){this.stop(),this.direction=e,this.setSpeed(t)},setSpeed:function(e){this.speed=this.speeds[e]},getArea:function(){var e=this.position;return this.boundingArea?this.area.copy(this.boundingArea).addSelf(e):this.area.setCenter(e.x,e.y)},setGraphicSize:function(e,t){this.boundingArea||this.area.setSize(e,t)},roam:function(e,t,n){var r=this.getArea(),i,s,o=this.boundingArea,u,a,f,l,c=9.81;if(e===this.roamMode&&t===this.roamArea&&this.speed===this.speeds[n])return;this.stop(),this.roamMode=e,this.roamArea=t,this.setSpeed(n),i=r.width||2*r.radius,s=r.height||2*r.radius,t.width<i&&(u=i-t.width+10,t.width+=u,t.x-=u*.5),t.height<s&&(u=s-t.height+10,t.height+=u,t.y-=u*.5),r.leavesArea(t)&&this.insertObject(t),e==="wiggle"||e==="insect"?this.direction=Math.random()*Math.PI*2:e==="reflect"?this.direction=Math.PI*(.25+.5*(Math.floor(Math.random()*100)%4)):e==="bounce"&&(r=this.getArea(),f=t.height-s,l=f-r.y,a=Math.sqrt(2*f*c),o?(l+=o.radius||0,this.bounceStart=t.y+t.height-(o.radius||o.height)-o.y):this.bounceStart=t.y+t.height-s*.5,this.direction=new Vector(this.speed*randSign(),a),this.time=(a-Math.sqrt(a*a-2*l*c))/c*100)},jump:function(e){if(e===this.roamArea)return;this.stop(),this.roamArea=e,this.insertObject(e)},followPath:function(e,t,n){if(e===this.path&&t===this.pathMode&&this.speed===this.speeds[n])return;this.stop(),e.length>1&&(e[0]=this.position.clone(),this.target=e[1],this.path=e,this.pathMode=t,this.setSpeed(n),this.pathCounter=1)},stop:function(){this.target=null,this.direction=null,this.roamMode=null,this.roamArea=null,this.pathCounter=0,this.pathMode=null,this.pathDirection=null,this.offset.set(0,0)},update:function(e){var t=this.speed*.08*e;this.target?this.updateTarget(t):this.roamMode==="bounce"?(this.time+=e,this.updateBounce(this.time*.001)):this.direction!==null&&this.updateDirection(t)},updateTarget:function(e){var t=this.vector,n=this.target,r=this.position;t.copy(n).addSelf(this.offset).subSelf(r),t.norm()<e?(r.copy(n).addSelf(this.offset),this.pathMode?this.updatePath():this.target=null):(t.normalizeSelf().mulSelf(e),r.addSelf(t))},updatePath:function(){var e=this.path.length-1,t=this.pathMode,n=this.pathCounter;if(t==="circular")n===e?n=0:n++;else if(t==="ping-pong")n===e?this.pathDirection="backward":n===0&&(this.pathDirection="forward"),n+=this.pathDirection==="backward"?-1:1;else if(t==="once"){if(n===e){this.stop();return}n++}this.target=this.path[n],this.pathCounter=n},updateDirection:function(e){var t=this.vector,n=this.roamMode,r;t.set(e,0).rotateSelf(this.direction),this.position.addSelf(t),n&&(n==="wiggle"?this.direction+=(Math.random()*.2-.1)*Math.PI:n==="insect"&&(this.direction=Math.random()*Math.PI*2),r=this.getArea().leavesArea(this.roamArea),r&&(this.position.subSelf(t),this.reflectDirection(r)))},updateBounce:function(e){var t;e*=10*this.speed,this.position.x+=this.direction.x,this.position.y=this.bounceStart-this.direction.y*e+4.905*e*e,t=this.getArea().leavesArea(this.roamArea),t&&(t==="x"||t==="width"?(this.direction.x*=-1,this.position.x+=this.direction.x):(this.time=0,this.position.y=this.bounceStart))},reflectDirection:function(e){var t=this.vector.set(1,0).rotateSelf(this.direction);e==="x"||e==="width"?t.x*=-1:t.y*=-1,this.direction=t.angle()},insertObject:function(e){var t=this.getArea(),n=this.boundingArea,r=this.position;r.set(e.x+Math.random()*(e.width-(t.width||2*t.radius)),e.y+Math.random()*(e.height-(t.height||2*t.radius))),n?(r.subSelf(n),n.radius&&(r.x+=n.radius,r.y+=n.radius)):(r.x+=t.width*.5,r.y+=t.height*.5)},draw:function(e){this.getArea().draw(e),this.target?(this.pathMode&&(new Path(this.path)).draw(e,.5),e.save(),e.fillStyle=e.strokeStyle="red",e.drawArrow(this.position.x,this.position.y,this.target.x+this.offset.x,this.target.y+this.offset.y,.7),e.restore()):this.roamMode?this.roamArea.draw(e):this.direction&&(e.save(),e.translate(this.position.x,this.position.y),e.rotate(this.direction),e.drawArrow(0,0,70,0,.5),e.restore())},vector:new Vector};var Loader=function(e,t,n){this.callback=e,this.imageCount=0,this.imagesLoaded=0,this.corsSave=n,this.animated=t,this.loadCircle=0,this.c=0,this.finishedLoading=!1};Loader.prototype={loadImage:function(e,t){if(!e)return;if(this.imageCount>=100){console.error("Loader does not load more than 100 images");return}var n=new Image,r=this;n.onload=function(){r.c++,t(),r.imageLoaded()};var i=document.location.hostname==="localhost"?!0:!1;return this.corsSave&&(e=i?e:"/s3?url="+e),n.src=e,this.imageCount++,n},imageLoaded:function(){this.imagesLoaded++,this.animated||this.checkRemaining()},checkRemaining:function(){this.imageCount===this.imagesLoaded&&(this.callback(),this.finishedLoading=!0)},draw:function(e){var t=this.imagesLoaded/this.imageCount+.02,n=this.loadCircle;n+=(t-n)*.1;if(t-n<.02){n=t,t===1.02&&this.checkRemaining();return}e.fillStyle="white",e.fillRect(0,0,640,390),e.save(),e.translate(320.5,160.5),e.lineWidth=5,e.strokeStyle="#C3C3C3",e.beginPath(),e.arc(0,0,30,0,TAU,!0),e.stroke(),e.strokeStyle="#CD5654",e.lineWidth=7,e.beginPath(),e.arc(0,0,30,-0.25*TAU,(-0.25+n)*TAU,!1),e.stroke(),e.restore(),this.loadCircle=n},finishedLoading:function(){}};var Parser={game:null,loader:null,actionIDs:{moveInDirection:function(e,t){var n=new MoveAction("moveIn",t,e.speed);return n.direction=e.angle,n},moveInRandom:function(e,t){var n=new MoveAction("moveIn",t,e.speed);return n.random=!0,n},moveInLocation:function(e,t){var n=new MoveAction("moveIn",t,e.speed);return n.target=(new Vector).copy(e.location),n},moveInObject:function(e,t,n){var r=new MoveAction("moveIn",t,e.speed);return r.target=n.getGameObjectWithID(e.objectID).movement.position,r},moveToLocation:function(e,t){var n=new MoveAction("moveTo",t,e.speed);return n.target=(new Vector).copy(e.location),n},moveAlongPath:function(e,t,n){var r=new MoveAction("moveAlongPath",t,e.speed);return r.path=e.path,r.mode=e.mode,r},moveToObject:function(e,t,n){var r=new MoveAction("moveTo",t,e.speed);return r.target=n.getGameObjectWithID(e.objectID).movement.position,r.offset=(new Vector).copy(e.offset),r},jumpToLocation:function(e,t){var n=new MoveAction("jumpTo",t);return n.target=(new Vector).copy(e.location),n},jumpToObject:function(e,t,n){var r=new MoveAction("jumpTo",t);return r.target=n.getGameObjectWithID(e.objectID).movement.position,r.offset=(new Vector).copy(e.offset),r},jumpToArea:function(e,t){var n=new MoveAction("jumpTo",t);return n.area=(new Area).copy(e.area),n},moveRoam:function(e,t){return new RoamAction(t,e.mode,(new Area).copy(e.area),e.speed)},moveSwap:function(e,t,n){return new SwapAction(t,n.getGameObjectWithID(e.objectID))},moveStop:function(e,t){return new StopAction(t)},scaleSize:function(e,t){return new ScaleAction(e,t)},flipObject:function(e,t){return new FlipAction(e,t)},artToFrame:function(e,t){return new ArtAction("frame",t,e.frame)},artPlay:function(e,t){return new ArtAction("play",t,e.frame,e.frame2,e.mode,e.speed)},artStop:function(e,t){return new ArtAction("stop",t)},artChange:function(e,t,n){var r=new ArtAction("change",t);return r.graphic=n.getGraphicWithID(e.graphicID),r},gameWin:function(){return WinAction},gameLose:function(){return LoseAction},gameEnd:function(){return LoseAction},counterSet:function(e,t,n){return action=new CounterAction("set",e.counter,t)},counterUp:function(e,t){return action=new CounterAction("up",e,t)},counterDown:function(e,t){return action=new CounterAction("down",e,t)}},triggerIDs:{clickSelf:function(e,t){return new ClickTrigger(t)},clickObject:function(e,t,n){return new ClickTrigger(n.getGameObjectWithID(e.objectID))},clickArea:function(e){return new ClickTrigger(null,(new Area).copy(e.area))},touchObject:function(e,t,n){return n.version<3?new ContactTrigger("touch",t,n.getGameObjectWithID(e.objectID)):new ContactTrigger("touch",n.getGameObjectWithID(e.objectID),n.getGameObjectWithID(e.object2ID))},touchArea:function(e,t,n){return n.version<3?new ContactTrigger("touch",t,null,(new Area).copy(e.area)):new ContactTrigger("touch",n.getGameObjectWithID(e.objectID),null,(new Area).copy(e.area))},overlapObject:function(e,t,n){return n.version<3?new ContactTrigger("overlap",t,n.getGameObjectWithID(e.objectID)):new ContactTrigger("overlap",n.getGameObjectWithID(e.objectID),n.getGameObjectWithID(e.object2ID))},overlapArea:function(e,t,n){return n.version<3?new ContactTrigger("overlap",t,null,(new Area).copy(e.area)):new ContactTrigger("overlap",n.getGameObjectWithID(e.objectID),null,(new Area).copy(e.area))},timeExact:function(e){return new TimeTrigger(e.time)},timeRandom:function(e){return new TimeTrigger(e.time,e.time2)},counterEqualsObject:function(e,t,n){return n.version<4?new CounterTrigger("equal",t,null,n.getGameObjectWithID(e.objectID)):new CounterTrigger("equal",n.getGameObjectWithID(e.objectID),null,n.getGameObjectWithID(e.object2ID))},counterGreaterObject:function(e,t,n){return n.version<4?new CounterTrigger("greater",t,null,n.getGameObjectWithID(e.objectID)):new CounterTrigger("greater",n.getGameObjectWithID(e.objectID),null,n.getGameObjectWithID(e.object2ID))},counterSmallerObject:function(e,t,n){return n.version<4?new CounterTrigger("smaller",t,null,n.getGameObjectWithID(e.objectID)):new CounterTrigger("smaller",n.getGameObjectWithID(e.objectID),null,n.getGameObjectWithID(e.object2ID))},counterEqualsNumber:function(e,t,n){return n.version<4?new CounterTrigger("equal",t,e.counter,null):new CounterTrigger("equal",n.getGameObjectWithID(e.objectID),e.counter,null)},counterGreaterNumber:function(e,t,n){return n.version<4?new CounterTrigger("greater",t,e.counter,null):new CounterTrigger("greater",n.getGameObjectWithID(e.objectID),e.counter,null)},counterSmallerNumber:function(e,t,n){return n.version<4?new CounterTrigger("smaller",t,e.counter,null):new CounterTrigger("smaller",n.getGameObjectWithID(e.objectID),e.counter,null)},gameIsWon:function(){return new EndTrigger("isWon")},gameWasWon:function(){return WonTrigger},gameIsLost:function(){return new EndTrigger("isLost")},gameWasLost:function(){return LostTrigger},gameStart:function(){return"start"}},parseData:function(e,t,n){var r=e.graphics,i=e.gameObjects,s,o,u,a;this.game=t,t.version=e.version,t.duration=(e.duration||5)*1e3;if(r&&r.length>0)for(u=0;u<r.length;u++){var f=this.parseGraphic(r[u],n);t
.graphics.push(f)}if(i&&i.length>0){for(u=0;u<i.length;u++)o=this.parseGameObject(i[u]),t.gameObjects.push(o);for(u=0;u<i.length;u++){s=i[u].behaviours,o=t.gameObjects[u];if(s&&s.length>0)for(a=0;a<s.length;a++){var l=this.parseBehaviour(s[a],o);l&&this.game.behaviours.push(l)}}}e.backgroundID&&(t.background=t.getGraphicWithID(e.backgroundID).image),n.checkRemaining()},parseGraphic:function(e,t){var n=new Graphic(e.ID);return n.frameWidth=e.frameWidth,n.frameHeight=e.frameHeight,n.frameCount=e.frameCount||1,n.image=t.loadImage(e.url,function(){n.checkSize()}),n},parseGameObject:function(e){var t=new GameObject(e.ID,e.name);return t.movement.startPosition.copy(e.position),t.setStartGraphic(this.game.getGraphicWithID(e.graphicID)),e.boundingArea&&(e.boundingArea.width?t.movement.boundingArea=(new Area).copy(e.boundingArea):e.boundingArea.radius&&(t.movement.boundingArea=(new Circle).copy(e.boundingArea),t.movement.area=new Circle)),t},parseBehaviour:function(e,t){var n=new Behaviour,r=e.actions,i=e.triggers,s=this.game,o,u,a;if(!(r&&r.length>0))return console.error("parser: behaviour has no actions"),null;for(a=0;a<r.length;a++)o=this.parseAction(r[a],t,s),o&&n.actions.push(o);if(!(i&&i.length>0))return console.error("parser: behaviour has no triggers"),null;for(a=0;a<i.length;a++){u=this.parseTrigger(i[a],t,s);if(u==="start")return s.startActions=s.startActions.concat(n.actions),null;u&&n.triggers.push(u)}return n},parseAction:function(e,t,n){var r=this.actionIDs[e.ID];return r?r(e,t,n):(console.error("parser: no action with ID: "+e.ID),null)},parseTrigger:function(e,t,n){var r=this.triggerIDs[e.ID];return r?r(e,t,n):(console.error("parser: no trigger with ID: "+e.ID),null)}},StateMachine=function(e){this.scope=e,this.currentState=new this.State,this.states={},this.transitions={}};StateMachine.prototype={State:function(e){e=e||{},this.name=e.name||"none",this.enter=e.enter||function(e){},this.update=e.update||function(e,t){},this.draw=e.draw||function(e,t){},this.exit=e.exit||function(e){}},Transition:function(e){e=e||{},this.name=e.name||"none",this.from=e.from||"none",this.to=e.to||"none",this.callback=e.callback||function(e){}},init:function(e){var t,n=e.states instanceof Array?e.states:[];transitions=e.transitions instanceof Array?e.transitions:[];for(t=0;t<n.length;t++)this.addState(new this.State(n[t]));for(t=0;t<transitions.length;t++)this.addTransition(new this.Transition(transitions[t]));this.states[e.initial]&&this.changeState(e.initial)},update:function(e){this.currentState.update.call(this.scope,e,this)},draw:function(e){this.currentState.draw.call(this.scope,e,this)},addState:function(e){this.states[e.name]=e},addTransition:function(e){var t=this;this.transitions[e.name]=e,this[e.name]=function(){return t.currentState.name===e.to||t.currentState.name!==e.from&&e.from!=="*"?!1:(t.changeState(e.to,e.callback),!0)}},changeState:function(e,t){var n=[];this.currentState.exit.call(this.scope),this.currentState=this.states[e],t&&t.call(this.scope),this.currentState.enter.call(this.scope,this)},hasState:function(e){return this.currentState.name===e}};var Player=function(){this.ID=Player.count++,this.ctx=null,this.canvas=null,this.timelineCanvas=null,this.timelineCtx=null,this.node=null,this.game=null,this.loader=null,this.mouse=null,this.fsm=new StateMachine(this),this.fsm.init({initial:"init",states:[{name:"init"},{name:"load",enter:this.enterLoad,draw:this.drawLoad,exit:this.exitLoad},{name:"ready",enter:this.enterReady,exit:this.exitReady},{name:"play",enter:this.enterPlay,draw:this.draw,update:this.update,exit:this.exitPlay},{name:"end",draw:this.draw,update:this.update},{name:"error",enter:this.enterError}],transitions:[{name:"parse",from:"*",to:"load"},{name:"loaded",from:"load",to:"ready",callback:this.onReady},{name:"start",from:"ready",to:"play",callback:this.onStart},{name:"end",from:"play",to:"end",callback:this.onEnd},{name:"restart",from:"end",to:"ready"},{name:"error",from:"*",to:"error"}]}),this.time=0,this.timePlayed=0,this.restTime=0,this.terminate=!1};Player.prototype={increment:{x:0,y:0},scale:1,loadAnimated:!0,endDelay:1e3,init:function(e){function o(e){$(".titleBar").css("top")!==e+"px"&&s.fsm.hasState("ready")&&$(".titleBar").animate({top:e},500)}var t=$("#playerCanvas",e)[0],n=t.getContext("2d"),r=$(".playerTimeline",e)[0],i=this.increment,s=this;e.disableSelection(),t.width=640+2*i.x,t.height=390+2*i.y,n.save(),n.translate(i.x,i.y),n.font="20px sans-serif",this.ctx=n,this.canvas=t,n.player=this,this.mouse=new Mouse(this,t),n.debug=!1,$(".playButton",e).click(function(e){s.fsm.start(),e.stopPropagation()}),$(".playerUI",e).click(function(){s.fsm.restart()}),$("#player").addTouch(),$(".titleBar",e).hover(function(){o(220)},function(){o(330)}),this.node=e,r&&(r.width=$(".playerTimeline",e).width(),r.height=$(".playerTimeline",e).height(),this.timelineCanvas=r,this.timelineCtx=r.getContext("2d"))},startRunloop:function(){function t(){if(e.terminate)return;e.run(),requestAnimationFrame(t)}var e=this;t()},run:function(){var e,t=Date.now();e=t-this.time,e=e>100?100:e,this.time=t,this.fsm.update(e),this.fsm.draw(this.ctx),this.mouse.clicked=!1,Player.updates[this.ID]=this.time},reset:function(){this.timePlayed=0,this.restTime=0,this.mouse.clicked=!1},parse:function(e,t,n){var r=this;this.fsm.parse(),this.game=new Game(this,this.mouse),this.loader=new Loader(function(){r.fsm.loaded(),t&&t()},this.loadAnimated,n);try{Parser.parseData(e,this.game,this.loader)}catch(i){console.log(i,i.message,i.stack),this.fsm.error()}},update:function(e){this.fsm.hasState("play")&&(this.timePlayed+=e),this.game.update(e),this.fsm.hasState("play")&&this.timePlayed>this.game.duration&&LoseAction.execute(this.game)},draw:function(e){var t;this.game.draw(e),this.timePlayed&&(this.drawTimeline(this.timelineCtx),t=Math.ceil((this.game.duration-this.timePlayed)/1e3),this.restTime!==t&&(this.showTime(t),this.restTime=t))},drawTimeline:function(e){e.fillStyle=this.game.isWon?"#70B477":this.game.isLost?"#CD5654":"#999",e.fillRect(0,0,Math.floor(this.timePlayed/this.game.duration*this.timelineCanvas.width),this.timelineCanvas.height)},drawLoad:function(e){this.loader.draw(e)},click:function(){},enterLoad:function(){$(".playerUI",this.node).show(),$(".loadScreen",this.node).show()},exitLoad:function(){$(".loadScreen",this.node).hide(),this.showTime(this.game.duration/1e3)},enterReady:function(){var e=this.node;$(".titleScreen",e).show(),$(".endScreen",e).fadeOut(200),$(".endBg",e).animate({width:65,left:288},200,function(){$(".endBg",e).animate({opacity:0},500),$(".playButton",e).fadeIn(300),$(".titleBar",e).animate({top:330},500)})},exitReady:function(){var e=this.node;$(".playButton",e).fadeOut(200),$(".titleBar",e).animate({top:390},200,function(){$(".playerUI",e).hide(),$(".titleScreen",e).hide(),$(".titleBar",e).css({top:390})})},onReady:function(){this.reset(),this.game.reset(),this.draw(this.ctx)},onStart:function(){this.reset(),this.game.reset(),this.game.start()},enterPlay:function(){this.timelineCanvas.width=this.timelineCanvas.width,this.showTime(this.game.duration/1e3),this.mouse.handleClick()},exitPlay:function(){this.mouse.unbind()},onEnd:function(){var e=this,t;$(".playerUI",this.node).show(),this.game.isWon?(t=".winScreen",this.onWin()):(t=".loseScreen",this.onLose()),$(t,this.node).fadeIn(300),$(".endBg",this.node).css({width:640,left:0}),$(".endBg",this.node).animate({opacity:.8},300),this.draw(this.ctx),setTimeout(function(){e.fsm.restart()},1500)},enterError:function(){$(".titleScreen",this.node).hide(),$(".startScreen",this.node).hide(),$(".endScreen",this.node).hide(),$(".endBg",this.node).hide(),$(".errorScreen",this.node).show(),this.ctx.fillStyle="white",this.ctx.fillRect(0,0,640,390),this.showTime(0)},showTime:function(e){$(".playerTime",this.node).html(timeString(e))},debug:function(){this.ctx.debug=!this.ctx.debug,this.redraw=!0},onWin:function(){},onLose:function(){}},Player.count=0,Player.updates=[],extend(CanvasRenderingContext2D.prototype,{drawLine:function(e,t,n,r){this.beginPath(),this.moveTo(e,t),this.lineTo(n,r),this.stroke()},fillCircle:function(e,t,n){this.beginPath(),this.arc(e,t,n,0,Math.PI*2,!0),this.fill()},strokeCircle:function(e,t,n){this.beginPath(),this.arc(e,t,n,0,Math.PI*2,!0),this.stroke()},dashedTo:function(e,t,n,r,i){var s=n-e,o=r-t,u=Math.sqrt(s*s+o*o),a=i*s/u,f=i*o/u,l=a,c=f,h=!0;this.moveTo(e,t);while(Math.abs(s)>Math.abs(l)||Math.abs(o)>Math.abs(c))h?this.lineTo(e+l,t+c):this.moveTo(e+l,t+c),h=!h,l+=a,c+=f;this.lineTo(n,r)},dashedLine:function(e,t,n,r,i){this.beginPath(),this.dashedTo(e,t,n,r,i),this.stroke()},dashedRect:function(e,t,n,r,i){this.beginPath(),this.dashedTo(e,t,e+n,t,i),this.dashedTo(e+n,t,e+n,t+r,i),this.dashedTo(e+n,t+r,e,t+r,i),this.dashedTo(e,t+r,e,t,i),this.stroke()},drawArrow:function(e,t,n,r,i){i=i||1,this.drawLine(e,t,n,r),this.save(),this.translate(n,r),this.rotate((new Vector(n-e,r-t)).angle()),this.scale(i,i),this.beginPath(),this.moveTo(-20,0),this.lineTo(-25,-12),this.lineTo(1,0),this.lineTo(-25,12),this.closePath(),this.fill(),this.restore()},putImageDataOverlap:function(e,t,n){var r,i,s,o,u,a=e.data,f=e.width,l=e.height;this.save(),this.translate(t,n);for(r=0;r<l;r++){s=0,o=r*f*4;for(i=0;i<f;i++){u=(r*f+i)*4;if(a[o]!==a[u]||a[o+1]!==a[u+1]||a[o+2]!==a[u+2]||a[o+3]!==a[u+3])this.fillStyle="rgba("+a[o]+","+a[o+1]+","+a[o+2]+","+a[o+3]/255+")",this.fillRect(s,r,i-s,1),s=i,o=(r*f+s)*4}this.fillStyle="rgba("+a[o]+","+a[o+1]+","+a[o+2]+","+a[o+3]/255+")",this.fillRect(s,r,f-s,1)}this.restore()},cloneImageData:function(e){var t=this.createImageData(e),n;for(n=0;n<e.data.length;n++)t.data[n]=e.data[n];return t}}),Array.prototype.forEachApply=function(e,t){this.forEach(function(n){n[e].call(n,t)})},Array.prototype.clone=function(){return this.concat()},Array.max=function(e){return Math.max.apply(Math,e)},Array.min=function(e){return Math.min.apply(Math,e)};var Stage=function(){Player.call(this),this.selectObject=null,this.selectedObjectCallback=function(){},this.fsm=new StateMachine(this),this.fsm.init({initial:"init",states:[{name:"init"},{name:"load"},{name:"ready",enter:this.enterReady,draw:this.drawReady},{name:"play",enter:this.enterPlay,draw:this.draw,update:this.update},{name:"end",draw:this.draw,update:this.update},{name:"fin"}],transitions:[{name:"parse",from:"*",to:"load"},{name:"loaded",from:"load",to:"ready"},{name:"start",from:"*",to:"play",callback:this.reset},{name:"end",from:"play",to:"end",callback:this.onEnd},{name:"finish",from:"end",to:"fin"},{name:"reset",from:"*",to:"ready"}]})};Stage.prototype=new Player,Stage.prototype.constructor=Player,extend(Stage.prototype,{increment:{x:150,y:60},loadAnimated:!1,init:function(e){Player.prototype.init.call(this,e),this.mouse.handleDrag(),this.ctx.lineWidth=2},reset:function(){var e=this.timelineCtx;Player.prototype.reset.call(this),this.timelineCanvas.width=this.timelineCanvas.width,e.fillStyle="#C3C3C3",e.fillRect(0,6,this.timelineCanvas.width,8),this.selectObject=null,this.redraw=!0},drawReady:function(e){var t=this.increment;if(this.mouse.dragging||this.redraw)e.clearRect(-t.x,-t.y,640+2*t.x,390+2*t.y),this.game.draw(e),this.selectObject&&(this.selectObject.draw(e),e.strokeStyle="#000",this.selectObject.getGraphicArea().draw(e)),this.redraw=!1},draw:function(e){this.game.draw(e),e=this.timelineCtx,e.save(),e.translate(0,6),this.drawTimeline(e),e.restore()},enterReady:function(){var e=this.ctx;e.clipOn&&(e.clipOn=!1,e.restore()),this.reset(),this.game.reset(),this.mouse.handleDrag(),this.redraw=!0},enterPlay:function(){var e=this.ctx,t=this.increment;this.mouse.handleClick(),this.reset(),this.game.reset(),this.game.start(),e.clipOn||(e.fillStyle="#424755",e.fillRect(-t.x,-t.y,640+2*t.x,390+2*t.y),e.save(),e.beginPath(),e.rect(0,0,640,390),e.clip(),e.clipOn=!0)},onEnd:function(){var e=this;this.draw(this.ctx),setTimeout(function(){e.fsm.finish()},this.endDelay)},click:function(){(this.fsm.hasState("end")||this.fsm.hasState("fin"))&&this.fsm.reset()},mousedown:function(e){var t=this.selectObject;if(!t||!t.getGraphicArea().contains(e.pos))t=this.game.getGameObjectAt(e.pos);this.selectedObjectCallback(t?t.ID:0),this.selectObject=t},mousemove:function(e){var t=this.selectObject;t&&t.movement.movePosition(e.move)},mouseup:function(){var e=this.selectObject;e&&this.selectedObjectCallback(e.ID,e.getPosition())}});var ClickTrigger=function(e,t){this.gameObject=e,this.area=t};ClickTrigger.prototype={check:function(e){return e.mouse.clicked?this.gameObject?this.gameObject.getArea().contains(e.mouse.pos):this.area.contains(e.mouse.pos):!1},draw:function(e){this.area&&(e.strokeStyle="#F84",this.area.draw(e))},reset:function(){}};var ContactTrigger=function(e,t,n,r){this.gameObject=t,this.gameObject2=n,this.area=r,triggered=!1,e==="touch"?this.check=this.checkTouch:e==="overlap"&&(this.check=this.checkOverlap)};ContactTrigger.prototype={check:null,checkTouch:function(){var e=this.checkOverlap();if(this.triggered&&!e)this.triggered=!1;else if(!this.triggered&&e)return this.triggered=!0;return!1},checkOverlap:function(){return this.area?this.gameObject.getArea().overlaps(this.area):this.gameObject.getArea().overlaps(this.gameObject2.getArea())},reset:function(){this.triggered=!1},draw:function(e){this.area&&(e.strokeStyle="#F77",this.area.draw(e))}};var TimeTrigger=function(e,t){this.time=e,this.time2=t,this.reset()};TimeTrigger.prototype={check:function(e){var t=e.player.timePlayed/e.duration*100,n=this.time2?this.randTime:this.time;return!this.triggered&&t>=n?this.triggered=!0:!1},reset:function(){this.triggered=!1,this.time2&&(this.randTime=this.time+Math.random()*(this.time2-this.time))},draw:function(e){var t=this.randTime||this.time,n=e.player.timelineCanvas.width,e=e.player.timelineCtx;e.fillStyle=this.triggered?"#AAA":"#333",this.randTime&&(e.fillRect(Math.floor(n*this.time*.01)-1,0,2,16),e.fillRect(Math.floor(n*this.time2*.01)-1,0,2,16)),e.fillRect(Math.floor(n*t*.01)-1,0,3,16)}};var EndTrigger=function(e){this.triggered=!1,this.check=function(t){return t[e]&&!this.triggered?this.triggered=!0:!1},this.reset=function(){this.triggered=!1},this.draw=function(){}},WonTrigger={check:function(e){return e.isWon},reset:function(){},draw:function(){}},LostTrigger={check:function(e){return e.isLost},reset:function(){},draw:function(){}},CounterTrigger=function(e,t,n,r){this.gameObject=t,this.gameObject2=r||{counter:n},this.triggered=!1,this.compareFunction=this[e];if(!this[e])throw"Counter type is unknown: "+e};CounterTrigger.prototype={check:function(){return this.compareFunction(this.gameObject.counter,this.gameObject2.counter)?this.triggered=!0:!1},compareFunction:null,equal:function(e,t){return e===t},greater:function(e,t){return e>t},smaller:function(e,t){return e<t},reset:function(){this.triggered=!1},draw:function(e){}};var Area=function(e,t,n,r){return this.set(e||0,t||0,n||0,r||0)};Area.prototype=new Vector,Area.prototype.constructor=Vector,extend(Area.prototype,{set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},setPosition:function(e,t){return this.x=e,this.y=t,this},setCenter:function(e,t){return this.x=e-this.width*.5,this.y=t-this.height*.5,this},setSize:function(e,t){return this.width=e,this.height=t,this},copy:function(e){return this.set(e.x,e.y,e.width,e.height)},clone:function(){return new Area(this.x,this.y,this.width,this.height)},center:function(){return new Vector(this.x+this.width/2,this.y+this.height/2)},contains:function(e){return e.x>=this.x&&e.x<=this.x+this.width&&e.y>=this.y&&e.y<=this.y+this.height},overlaps:function(e){return e instanceof Area?this.overlapsArea(e):e.overlapsArea(this)},overlapsArea:function(e){return this.x+this.width>e.x&&this.y+this.height>e.y&&this.x<e.x+e.width&&this.y<e.y+e.height},draw:function(e){e.strokeRect(this.x,this.y,this.width,this.height)},move:function(e){return this.addSelf(e)},resize:function(e){return this.width=e.x-this.x,this.height=e.y-this.y,this},rasterize:function(e){return this.x=Math.floor(this.x/e)*e,this.y=Math.floor(this.y/e)*e,this.width=Math.floor(this.width/e)*e,this.height=Math.floor(this.height/e)*e,this},leavesArea:function(e){return e.contains(this)?e.contains({x:this.x+this.width,y:this.y+this.height})?!1:this.x+this.width>e.x+e.width?"width":"height":this.x<e.x?"x":"y"},adjust:function(){return this.width<0&&(this.x-=this.width*=-1),this.height<0&&(this.y-=this.height*=-1),this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},string:function(){return"( "+this.x+" | "+this.y+" | "+this.width+" | "+this.height+" )"},getData:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}});var Circle=function(e,t,n){this.set(e||0,t||0,n||0)};Circle.prototype=new Vector,Circle.prototype.constructor=Vector,extend(Circle.prototype,{set:function(e,t,n){return this.x=e,this.y=t,this.radius=n,this},setPosition:function(e,t){return this.x=e,this.y=t,this},setRadius:function(e){return this.radius=e,this},copy:function(e){return this.set(e.x,e.y,e.radius)},clone:function(){return new Circle(this.x,this.y,this.radius)},contains:function(e){return this.sub(e).norm()<=this.radius},overlaps:function(e){return e instanceof Circle?this.overlapsCircle(e):this.overlapsArea(e)},overlapsCircle:function(e){return this.sub(e).norm()<=this.radius+e.radius},overlapsArea:function(e){var t=e.center().subSelf(this);return t.x=Math.abs(t.x)-e.width*.5,t.y=Math.abs(t.y)-e.height*.5,t.x>this.radius||t.y>this.radius?!1:t.x<=0||t.y<=0?!0:t.normSquared()<this.radius*this.radius},draw:function(e){e.strokeCircle(this.x,this.y,this.radius)},move:function(e){return this.addSelf(e)},resize:function(e){return this.radius=this.sub(e).norm(),this},leavesArea:function(e){var t=e.center();return e.contains({x:this.x-this.radius,y:this.y-this.radius})?e.contains({x:this.x+this.radius,y:this.y+this.radius})?!1:this.x+this.radius>e.x+e.width?"width":"height":this.x-this.radius<e.x?"x":"y"},adjust:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.radius=Math.floor(this.radius)},string:function(){return"( "+this.x+" | "+this.y+" | "+this.radius+" )"},getData:function(){return{x:this.x,y:this.y,radius:this.radius}}});var Feedback={wrapper:null,textarea:null,subject:null,init:function(){Feedback.wrapper=$("#feedback"),$(".showFeedback").click(function(){Feedback.show()}),$(".closeFeedback").click(function(){Feedback.close()}),Feedback.textarea=Feedback.wrapper.find("#body"),Feedback.subject=Feedback.wrapper.find("#subject"),Feedback.errorWrapper=Feedback.wrapper.find("#feedbackErrorMessage")},show:function(){Feedback.clear();if(Feedback.wrapper.is(":visible"))Feedback.close();else{var e=$(document).width()/2-Feedback.wrapper.width()/2,t=200;Feedback.wrapper.css({left:e,top:t}).fadeIn(300),Feedback.subject.focus()}},clear:function(){Feedback.subject.val(""),Feedback.textarea.val(""),Feedback.textarea.removeClass("errorForm")},afterSent:function(e){e==="success"?(Feedback.close(),Notifier.add("Support message has been sent! Thank you!","success").notify()):Feedback.showError()},showError:function(){Feedback.errorWrapper.show()},close:function(e){var e=e||0;Feedback.wrapper.hide(e)}},FramePlayer={frame:null,current_frame_display:null,index:0,width:64,totalFrames:1,duration:1e3,playInterval:null,init:function(){var e=this;$(".frame_graphic").live("mouseover",function(){e.initPlay($(this).find(".frame_graphic_element"),$(this).parent().parent().find(".graphicDetails").find(".frame_display").find(".frame_number"))}).live("mouseout",function(){e.stop()})},initPlay:function(e,t){this.frame&&this.stop(),this.frame=e,this.totalFrames=parseInt(e.attr("data-frames")),this.totalFrames>1&&(this.current_frame_display=t,e.css({"background-position":"0px 0"}),this.index=1,this.width=e.width(),this.playInterval=setInterval(bind(this,this.play),this.duration),this.play())},play:function(){if(!this.frame)return stop();this.frame.css({"background-position":-(this.width*this.index)+"px 0"}),this.index++,this.current_frame_display.html(this.index+" frames"),this.index===this.totalFrames&&(this.index=0)},stop:function(){clearInterval(this.playInterval),this.frame&&(this.frame.css({"background-position":"0px 0"}),this.frame=null,this.current_frame_display&&(this.current_frame_display.html(this.totalFrames+" frames"),this.current_frame_display=null))}},Notification=function(e,t){this.msg=e,this.type=t},Notifier={queue:[],FADE_OUT_TIME:6e3,wrapper:null,init:function(){return Notifier.wrapper=$("#flash-messages"),Notifier.list=Notifier.wrapper.find("ul"),Notifier.templateLi=Notifier.list.find("#flash-template"),Notifier.wrapper.find(".closeFlash").live("click",function(){$(this).parent().hide()}),Notifier.loadingOverlay=$(".loadOverlay"),Notifier},add:function(e,t){if(!e)return!1;var n=t||"info";return console.log(e,t),Notifier.queue.push(new Notification(e,t)),Notifier},notify:function(){if(!Notifier.queue.length)return!1;for(var e=0;e<Notifier.queue.length;e++)Notifier.append(Notifier.queue.pop());return Notifier.FADE_OUT_TIME>0&&setTimeout(function(){Notifier.list.find(".alert-success").fadeOut(1e3)},Notifier.FADE_OUT_TIME),Notifier},append:function(e){var t=Notifier.templateLi.clone().removeAttr("id").hide();return t.find(".msg").html(e.msg),t.addClass("alert-"+e.type),Notifier.list.append(t),t.fadeIn(500),Notifier},clear:function(){return Notifier.list.find("li").not("#flash_template").remove(),Notifier},showLoader:function(e){if(!e)return!1;Notifier.loadingOverlay=Notifier.loadingOverlay||$(".loadOverlay");if(!Notifier.loadingOverlay.length)throw"Html: div.loadOverlay is missing";this.scrollTop();var t=$(document).height();Notifier.loadingOverlay.css({height:t}).fadeTo(500,.9);var n=Notifier.loadingOverlay.find(".overlayMessage");n.find(".message").html(e);var r=$(document).width()/2-n.width()/2+"px";return n.css({left:r}),Notifier},scrollTop:function(){return window.scrollTo(0,0),Notifier},hideLoader:function(){return Notifier.loadingOverlay.hide(),Notifier}},Path=function(e){this.points=e||[]};Path.prototype={add:function(e){return this.points.push(e),this},copy:function(e){this.points=[];for(var t=0;t<e.points.length;t++)this.add(e.points[t]);return this},clone:function(){return(new Path).copy(this)},draw:function(e,t){var n=this.points;for(var r=0;r<n.length-1;r++)e.drawArrow(n[r].x,n[r].y,n[r+1].x,n[r+1].y,t||1)},string:function(){return JSON.stringify(this.points)},log:function(){console.log(this.string())},getData:function(){return this.clone().points}};var SliderDiv=function(e){var t={containerSelector:"#slide-container",slideWrapperSelector:".slide-wrapper",slideSelector:".slide",nextButtonSelector:".nextButton",previousButtonSelector:".prevButton",itemListSelector:null,itemListElementClass:"slide-item",activeItemClass:"active-item",hasKeyEvents:!1,moveSpeed:500};this.settings=$.extend({},t,e),this.container=$(this.settings.containerSelector),this.viewport=this.container.find(this.settings.slideWrapperSelector),this.slideObjects=this.viewport.find(this.settings.slideSelector),this.itemUl=$(this.settings.itemListSelector),this.itemListElementClass=this.settings.itemListElementClass,this.activeItemClass=this.settings.activeItemClass,this.nextButton=$(this.settings.nextButtonSelector),this.prevButton=$(this.settings.previousButtonSelector),this.MOVE_SPEED=this.settings.moveSpeed,this.HAS_KEY_EVENTS=this.settings.hasKeyEvents,this.init()};SliderDiv.prototype.init=function(){this.reset(),this.container.css({overflow:"hidden"});var e=this.container.width()*this.slideObjects.length;return this.viewport.css({width:e+"px",overflow:"overlay",clear:"both",position:"relative"}),this.slideObjects.css({width:this.container.width()+"px",position:"relative","float":"left"}),this.buildItems(),this.nextButton.click($.proxy(this.next,this)),this.prevButton.click($.proxy(this.prev,this)),this.HAS_KEY_EVENTS&&$(document).keydown($.proxy(this.keyEvent,this)),this},SliderDiv.prototype.reset=function(){return this.currentSlideIndex=0,this.handleButtonVisibility(),this.autoTimeout=null,this.doPlay=!1,this.autoMoveTime=5e3,this.countSlides=this.slideObjects.length,this},SliderDiv.prototype.buildItems=function(){var e=this;if(!this.itemUl.length||this.countSlides===0)return!1;this.slideObjects.each(function(t,n){e.itemUl.append('<li class="'+e.itemListElementClass+'"></li>')}),this.itemUl.find("li").bind("click",function(){e.moveTo($(this).index())}),this.highLightItem()},SliderDiv.prototype.next=function(e){return this.currentSlideIndex===this.slideObjects.length-1?!1:(this.currentSlideIndex++,this.move(1),this)},SliderDiv.prototype.prev=function(e){return this.currentSlideIndex===0?!1:(this.currentSlideIndex--,this.move(-1),this)},SliderDiv.prototype.autoPlay=function(e){this.autoMoveTime=e||this.autoMoveTime;var t=this;return this.autoTimeout=setInterval(function(){t.play()},this.autoMoveTime),this},SliderDiv.prototype.play=function(){return this.currentSlideIndex===this.countSlides-1?this.moveTo(0):this.next(),this},SliderDiv.prototype.stopPlay=function(){return clearTimeout(this.autoTimeout),this},SliderDiv.prototype.move=function(e,t){this.handleButtonVisibility(),this.highLightItem();var n=t?t:this.container.width(),r=e<0?"+=":"-=",i=this;return this.viewport.animate({left:r+n},this.MOVE_SPEED,function(){i.afterMove()}),this},SliderDiv.prototype.moveTo=function(e){if($("input, textarea").is(":focus"))return!1;if(e<0||e===this.currentSlideIndex||e>this.countSlides)return!1;var t=this.slideObjects.eq(this.currentSlideIndex).offset().left,n=this.slideObjects.eq(e).offset().left,r=t>n?-1:1,i=this.container.width()*Math.abs(this.currentSlideIndex-e);return this.currentSlideIndex=e,this.move(r,i),this},SliderDiv.prototype.afterMove=function(){return!0},SliderDiv.prototype.highLightItem=function(){if(!this.itemUl.length)return!1;var e=this.itemUl.find("li");e.removeClass(this.activeItemClass),e.eq(this.currentSlideIndex).addClass(this.activeItemClass)},SliderDiv.prototype.handleButtonVisibility=function(){this.nextButton.show(),this.prevButton.show(),this.currentSlideIndex===this.slideObjects.length-1&&this.nextButton.hide(),this.currentSlideIndex===0&&this.prevButton.hide()},SliderDiv.prototype.getViewportHeight=function(e){var t=this.slideObjects.eq(e).find(":hidden").show(),n=this.slideObjects.eq(e).height();return t.hide(),n},SliderDiv.prototype.keyEvent=function(e){if(!this.HAS_KEY_EVENTS)return!1;switch(e.keyCode){case 39:this.next();break;case 37:this.prev()}};var Storage={storage:null,init:function(){this.storage=window.localStorage||{storage:{},setItem:function(e,t){this.storage[e]=t.toString()},getItem:function(e){return this.storage[e]},clear:function(){this.storage={}}}},read:function(e){return this.storage||this.init(),this.storage.getItem(e)},write:function(e,t){this.storage||this.init(),this.storage.setItem(e,t)}};$(document).ready(function(){function n(e,t,n){r(t,n||null),$(".layer").hide(),e&&e.show()}function r(e,t){$(".tabButton").removeClass("active"),$("#shareButtons .btn").removeClass("active"),e&&(e.addClass("active"),e.length&&t&&$.scrollTo(e,{axies:"y",duration:700,offset:-20}))}$(".searchbox").autocomplete({source:"/games/auto_search",minLength:2}),Feedback.init(),Notifier.init().notify(),FramePlayer.init();if($("#guide-slide-container").length){var e=new SliderDiv({containerSelector:"#guide-slide-container"});e.autoPlay(5e3);var t=$("#guideSteps").find("li");t.first().addClass("activeElement"),t.click(function(){var t=$(this).index();e.moveTo(t).stopPlay()}),e.afterMove=function(){var e=this.currentSlideIndex;t.removeClass("activeElement"),t.eq(e).addClass("activeElement")}}$(".shareButton").click(function(e){n($("#shareLayer"),$(this),e)}),$(".embedButton").click(function(e){n($("#embedLayer"),$(this),e)}),$(".reportButton").click(function(e){n($("#reportLayer"),$(this),e)}),$(".closeLayer").click(function(e){n()});var i=function(e){var t=$("#profilewrap"),n=t.find("#display_name_form");n.slideToggle().toggleClass("editMode"),t.find("#display_name").slideToggle();if(n.hasClass("editMode")){var r=t.find("#user_display_name"),i=r.val();r.focus().val("").val(i),e.html("Cancel")}else e.html("Edit")};$("#profilewrap").find(".edit").live("click",function(e){i($(this))});var s=getURLParameter("current");s=="null"&&(s="games");var o=$("#"+s+"Layer"),u=$("."+s+"Button");n(o,u),$(".gamesButton").click(function(e){n($("#gamesLayer"),$(this),e)}),$(".graphicsButton").click(function(e){n($("#graphicsLayer"),$(this),e)}),$(".backgroundsButton").click(function(e){n($("#backgroundsLayer"),$(this),e)});var a=$(".scroll-pane");a.jScrollPane({showArrows:!0});var f=a.data("jsp"),l=$("#messages");l.resizable({alsoResize:".activity-list",maxWidth:l.width(),minWidth:l.width(),stop:function(){f.reinitialise()}}),$(".stream-popup").popover({placement:"right",trigger:"hover"}),$(".game-select .btn-group a").click(function(e){e.target.href+="?order="+$(".btn-group.order .active")[0].value}),highlight_current_order(),$(".btn-group.order button").click(function(e){var t=window.location.href.split("?")[0];window.location.href=t+"?order="+e.target.value}),$("#header").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()}),$(".rating_form").submit(function(e){$(".rating_form .btn").attr("disabled",!0)})});